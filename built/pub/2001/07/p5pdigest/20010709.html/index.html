<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/07/09 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Notes This Week on P5P  No 5.8.0 Yet  New Modules  Numbers, numbers, numbers  PerlIO considered evil  Asynchronous Callbacks  Various Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month...."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/07/p5pdigest/20010709.html/" />
<meta property="og:title" content="This Week on p5p 2001/07/09" />
<meta property="og:description" content="Notes This Week on P5P  No 5.8.0 Yet  New Modules  Numbers, numbers, numbers  PerlIO considered evil  Asynchronous Callbacks  Various Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month....">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-07-07T07:07:07Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/07/09</h1>
              <p class="blog-post-meta">Jul 9, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td><p>This Week on P5P</p>
<p>• <a href="#No_580_Yet">No 5.8.0 Yet</a><br />
<br />
• <a href="#New_Modules">New Modules</a><br />
<br />
• <a href="#Numbers_numbers_numbers">Numbers, numbers, numbers</a><br />
<br />
• <a href="#PerlIO_considered_evil">PerlIO considered evil</a><br />
<br />
• <a href="#Asynchronous_Callbacks">Asynchronous Callbacks</a><br />
<br />
• <a href="#Various">Various</a></p></td>
</tr>
<tr class="odd">
<td></td>
</tr>
</tbody>
</table>

<p>Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters biographies are particularly welcome.</p>

<p>This was a reasonably busy week, seeing just over 400 messages. I say that every week, don&rsquo;t I?</p>

<h3 id="span-id-no-580-yet-no-5-8-0-yet-span"><span id="No_580_Yet">No 5.8.0 Yet</span></h3>

<p><a href="http://simon-cozens.org/writings/whos-who.html#HIETANIEMI">Jarkko</a> sadly announced that 5.8.0 wasn&rsquo;t going to happen before the Perl Conference, but 5.7.2 is imminent:</p>

<blockquote>
<p>I think it&rsquo;s time for me to give up the fantasy that 5.8.0 will happen before the Perl Conference. The stars just refuse to align properly, too many loose ends, too many delays, too many annoying mysterious little problems, too little testing of CPAN modules. Luckily, nothing is majorly broken, and I think that I&rsquo;ve more or less achieved what I set out to do with Perl, so I still hope to be able wrap something up before TPC and call it 5.7.2 (it must happen next week or it will not happen), and soon after the conference put out the Release Candidate 1 for 5.8.0, and then keep cracking the whip till we are happy with what we&rsquo;ve got.</p>
</blockquote>

<h3 id="span-id-new-modules-new-modules-span"><span id="New_Modules">New Modules</span></h3>

<p>These aren&rsquo;t really very new, but they may have slipped through the net and you haven&rsquo;t noticed them yet, and since they&rsquo;re interesting, you might want to have a look&hellip;</p>

<p><code>I18N::LangTags</code> detects and manipulates RFC3066 language tags; <code>Locale::Maketext</code> is extremely useful for localizing text; <code>Unicode::UCD</code> is a neat interface to the Unicode Character Database; <code>Encode</code> is coming on strong, and can now read IBM ICU character tables; Mark-Jason Dominus&rsquo; <code>Memoize</code> module is now part of the core.</p>

<h3 id="span-id-numbers-numbers-numbers-numbers-numbers-numbers-span"><span id="Numbers_numbers_numbers">Numbers, numbers, numbers</span></h3>

<p>Remember last week&rsquo;s weird Amdahl UTS bug, where <a href="http://simon-cozens.org/writings/whos-who.html#CLARK">Nicholas Clark</a> was convinced UTS C was doing a decrement statement twice? He found the problem - the decrement statement shouldn&rsquo;t have been there at all&hellip;</p>

<p>This prompted him to find a bug in <code>grok_number</code>; this surprised me a little, because I didn&rsquo;t know that <code>grok_number</code> even existed. All of the useful, platform-independent code which deals with numeric operations - casting between different sizes, converting binary, hex, and octal numbers, recognising numbers in strings, and so on, has been moved to <code>numeric.c</code>. Take a look at it, there&rsquo;s a load of handy stuff in there.</p>

<p>Hal Morris, our UTS wizard, also pointed out some unpleasant casting assumptions, which needed a patch:</p>

<blockquote>
<p><code>UV_MAX</code> must NOT be defined as <code>(unsigned long){whatever}</code> for UTS, because then comparisons with double will not work correctly (there is no problem with <code>(unsigned)</code> typecasts, only with <code>(unsigned long)</code>)</p>
</blockquote>

<p><code>grok_number</code> again came in handy on QNX, when Norton Allen found that <code>strtoul</code> wasn&rsquo;t setting <code>errno</code> correctly on overflow. It&rsquo;s sad when we have to start reimplementing people&rsquo;s broken C libraries, but this is the price of portability.</p>

<h3 id="span-id-perlio-considered-evil-perlio-considered-evil-span"><span id="PerlIO_considered_evil">PerlIO considered evil</span></h3>

<p><a href="http://simon-cozens.org/writings/whos-who.html#ZACHAREVICH">Ilya</a> found a bug in PerlIO, then found another bug while attempting to demonstrate it. The original bug was:</p>

<blockquote>
<p>The *actual* problem is that char-by-char input requires DUPLICATE pressing of ENTER key for this key to be seen by Perl. Debugging this problem (via Term::ReadKey test suite) shows the following logic:</p>

<p>pp_getc() calls is_eof() which does getc/ungetc calls getc()</p>

<p>[BTW, I see no logic in this sequence of events.]</p>

<p>The problem is that ungetc() can&rsquo;t unget &ldquo;\n&rdquo; if this \n is the first char in the buffer, and quietly drops &ldquo;\n&rdquo; to the floor.</p>
</blockquote>

<p>Ilya had a lot of invective set aside for PerlIO, which we need not go into. Needless to say, he did not provide an alternative implementation of a multi-layered standard IO system as a patch. Or indeed any patch at all.</p>

<p>Vadim Konovalov did provide a simple patch to clean something up, but then <a href="http://simon-cozens.org/writings/whos-who.html#DOUGHERTY">Andy</a> and <a href="http://simon-cozens.org/writings/whos-who.html#ING-SIMMONS">Nick</a> both showed that it didn&rsquo;t help at all, the generated code being the same and some compilers not being able to cope with lvalue casts, which Nick had carefully removed and Vadim&rsquo;s patch reintroduced. Guess Nick might actually know what he&rsquo;s doing after all.</p>

<h3 id="span-id-asynchronous-callbacks-asynchronous-callbacks-span"><span id="Asynchronous_Callbacks">Asynchronous Callbacks</span></h3>

<p>David Lloyd asked how do safely do asynchronous callbacks from C to Perl. Bejamin Stuhl suggested hacking the core to introduce some checks during the inter-opcode <code>PERL_ASYNC_CHECK</code>, and suggested that Perl 5.8.x had a public way of registering inter-opcode callbacks. David Lloyd replied that PHP/Zend already had this, and you could even implement a signal checking add-on module without any core hacking. Paul Johnson went one further, and suggested using a pluggable <code>runops</code> routine. Surprisingly, this has actually been implemented but nobody really knows about it; <code>Devel::Cover</code> apparently makes use of it. Of course, the problem is that only one thing can use a custom op loop at a time, so David suggested writing an XS module that allowed other modules to add callbacks. I hope that happens.</p>

<p>Artur Bergman popped up and, predictably, suggested using ithreads.</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>Rudi Farkas found a weird one on Win32 - on that platform, executableness (the <code>-x</code> test) is determined by the filename being examined. For instance, <code>foo.bat</code> is classed as executable, but <code>foo.bar</code> is not, even if they contain exactly the same data. This rather curious design decision leads to the fact that if you call <code>stat</code> with a filename, the execute bit is set depending on the extension. If, on the other hand, you call <code>fstat</code> with a filehandle, Windows can&rsquo;t retrieve the filename and test the extension, so it silently sets the execute bit to zero, no matter what it gets fed. This is Bad, and means that <code>-x _</code> on Windows is unpredictable. Radi provided a suggested workaround, but nobody cared enough about fixing something so obviously braindead to produce a patch.</p>

<p>Mike Schwern fixed up <code>MakeMaker</code> to stop producing extraneous <code>-I...</code>s when building extensions, and also found that the XS version of <code>Cwd</code> won&rsquo;t do much good as a separate CPAN module, since it relies on the core function <code>sv_getcwd</code>, which only appears in 5.7.1. Oops. Oh, and speaking of <code>Cwd</code>, Ilya patched it up a bit for OS/2, while noting that its results were untainted on that platform.</p>

<p>Ilya also fixed a glaring debugger bug (oh, the irony) prompting Jarkko to lament the lack of a test suite. Robin fixed up a couple of weird, weird bugs in <code>B::Deparse</code>.</p>

<p>Jonathan Stowe upgraded <code>pl2pm</code> to be warnings and strict clean. I&rsquo;m not sure why.</p>

<p>Philip Newton patched a score of typos. Norton Allen updated the QNX documentation and provided a couple of other fixes.</p>

<p>Piers Cawley found something that looked like a bug in <code>SUPER::</code> but was assured that it wasn&rsquo;t; Randal won the day with a reference to Smalltalk.</p>

<p>Abhijit Menon-Sen (look out for this guy&hellip;) made <code>mkdir</code> warn if it was given a non-octal literal, since that generally doesn&rsquo;t do what people want, and after prompting from Gisle, did the same for <code>umask</code> and <code>chmod</code>. Unfortunately, he forgot about constant folding&hellip;</p>

<p>Until next week I remain, your humble and obedient servant,</p>

<hr />

<p><a href="mailto:mjd-perl-thisweek-200107+@simon-cozens.org">Simon Cozens</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_07_p5pdigest_20010709.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

