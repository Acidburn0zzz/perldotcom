<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Mail Filtering with Mail::Audit </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Let&#39;s face it. procmail is horrid. But for most of us, it&#39;s the only sensible way to handle mail filtering. I used to tolerate procmail, with its grotesque syntax and its less-than-helpful error messages, because it was the only..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/07/17/mailfiltering.html/" />
<meta property="og:title" content="Mail Filtering with Mail::Audit" />
<meta property="og:description" content=" Let&#39;s face it. procmail is horrid. But for most of us, it&#39;s the only sensible way to handle mail filtering. I used to tolerate procmail, with its grotesque syntax and its less-than-helpful error messages, because it was the only...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-07-07T07:07:07Z" />
<meta property="og:image" content="http://localhost:1313/images/_pub_2001_07_17_mailfiltering/111-mailaudit.jpg" />
<meta property="og:article:tag" content="e-mail" />
<meta property="og:article:tag" content="filter" />
<meta property="og:article:tag" content="procmail" />
<meta property="og:article:tag" content="rule" />
<meta property="og:article:tag" content="spam" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Mail Filtering with Mail::Audit</h1>
              <p class="blog-post-meta">Jul 17, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<p>Let&rsquo;s face it. <em>procmail</em> is horrid. But for most of us, it&rsquo;s the only sensible way to handle mail filtering. I used to tolerate <em>procmail</em>, with its grotesque syntax and its less-than-helpful error messages, because it was the only way I knew to separate out my mail. One day, however, I decided that I&rsquo;d been told &ldquo;delivery failed, couldn&rsquo;t get lock&rdquo; or similar garbage for the very last time, and decided to sit down and write a <em>procmail</em> replacement.</p>

<p>That&rsquo;s when it dawned on me that what I really disliked about <em>procmail</em> was the recipe format. I didn&rsquo;t want to handle my mail with a collection of colons, zeroes, and single-letter commands that made <code>sendmail.cf</code> look like a Shakespearean sonnet; I wanted to program my mail routing in a nice, high-level language. Something like Perl, for instance.</p>

<p>The result is the astonishingly simple Mail::Audit module. In this article, we&rsquo;ll examine what we can do with Mail::Audit and how we can use it to create mail filters. We&rsquo;ll also look at the News::Gateway module for turning mailing lists into newsgroups and back again.</p>

<h3 id="what-is-it">What Is It?</h3>

<p>Mail::Audit itself isn&rsquo;t a mail filter - it&rsquo;s a toolkit that makes it very easy for you to build mail filters. You write a program that describes what should happen to your mail, and this replaces your <em>procmail</em> command in your <code>.forward</code> or <code>.qmail</code> file.</p>

<p>Mail::Audit provides the functionality for extracting mail headers, bouncing, accepting, rejecting, forwarding, and filtering incoming mail.</p>

<h3 id="a-very-simple-mail-filter">A Very Simple Mail Filter</h3>

<p>Here&rsquo;s the simplest filter program we can make with Mail::Audit.</p>

<pre><code>    use Mail::Audit;
    my $incoming = Mail::Audit-&gt;new;
    $incoming-&gt;reject;
</code></pre>

<p>If you save this as <code>~/bin/chuckmail</code>, then you can put the following in a <code>.forward</code> file:</p>

<pre><code>    |~/bin/chuckmail
</code></pre>

<p>or in a <code>.qmail</code> file:</p>

<pre><code>    preline ~/bin/chuckmail
</code></pre>

<p>Every mail message you receive will now pass through this program. The mail comes into the program via standard input, and the <code>new()</code> method takes it from there and turns it into a Mail::Audit object:</p>

<pre><code>    my $incoming = Mail::Audit-&gt;new;
</code></pre>

<p>Next, we bounce it as undeliverable:</p>

<pre><code>    $incoming-&gt;reject;
</code></pre>

<p>We could even get fancy, and supply a reason with the bounce:</p>

<pre><code>$incoming-&gt;reject(&lt;&lt;EOF);
    The local user was silly enough to leave chuckmail as his
    mail filter.  Too bad you can't mail him to let him know.
EOF
</code></pre>

<p>This reason will be relayed back to the sender as part of the bounce message.</p>

<h3 id="separating-mail-into-folders">Separating Mail Into Folders</h3>

<p>The one thing most people use <em>procmail</em> for is to separate mail out into several mail folders. Here&rsquo;s an example of how we&rsquo;d do this:</p>

<pre><code>    use Mail::Audit;
    my $item = Mail::Audit-&gt;new;

    if ($item-&gt;from =~ /perl5-porters/) {
        $item-&gt;accept(&quot;/home/simon/mail/p5p&quot;)
    }

    $item-&gt;accept;
</code></pre>

<p>Now any mail with <code>perl5-porters</code> in the <code>From:</code> line will be added to the file <code>mail/p5p</code> under my home directory. Any other mail will be accepted into my inbox as normal.</p>

<p>Two things to note here:</p>

<ul>
<li>Once the mail has been filed to <code>mail/p5p</code> via <code>accept()</code>, it leaves the program. Game over, end of story. The same goes for the other methods such as <code>reject()</code>, <code>pipe()</code>, and <code>bounce()</code>.</li>
<li>The last line in the program should probably be an <code>accept()</code> call; mail that reaches the end of the program without being deposited in a mailbox or rejected will be silently ignored. (This may change to an implicit <code>accept()</code> in a later version, to be more <em>procmail</em>-like.)</li>
</ul>

<p>If you&rsquo;ve got a few mailing lists or people you want to filter, you could do this:</p>

<pre><code>  use Mail::Audit;
  my $item    = Mail::Audit-&gt;new;
  my $maildir = &quot;/home/simon/mail/&quot;;

  my %lists = (
      perl5-porters    =&gt; &quot;p5p&quot;,
      helixcode        =&gt; &quot;gnome&quot;,
      uclinux          =&gt; &quot;uclinux&quot;,
      'infobot\.org'   =&gt; &quot;infobot&quot;,
      '@dion\.ne\.jp'  =&gt; &quot;yamachan&quot;
  );

  for my $pattern (keys %lists) {
      $item-&gt;accept($maildir.$lists{$pattern})
          if $item-&gt;from =~ /$pattern/ 
             or $item-&gt;to =~ /$pattern/;
  }

  $item-&gt;accept;
</code></pre>

<p>This time, we perform a regular expression match to see if either the <code>From:</code> line or the <code>To:</code> line match any of the patterns in our hash keys, and if they do, direct the mail to the corresponding folder. Since we&rsquo;re using ordinary Perl regular expressions, we can do this sort of thing:</p>

<pre><code>  '\bxxx.*\.com$'  =&gt; &quot;spam&quot;
</code></pre>

<p>(And you&rsquo;d be surprised at quite how much junk mail that one traps.)</p>

<p>Here&rsquo;s another simple but remarkably effective spamtrap recipe:</p>

<pre><code>  $item-&gt;accept(&quot;questionable&quot;)
      if $item-&gt;from !~ /simon/i and $item-&gt;cc !~ /simon/i;
</code></pre>

<p>We check the <code>From:</code> and <code>CC:</code> headers for my name, and if it&rsquo;s not in either - the mail probably isn&rsquo;t to me. This one only makes sense after we&rsquo;ve filtered out mailing list messages, which could validly be sent from a subscriber to a generic list address.</p>

<h3 id="mail-and-news">Mail and News</h3>

<p>I much prefer reading mailing lists as newsgroups; while a good mail client like <em>mutt</em> can display mail as threaded discussions, I personally prefer navigating in a newsreader. So, how do we gate mailing lists to newsgroups and back? Russ Allbery&rsquo;s News::Gateway module helps do just that - it provides a program called <em>listgate</em> which takes an incoming mailing list message, reformats it as a valid news article, and then posts it to the news server. We can plug this into our mail filter quite easily; assuming we&rsquo;ve got the group <code>lists.p5p</code> set up on the local news server and we&rsquo;ve configured listgate appropriately, we can just say:</p>

<pre><code>  $item-&gt;pipe(&quot;listgate p5p&quot;) if $item-&gt;from =~ /perl5-porters/;
</code></pre>

<p>Again, if we&rsquo;ve got multiple groups, we can use a hash to correlate patterns to groups as we did with mailing lists above.</p>

<p>So much for getting incoming mail to news - what about getting posted articles back into the mailing list? The key to this is in the newsgroup moderation system - when you post to a moderated newsgroup, the article is mailed to a moderator for approval. If we set the moderator of <code>lists.p5p</code> to the list address, we can get our outgoing posts sent to the list. In <code>/usr/news/etc/moderators</code>, you&rsquo;d say</p>

<pre><code>    lists.p5p:  perl5-porters@perl.org
</code></pre>

<p>Very easy. The only problem is that it doesn&rsquo;t work. Mail messages and news articles have a slightly different format, and some mailing list managers will reject mail messages that look like news articles. So we need to send our message through a clean-up phase first. Instead of sending it to <code>perl5-porters@perl.org</code>, we&rsquo;ll instead send it to <code>news-outgoing@localhost</code>:</p>

<pre><code>    lists.*:    news-outgoing@localhost
</code></pre>

<p>Mail arriving at that account needs to go through another Perl program to clean up and dispatch the outgoing article, and that looks like this:</p>

<pre><code>    #!/usr/bin/perl
    use News::Gateway;
    my $gw=News::Gateway-&gt;new(0);
    $gw-&gt;modules( 'newstomail', 'headers');
    $gw-&gt;config_line(&quot;newstomail /home/simon/bin/news2mail.h&quot;);
    $gw-&gt;config_line(&quot;header newsgroups drop&quot;);
    $gw-&gt;config_line(&quot;header organisation drop&quot;);
    $gw-&gt;config_line(&quot;header nntp-posting-host drop&quot;);
    $gw-&gt;read(*STDIN) or die $!;
    $gw-&gt;apply();
    $gw-&gt;mail();
</code></pre>

<p>This reads an article from standard input, drops the <code>Newsgroups</code>, <code>Organisation</code>, and <code>NNTP-Posting-Host</code> headers, reformats it as a mail message using the configuration file <code>/home/simon/bin/news2mail.h</code> to find the address, and then sends it. That config file is just a list of newsgroups and the addresses they belong to:</p>

<pre><code>    lists.p5p perl5-porters@perl.org
    lists.tlug tlug@tlug.gr.jp
    lists.advocacy advocacy@perl.org
    lists.linux-kernel linux-kernel@vger.rutgers.edu
    lists.perl-friends perl-friends@perlsupport.com
</code></pre>

<p>So here&rsquo;s the recipe for filtering news to mail and back again:</p>

<p>• Incoming messages</p>

<blockquote>
<p>will be trapped by a rule in your mail filter, and be piped to <code>listgate</code> via a line like</p>

<pre><code>    $item-&gt;pipe(&quot;listgate p5p&quot;)
        if $item-&gt;from =~ /perl5-porters/;
</code></pre>

<p><code>listgate</code> will then post them to your news server, to the group <code>lists.p5p</code>.</p>
</blockquote>

<p>• Outgoing articles</p>

<blockquote>
<p>will be sent to the moderator address, <code>news-outgoing@localhost</code> for cleanup. The cleanup program will drop unnecessary headers, reformat as a mail message, and then look at the configuration file to determine where to send them on. They&rsquo;ll be sent to the mailing list, and sometime later will be returned to you by mail, to appear in the newsgroup as above.</p>
</blockquote>

<h3 id="a-complete-filter">A Complete Filter</h3>

<p>Here, to show off exactly what I do with Mail::Audit, is a suitably anonymized and annotated version of the filter I currently use to process my incoming mail.</p>

<pre><code>    #!/usr/bin/perl
    use Mail::Audit;
    $folder = &quot;/home/simon/mail/&quot;;
</code></pre>

<p>Anything that actually reaches me is going to be logged so that I can <code>tail -f</code> a summary of incoming mail to one of my terminals.</p>

<pre><code>    open (LOG, &quot;&gt;/home/simon/.audit_log&quot;);
</code></pre>

<p>Read in the new mail message, and extract the important headers from it:</p>

<pre><code>    my $item = Mail::Audit-&gt;new;
    my $from = $item-&gt;from();
    study $from;
    my $to = $item-&gt;to();
    my $cc = $item-&gt;cc();
    my $subject = $item-&gt;subject();
    chomp($from, $to, $subject);
</code></pre>

<p>If I&rsquo;m likely to be at the office, I appreciate a copy of all mail I receive, in case there&rsquo;s something I need to deal with immediately. So I need <em>time-controlled</em> filtering. Try doing this with <em>procmail</em>:</p>

<pre><code>    my ($hour, $wday) = (localtime)[2,6];
    if ($wday !=0 and $wday !=6         # Not Saturday/Sunday
        and $hour &gt; 9 and $hour &lt; 18) { # Between 9am and 6pm
        print LOG &quot;$subject: $from: Bouncing to work\n&quot;;
        $item-&gt;resend('simon@theoffice.com');
        # resend is the only action
        # which doesn't end the program.
    }
</code></pre>

<p>One of my users didn&rsquo;t have their own email address for a while, so they had their friends send mail to me instead. Now they have their own address, so the mail is bounced across to them:</p>

<pre><code>    $item-&gt;bounce('ei@somewhere.com') if $subject =~ /^For Ei:/;
</code></pre>

<p>I maintain two FAQs: the perl5-porters FAQ and the Tokyo high speed connectivity FAQ. The mail comes to different email addresses, but it all ends up at my box. They need to go in separate folders.</p>

<pre><code>    $item-&gt;accept(&quot;$folder/p5p-faq&quot;)   if $to=~ /p5p-faq/;
    $item-&gt;accept(&quot;$folder/tokyo-faq&quot;) if $to=~ /faq/;
</code></pre>

<p>I get some mail in Greek which needs to be processed with <code>metamail</code> to sort out the character sets. The pipe method squirts the mail to a separate program:</p>

<pre><code>    $item-&gt;pipe(&quot;metamail -B -x &gt; $folder/greek&quot;)
                if $from =~/hri\.org$/;
</code></pre>

<p>Some people I definitely want to hear from, so they get accepted at this stage to save time:</p>

<pre><code>    for (qw(goodguy dormouse locust)) {
        if ($from =~ /$_/) {
            print LOG &quot;$from:$subject:Exception, 
                accepting into inbox\n&quot;;
            $item-&gt;accept;
        }
    }
</code></pre>

<p>Some people I very definitely do not want to hear from:</p>

<pre><code>    for (qw(badguy nasty enemy)) {
        if ($from =~ /$_/) {
            print LOG &quot;$from:$subject:Dumped\n&quot;;
            $item-&gt;reject(&quot;Go away! Stop emailing me!&quot;);
        }
    }
</code></pre>

<p>Some people or mailing lists I currently just don&rsquo;t have time for, so they get silently ignored:</p>

<pre><code>    for (qw(freshmeat.net microsoft news\@myhost cron)) {
        if ($from =~ /$_/) {
            print LOG &quot;$from:$subject:Ignored\n&quot;;
            $item-&gt;ignore;
        }
    }
</code></pre>

<p>Some mailing lists I want to stay as lists:</p>

<pre><code>    my %lists = (
        &quot;pound.perl.org&quot;  =&gt; &quot;purl&quot;,
        &quot;helixcode&quot;       =&gt; &quot;gnome&quot;,
        &quot;uclinux&quot;         =&gt; &quot;uclinux&quot;,
        &quot;infobot&quot;         =&gt; &quot;infobot&quot;,
        &quot;european-&quot;       =&gt; &quot;yapc&quot;,
        &quot;tpm\@otherside&quot;  =&gt; &quot;tpm&quot;,
        &quot;hellenic&quot;        =&gt; &quot;greeknews&quot;,
    );
    for my $what (keys %lists) {
        next unless $from =~ /$what/i or 
            $to =~ /$what/i or $cc =~/$what/i;
        my $where = $lists{$what};
        print LOG &quot;$from:$subject:List, 
            accepting to folder $where\n&quot;;
        $item-&gt;accept($folder.$where);
    }
</code></pre>

<p>And some I want to pipe to <code>listgate</code> as newsgroups:</p>

<pre><code>    my %gated = (
        &quot;tlug&quot;    =&gt; &quot;tlug&quot;,
        &quot;advocacy&quot;    =&gt; &quot;advocacy&quot;,
        &quot;security-sig&quot;    =&gt; &quot;security&quot;,
        &quot;iss.net&quot; =&gt; &quot;security&quot;,
        &quot;securityfocus&quot;   =&gt; &quot;security&quot;,
        &quot;perl5-porters&quot;   =&gt; &quot;p5p&quot;,
        &quot;linux-kernel&quot;    =&gt; &quot;linux-kernel&quot;,
        &quot;perlsupport&quot; =&gt; &quot;perl-friends&quot;,
    );

    for my $what (keys %gated) {
        next unless $from =~ /$what/i or 
            $to =~ /$what/i or $cc =~/$what/i;
        my $where=$gated{$what};
        print LOG &quot;$from:$subject:Gated to lists.$where\n&quot;;
        $item-&gt;pipe(&quot;/usr/local/bin/listgate $where&quot;);
    }
</code></pre>

<p>Some spammers just don&rsquo;t give up, so we actually reject their messages. We do this based on subject, which is a bit risky but seems to work:</p>

<pre><code>    for (&quot;Invest&quot;, &quot;nude asian&quot;))  {
        $item-&gt;reject(&quot;No! Go away!&quot;)
                if $subject=~/\b$_\b/;
    }
</code></pre>

<p>Before we let the article in to the inbox, there&rsquo;s a long list of patterns at the end of the program which match known spam senders. We check the incoming mail against this list, and save it for analysis and reporting:</p>

<pre><code>    while (&lt;DATA&gt;) {
        chomp;
        next unless $from =~ /$_/i or $to =~ /$_/i;
        print LOG &quot;$from:$subject:Spam?\n&quot;;
        $item-&gt;accept($folder.&quot;spam&quot;);
    }
</code></pre>

<p>Now our final check for mail which doesn&rsquo;t appear to be for us:</p>

<pre><code>    if ($item-&gt;from !~ /simon/i and $item-&gt;cc !~ /simon/i) {
        print LOG &quot;$from:$subject:Badly addressed mail\n&quot;;
        $item-&gt;accept(&quot;questionable&quot;)
    }
</code></pre>

<p>Finally, we let the mail in:</p>

<pre><code>    print LOG &quot;INCOMING MAIL:$from:$subject:
            Accepting to inbox\n&quot;;
    $item-&gt;accept();
</code></pre>

<h3 id="caveats">Caveats</h3>

<p>I&rsquo;m perfectly happy to trust Mail::Audit with all my incoming email. For a while it was running alongside <em>procmail</em>, but now it rules the roost. However, there are some things which you do need to take care about if you want to run it yourself.</p>

<p>Mail::Audit has been tested on <code>qmail</code> and <code>postfix</code> - it should work fine on other MTAs (Message Transfer Agents), so long as they believe that <code>exit 100</code>; means reject. If they don&rsquo;t, you can override the <code>reject</code> method like this:</p>

<pre><code>    $item = Mail::Audit-&gt;new(
            reject =&gt; sub { exit 67; }
    );
</code></pre>

<p>It also assumes that the default mailbox is <code>/var/spool/mail/name</code> where <code>name</code> is user ID of the current user. If this isn&rsquo;t the case, (I believe <code>mh</code> doesn&rsquo;t work like this) say <code>accept(&quot;Mailbox&quot;)</code> or override <code>accept</code> with a subroutine of your own.</p>

<p>Finally, Mail::Audit isn&rsquo;t sophisticated. It&rsquo;s little other than a wrapper around Mail::Internet. While it&rsquo;s probably perfectly fine for most filters you want to write, don&rsquo;t expect it to do everything for you.</p>

<h3 id="conclusion">Conclusion</h3>

<p>Mail::Audit and News::Gateway are both available from CPAN; together they allow you to very easily construct mail filters and newsgroup gateways in Perl. It&rsquo;s a great way to filter your mail with Perl, and an excellent replacement for moldy old <em>procmail</em>.</p>

<p><em>Copyright The Perl Journal. Reprinted with permission from CPM Media LLC. All rights reserved.</em></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/security">security</a></div>
                
                  <div class="tag"><a href="/tags/e-mail">e-mail</a></div>
                
                  <div class="tag"><a href="/tags/filter">filter</a></div>
                
                  <div class="tag"><a href="/tags/procmail">procmail</a></div>
                
                  <div class="tag"><a href="/tags/rule">rule</a></div>
                
                  <div class="tag"><a href="/tags/spam">spam</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_07_17_mailfiltering.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

