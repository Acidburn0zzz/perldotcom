<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/06/17 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters biographies are particularly welcome. This was a reasonably busy week, seeing just over 400 messages. Many thanks..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/06/p5pdigest/20010617.html/" />
<meta property="og:title" content="This Week on p5p 2001/06/17" />
<meta property="og:description" content=" Notes Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters biographies are particularly welcome. This was a reasonably busy week, seeing just over 400 messages. Many thanks...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-06-06T06:06:06Z" />
<meta property="og:image" content="http://localhost:1313/images/author/mjd.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/06/17</h1>
              <p class="blog-post-meta">Jun 19, 2001 by
              
              
                
                
                <a href="#author-bio-mark-jason-dominus">Mark-Jason Dominus</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters biographies are particularly welcome.</p>

<p>This was a reasonably busy week, seeing just over 400 messages.</p>

<p>Many thanks to Leon for taking over these summaries in my absence.</p>

<h3 id="span-id-more-wall-fixes-more-wall-fixes-span"><span id="More__Wall_fixes">More -Wall fixes</span></h3>

<p>Doug MacEachern has been furiously fixing up compiler warnings this week, tidying up <code>ext/</code> so that it is less noisy under <code>-Wall</code>.</p>

<p>One major problem was that if an XSUB has no arguments and all the work is done in PP code, the helper variable <code>ax</code> is likely to be unused; Doug added a macro, <code>PERL_UNUSED_VAR</code>, to wrap around <code>ax</code> in such cases to prevent <code>xsubpp</code> creating code that produced warnings.</p>

<p>Nick Clark also produced a mega (141K) warning-satisfying patch.</p>

<p>Dough also fixed up some missing <code>dTHX</code>es in some of the extensions. This led to an associated change in <code>ExtUtil/Constant.pm</code>, Nick Clark&rsquo;s helper module for creating the <code>constant</code> subroutine in XS modules. It took a while for people to get their heads around the idea that this was a Perl module that spat out XS code - unfortunately, MakeMaker doesn&rsquo;t like the idea of having two <code>.xs</code> files in a module, so you can&rsquo;t have a separate file for constants; hence, you have to do evil things like modifying the XS code produced by <code>h2xs</code> in place. Urgh.</p>

<h3 id="span-id-miscellaneous-darwin-updates-miscellaneous-darwin-updates-span"><span id="Miscellaneous_Darwin_Updates">Miscellaneous Darwin Updates</span></h3>

<p>Wilfredo Sanchez and Larry Schatzer have been our Mac OS X heroes this week. They uncovered a bunch of problems, some of which have even been fixed. Firstly, PerlIO was intercepting a warning from the locale system before it had been properly initialized, and was causing segfaults. There were also some numeric problems with <code>INT32_MIN</code> - Apple&rsquo;s <code>stdin.h</code> defines it as being -2147483648 instead of the more gcc-friendly -2147483647-1. As Jarkko said, the real long-term fix would be to fix Apple&rsquo;s header files; unfortunately, we can&rsquo;t do that very easily, so we have to work around to redefining <code>INT32_MIN</code> on Darwin ourselves.</p>

<h3 id="span-id-hash-accessor-macros-hash-accessor-macros-span"><span id="Hash_accessor_macros">Hash accessor macros</span></h3>

<p>Abhijit Menon-Sen asked why <code>hv.c</code> does things like</p>

<pre><code>    register XPVHV* xhv;
    ...
    xhv = (XPVHV*)SvANY(hv);

    ... use of xhv-&gt;xhv_* ...
</code></pre>

<p>instead of simply</p>

<pre><code>    SvFOO(hv);
</code></pre>

<p>which is considerably easier to grep for. He then sent seven large patches which revert to the macro behaviour. Jarkko applied the patches, but then found that this generated a bunch of new warnings, and some nasty errors on HPUX.</p>

<p>Doug MacEachern piped up, saying that the original code was there for reasons of performance; direct access saves a couple of indirections every time one of the <code>xhv_</code> fields is accessed. He also said that the first</p>

<pre><code>    xhv = (XPVHV*)SvANY(hv);
</code></pre>

<p>might be stored in a register, optimising further accesses. Both Mike Guy and Ilmari Karonen suggested reverting to the previous optimised format, but putting in the macro version as comments so that they can be grepped for. Spider was called in to fix up the HPUX indigestion.</p>

<p>Abhijit also threw in some updates to <code>dump.c</code>, and removed the tests in the core for &ldquo;anonymous stashes&rdquo; - a concept which didn&rsquo;t even appear to exist&hellip;</p>

<h3 id="span-id-ithreads-development-ithreads-development-span"><span id="iThreads_development">iThreads development</span></h3>

<p>Artur&rsquo;s been busy this week with iThreads support; he&rsquo;s working on a number of different areas. Firstly, the continuing conversion of the <code>Threads.pm</code> module for iThreads. His new module will be called <code>threads.pm</code> and will soon appear on CPAN once he&rsquo;s finished writing test cases. Another tack was to make regular expressions safe in threaded environments, but that seems to have temporarily ground to a halt.</p>

<p>His big achievement this week was the implementation and documenting of the <code>CLONE</code> method, a callback like <code>DESTROY</code> called on all objects when a thread is cloned. This caused some brief problems on Win32 because of the way it was detecting stashes. Stashes are, of course, normal hashes, so you have to be careful to call the <code>CLONE</code> method from a stash, rather than do something horrible like attempt to call the <code>CLONE</code> entry from a hash. Nick added</p>

<pre><code>     if (gv_stashpv(HvNAME(hv),0)
</code></pre>

<p>as a guard, and it all worked again.</p>

<h3 id="span-id-cross-compilation-cross-compilation-span"><span id="Cross_compilation">Cross-compilation</span></h3>

<p>Jarkko has reported that the basics of cross-compilation support are working; he built miniperl for iPAQ by constructing an SSH tunnel, sending the binaries produced by Configure across and reading back the results. <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-06/msg00737.html">Read about it.</a></p>

<h3 id="span-id-sv-documentation-sv-documentation-span"><span id="SV_Documentation">SV Documentation</span></h3>

<p>God of the week award goes to Dave Mitchell. Over on the Perl 6 lists, I&rsquo;d asked for people to look through the Perl 5 sources and see what sort of things happen to SVs, so that I could see what needed to happen for Perl 6. In doing so, he produced 800 lines of documentation and comments for <code>sv.c</code>. Wow.</p>

<p>On his travels, he asked some questions about SV macros; the answers may be interesting. <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-06/msg00586.html">Read about it.</a></p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>Ilya put in a couple of scary patches for OS/2, including one which made Configure self-modifying. This was considered to be a Bad Thing.</p>

<p>Jarkko integrated the NetWare modifications to Perl, and the <code>Memoize</code> module.</p>

<p>Sean Teague announced that the <a href="http://language.perl.com/ppt/">Perl Power Tools</a> can be downloaded from CPAN as <code>Bundle::PPT</code>.</p>

<p>Chris Nandor updated <code>File::Find</code> and its tests to cope with MacOS; however, this consisted mainly of several iterations of</p>

<pre><code>    if (macos) {
        A
    } else {
        B
    }
</code></pre>

<p>which Jarkko balked at. Thomas Wegner rewrote the test suite to be much more maintainable.</p>

<p>Mike Guy noticed that many of the internal functions don&rsquo;t support UTF8 strings properly; an important culprit is <code>Perl_warner</code>, which means every warning or error message containing UTF8 data gets mangled. He wants something which sanitizes a string for display. Any takers?</p>

<p>Peter Prymmer hacked <code>h2ph</code> to deal with C trigraphs - you remember them, the evil convention of using, say, &ldquo;??=&rdquo; instead of &ldquo;#&rdquo;. Urgh. He also fixed up some of the extensions to build more happily under VMS. Craig Berry also chipped in some extension patches for VMS.</p>

<p>Until next week I remain, your humble and obedient servant,</p>

<hr />

<p><a href="mailto:mjd-perl-thisweek-200106+@plover.com">Mark-Jason Dominus</a>
-   <a href="#This_week_on_perl5_porters_10_June__17_June_2001">This week on perl5-porters (10 June&ndash;17 June 2001)</a>
-   <a href="#Notes">Notes</a>
-   <a href="#More__Wall_fixes">More -Wall fixes</a>
-   <a href="#Miscellaneous_Darwin_Updates">Miscellaneous Darwin Updates</a>
-   <a href="#Hash_accessor_macros">Hash accessor macros</a>
-   <a href="#iThreads_development">iThreads development</a>
-   <a href="#Cross_compilation">Cross-compilation</a>
-   <a href="#SV_Documentation">SV Documentation</a>
-   <a href="#Various">Various</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-mark-jason-dominus">
  <div class="col-sm-2">
    
    <a href="/authors/mark-jason-dominus/"><div class="circle-avatar" style="background-image:url(/images/author/mjd.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/mark-jason-dominus/"><h3>Mark-Jason Dominus</h3></a>
    <p></p>
    <h5><a href="/authors/mark-jason-dominus/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_06_p5pdigest_20010617.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

