<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/02/12 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to p5p-digest-subscribe@plover.com. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. I&#39;ve been having mail problems this..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/02/p5pdigest/THISWEEK-20010212.html/" />
<meta property="og:title" content="This Week on p5p 2001/02/12" />
<meta property="og:description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to p5p-digest-subscribe@plover.com. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. I&#39;ve been having mail problems this...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-02-02T02:02:02Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/02/12</h1>
              <p class="blog-post-meta">Feb 14, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>You can subscribe to an email version of this summary by sending an empty message to <a href="mailto:p5p-digest-subscribe@plover.com"><code>p5p-digest-subscribe@plover.com</code>.</a></p>

<p>Please send corrections and additions to <code>perl-thisweek-YYYYMM@simon-cozens.org</code> where <code>YYYYMM</code> is the current year and month.</p>

<p>I&rsquo;ve been having mail problems this week, so it&rsquo;s possible that I&rsquo;ve missed one or two important things. Even so, it seems to be looking relatively quiet out there.</p>

<h3 id="span-id-perl-faq-updates-perl-faq-updates-span"><span id="Perl_FAQ_updates">Perl FAQ updates</span></h3>

<p>A number of bug reports and suggested fixes came in regarding the Perl FAQ this week; the most contentuous one was a bug in the regular expression for matching email addresses given in <code>perlfaq9</code>. Everyone agreed that there was no point trying to be completely correct, since the RFC822 grammar for an email address is not easily reduced into a regular expression. There are complete regular expressions, such as the one in Abigail&rsquo;s <code>RFC::RFC822::Address</code> module, and the one given in Jeffery Friedl&rsquo;s &ldquo;Mastering Regular Expressions&rdquo;. However, the current one required some slight tweaking.</p>

<p>This, combined with the other bug reports both on P5P and <code>perl-friends</code>, led Jarkko to set up a working group to look after the FAQ. If you&rsquo;re interested in helping out, see <a href="http://lists.perl.org/showlist.cgi?name=perlfaq-workers">the list&rsquo;s home page</a>.</p>

<h3 id="span-id-namespace-for-io-layers-namespace-for-io-layers-span"><span id="Namespace_for_IO_Layers">Namespace for IO Layers</span></h3>

<p>Nicholas Clark asked three difficult questions about IO layers:</p>

<blockquote>
<p>1: How is it proposed to avoid namespace clashes with layers?</p>

<p>2: Is there a suggested namespace (eg Layer:: ?) for modules implementing layers?</p>

<p>3: Is there a standard (memorable) way of passing arguments to layers?</p>
</blockquote>

<p>The other Nick said that he wanted the layer names ( <code>:gzip</code> and the like) to behave like (and possibly even converge with) attribute names, and so generalised the problem to &ldquo;how do we avoid namespace clashes with attributes?&rdquo;. As for question two, he suggested the <code>PerlIO::</code> or <code>perlio::</code> namespaces. The final question caused more consternation. Nicholas wanted to avoid problems where an argument to a layer could have meaning to the layer system in general. It wouldn&rsquo;t be good, for instance, to say</p>

<pre><code>    open (FOO, ':layer(name=&quot;(test1),:gzip&quot;)', $file)
</code></pre>

<p>He first proposed a system similar to URL encoding, using <code>%XX</code> to escape significant characters. Nick Ing-Simmons got a little worried at this point:</p>

<blockquote>
<p>I have a feeling that putting too much in the one string is a mistake. I think we may need something akin to <code>ioctl()</code> which can call &ldquo;method(s)&rdquo; on the &ldquo;layer object&rdquo; to allow a more extensible approach.</p>
</blockquote>

<p>Surprisingly, this is what Ilya was saying <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-04/msg00098.html">nearly a year ago</a>.</p>

<h3 id="span-id-memory-leak-plumbing-memory-leak-plumbing-span"><span id="Memory_Leak_Plumbing">Memory Leak Plumbing</span></h3>

<p>Alan has been working exceptionally hard of late on what he called the &ldquo;south end of the camel&rdquo;: memory leaks. He&rsquo;s been using a software tool called &ldquo;Purify&rdquo; that checks for leaks and illegal memory accesses.</p>

<p>Firstly, he discovered something awry in <code>Perl_pmtrans</code>, part of the regular expression engine. This led him to issue the following plea:</p>

<blockquote>
<p>The fact that there isn&rsquo;t even a comment explaining what it is supposed to do isn&rsquo;t helping - it is virtually impossible to figure out if it is working correctly if I have no idea of what is correct behaviour.</p>

<p>A heartfelt plea - *please* comment your code. Take pity on those of us following at the south end of the camel, carrying the shovel and bucket.</p>
</blockquote>

<p>Next, he produced evidence of a leak in another part of the RE engine, along with some code which is probably doing something exceptionally evil indeed: it saves a way a pointer, sets it to zero, saves it again and then re-allocates some memory for it. Obviously, when it&rsquo;s time for the saved-away values to be restored, Bad Things happen. Alan says that before he started work on <code>Perl_pmtrans</code> it was leaking 96% of available memory - a far cry from the usual call that &ldquo;the only thing that leaks memory is failed evals&rdquo;.</p>

<p>That was, however, the next area that Alan planned to take on but it&rsquo;s a very hard problem. Nick Ing-Simmons is going to take a look at it, and Nicholas Clark came up with his favourite memory leak, which Alan duly fixed.</p>

<p>He also found a rather major memory leak in the Perl destruction process; his fixes to the SV allocation process were coming up with strange errors about &ldquo;unbalanced reference counts&rdquo;. He thought this was initially a problem in his patch, but eventually it became clear that strings in environment variables or parser tokens weren&rsquo;t being properly freed, because they weren&rsquo;t been allocated from designated blocks of memory. (&ldquo;arenas&rdquo;) Worse, everything in stashes had problems with circular references: the variable would contain a reference to its parent stash, and vice versa. Just for fun, <code>%main::</code> refers to itself, because as it&rsquo;s set up, it declares itself to be its own parent. (That&rsquo;s why you can do <code>$main::main::main::c</code>)</p>

<p>Hopefully, Perl will be a lot less leaky in the very near future - and you have Alan to thank for that.</p>

<h3 id="span-id-shared-functions-shared-functions-span"><span id="Shared_functions">Shared functions</span></h3>

<p>Last week, I mentioned Doug MacEachern&rsquo;s experiments with shared subs. This week, he&rsquo;s produced a complete patch which allows you to say (in an XSUB):</p>

<pre><code>    void
    foo()

      ATTRS: shared
</code></pre>

<p>and the resulting sub will be shared between interpreters. <code>Apache::*</code> module authors, listen up. This one could be useful for you.</p>

<p>There was a little concern that there was no locking provided on the shared subroutine code, but Doug countered that the <code>GvSHARED</code> test combined with the <code>SvREADONLY</code> flag meant that if anyone messed around with the GV, they basically had to take responsibility for their actions&hellip;</p>

<h3 id="span-id-perl-6-is-alive-perl-6-is-alive-span"><span id="Perl_6_Is_Alive">Perl 6 Is Alive!</span></h3>

<p>Rumours of Perl 6&rsquo;s death have been greatly exaggerated, and devotees of this weekly summary will be overjoyed to learn that I (together with my merry band of volunteers) will be putting together summaries of the <a href="http://dev.perl.org/lists">Perl 6 mailing lists</a>.</p>

<p>Later on this week and from next week, the summaries will be appearing on the front page of <a href="/">http://www.perl.com/</a>; this week&rsquo;s issue is temporarily located at <a href="http://simon-cozens.org/perl6/THISWEEK-20010211.html">http://simon-cozens.org/perl6/THISWEEK-20010211.html</a></p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>Quite a few bug reports annd a few quick fixes, but nothing else of major note.</p>

<p>Until next week I remain, your humble and obedient servant,</p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_02_p5pdigest_THISWEEK-20010212.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

