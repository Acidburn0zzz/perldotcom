<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/03/19 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/03/p5pdigest/THISWEEK-20010319.html/" />
<meta property="og:title" content="This Week on p5p 2001/03/19" />
<meta property="og:description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-03-03T03:03:03Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/03/19</h1>
              <p class="blog-post-meta">Mar 19, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>You can subscribe to an email version of this summary by sending an empty message to <a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><code>perl5-porters-digest-subscribe@netthink.co.uk</code>.</a></p>

<p>Please send corrections and additions to <code>perl-thisweek-YYYYMM@simon-cozens.org</code> where <code>YYYYMM</code> is the current year and month. Changes and additions to the <a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters</a> biographies are particularly welcome.</p>

<p>There were just under 300 messages this week.</p>

<h3 id="span-id-561-trial3-is-out-there-5-6-1-trial3-is-out-there-span"><span id="561_TRIAL3_is_out_there">5.6.1-TRIAL3 is out there</span></h3>

<p>Just before going to press, <a href="http://simon-cozens.org/writings/whos-who.html#GURUSAMY">Sarathy</a> pushed trial 3 out of the door; get it from <a href="http://www.cpan.org/authors/id/G/GS/GSAR/perl-5.6.1-TRIAL3.tar.gz">$CPAN/authors/id/G/GS/GSAR/perl-5.6.1-TRIAL3.tar.gz</a>.</p>

<p>Please test it as widely as possible, run your favourite bugs through it, and so on. If you&rsquo;re not one of the smoke testers, now would be a good time to start; subscribe to <code>daily-build@perl.org</code> and get yourself a copy of <code>SmokingJacket</code> - that would be a great help for us.</p>

<h3 id="span-id-robin-houston-vs-goto-robin-houston-vs-goto-span"><span id="Robin_Houston_vs_goto">Robin Houston vs. goto</span></h3>

<p>Why anyone wants to maintain <code>goto</code> is quite beyond me, but Robin Houston&rsquo;s been doing it rather well this week. The first bug he fixed was to do with lexical variables losing their values when a <code>goto</code> happens in their scope:</p>

<pre><code>    for ($i=1; $i&lt;=1; $i++) {
        my $var='val';
        print &quot;before \$var='$var'\n&quot;;
        goto jump;
        jump:
        print  &quot;after \$var='$var'\n&quot;;
    }
</code></pre>

<p>Here&rsquo;s his analysis:</p>

<blockquote>
<p>Wow! This is a venerable bug, dating at least back to 5.00404.</p>

<p>When a for(;;) is compiled, there&rsquo;s no nextstate immediately before the enterloop, and so when pp_goto does this:</p>

<pre><code>            case CXt_LOOP:
                gotoprobe = cx-&gt;blk_oldcop-&gt;op_sibling;
                break;
</code></pre>

<p>gotoprobe ends up pointing into a dead end.</p>

<p>That means that the label doesn&rsquo;t get found until the next context up is searched; and so the loop context is left and re-entered when the goto is executed.</p>
</blockquote>

<p>Next, he fixed a bug which meant that</p>

<p>eval { goto foo; }; die &ldquo;OK\n&rdquo;; foreach $i(1,2,3) { foo: die &ldquo;Inconclusive\n&rdquo;; }</p>

<p>would not get caught by the <code>eval</code>. This was because <code>goto</code> failed to pop the stack frames as it left an <code>eval</code>.</p>

<p>For his hat-trick, he made <code>goto</code> work in nested <code>eval</code> structures.</p>

<h3 id="span-id-my-foo-if-0-my-foo-if-0-span"><span id="my_foo_if_0">my $foo if 0</span></h3>

<p>One of the (many) perl5-porters dirty secrets is that if you say</p>

<pre><code>    sub marine {
        my $scope = &quot;up&quot; if 0;
        return $scope++;
    }
    print marine(),&quot;\n&quot; for 0..10;
</code></pre>

<p>you get the lexical variable <code>$scope</code> increasing from 0 to 10, instead of being reinitialised every time. In effect, you get a static variable. Very nice.</p>

<p>Of course, this is completely undocumented and you&rsquo;d be foolish to rely on it, but it generates no warnings and passes <code>use strict</code> happily. It&rsquo;s come about completely by accident, since the optimiser optimises away the initialisation. David Madison claimed it was a bug, but most people seem to think of it as an unexploded feature. <a href="http://simon-cozens.org/writings/whos-who.html#HIETANIEMI">Jarkko</a> will be adding lexical warnings to mark it as deprecated. <a href="http://simon-cozens.org/writings/whos-who.html#VROMANS">Johan</a> also pointed out that <code>open</code> with more than 3 arguments doesn&rsquo;t currently pass the later arguments onto the program being called: his spectacular example was</p>

<pre><code>    open (FH, &quot;-|&quot;, &quot;deleteallfiles&quot;, &quot;-tempfilesonly&quot;)
</code></pre>

<p>which deletes all files, not just the temp files. <a href="http://simon-cozens.org/writings/whos-who.html#ING-SIMMONS">Nick</a> said it was on his list of things to do, and called for patches.</p>

<h3 id="span-id-more-pod-nits-more-pod-nits-span"><span id="More_POD_Nits">More POD Nits</span></h3>

<p>Michael Stevens produced some more POD patches this week, and the discussion about how strict <code>podchecker</code> can be continued from last week, spurred on by Jarkko sending Michael&rsquo;s patched to the maintainers of core modules. <a href="http://simon-cozens.org/writings/whos-who.html#ZACHAREVICH">Ilya</a>, Sarathy and others grumbled about <code>podchecker</code>&rsquo;s insistence on</p>

<pre><code>    =over 4
</code></pre>

<p>instead of just `plain&rsquo;</p>

<pre><code>    =over
</code></pre>

<p>Michael patched <code>podchecker</code> to remove that warning, although Jarkko was impressed that perl5-porters had managed to degenerate to squabbling over 2 bytes of documentation. A new low. Not content, Ilya managed to get it down to 1 byte, by grouching about</p>

<pre><code>    L&lt;foo
     bar&gt;
</code></pre>

<p>being an error where</p>

<pre><code>    L&lt;foo bar&gt;
</code></pre>

<p>was not. Michael patched <code>podchecker</code> to remove that warning too, which has the nice result that you can reformat paragraphs in your POD (with Alt-Q or gqap, depending on religion) without worrying about it breaking the semantics.</p>

<h3 id="span-id-more-on-the-reset-bug-more-on-the-reset-bug-span"><span id="More_on_the_reset_bug">More on the reset bug</span></h3>

<p>Jarkko reported that Sarathy&rsquo;s patch to fix the <a href="/pub/2001/03/p5pdigest/THISWEEK-20010305.html#Weird_Memory_Corruption">reset bug</a> of a couple of weeks ago still produced erratic results on various platforms. <a href="http://simon-cozens.org/writings/whos-who.html#BURLISON">Alan</a> found the heap corruption in Purify, and reported that &ldquo;this bug is unchanged since the last discussion of it on the list a couple of weeks back.&rdquo; (But noted that the anon sub leak is finally fixed!) Jarkko pointed out that this was because Sarathy&rsquo;s patch wasn&rsquo;t applied to the repository, and that the problem was that the linked list of pattern match operators was getting corrupted. That&rsquo;s to say, when you have a regular expression like <code>/.a\d/</code> it contains a list of nodes: any character, a literal <code>a</code>, any digit. For some reason, when the regular expression was being freed from memory, one of the nodes, let&rsquo;s say the literal <code>a</code>, was pointing not to an &ldquo;any digit&rdquo; node, but to West hyperspace.</p>

<p>Radu Greab zeroed in on the problem: the regular expression was being cleared twice. He provided the beginnings of a patch; Sarathy suggested it was on the right lines, but wanted to reference count regular expression nodes. His version of the patch caused all sorts of problems, and Radu came up with something else to change the regular expression node list into a doubly-linked list. That was still imperfect, and Sarathy wanted to know why his patch caused all sorts of problems. Jarkko unfortunately ran out of time to do some debugging on this.</p>

<p>So it&rsquo;s still out there, and a very, very weird bug it is too. Something is going very wrong with the freeing of PMOPs. We&rsquo;ve only seen it on Linux and Tru64 when the <code>-DDEBUGGING</code> and <code>-g</code> flags are on, so far. Stranger and stranger.</p>

<h3 id="span-id-distributive-arrow-operator-distributive-arrow-operator-span"><span id="Distributive_arrow_operator">Distributive arrow operator</span></h3>

<p>David Lloyd suggested that the arrow operator should be distributive, so that:</p>

<pre><code>    ($foo, $bar)-&gt;baz();
</code></pre>

<p>does</p>

<pre><code>    $foo-&gt;baz(); $bar-&gt;baz();
</code></pre>

<p>Not a bad idea, although various people pulled out the old &ldquo;would break old code&rdquo; mainstay.</p>

<p>He developed his idea, suggesting that</p>

<pre><code>    ([1,2], [3,4])-&gt;[0]
</code></pre>

<p>should return <code>1,3</code>, and also that</p>

<pre><code>    ($arrayref)-&gt;[0..15]
</code></pre>

<p>should return</p>

<pre><code>    map { $arrayref-&gt;[$_] } 0..15
</code></pre>

<p>I thought this was beautiful, and tossed it over to the perl6-language list, together with the natural extension of</p>

<pre><code>    @a = ($foo, $bar) . $baz     # @a = map { $_.$baz } ($foo, $baz)
</code></pre>

<p>which reminded MJD of APL.</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>I made a misattribution last week, saying that Philip Newton provided a documentation patch for <code>use integer</code>. Although Philip does some storming work, that wasn&rsquo;t one of his - it belonged to Robert Spier. Sorry, Robert. John Allen produced another one this week.</p>

<p>Ilya made <code>perldoc</code> work on OS/2. John Allen suggested that we should use the subroutine attribute syntax to extend builtins: <code>time :milli()</code> for hi-res time, for instance. Nothing happened.</p>

<p>Charles Lane (he of the weird email address) produced a fix to tidy up the test suite a little; tests should use <code>$^X</code> instead of <code>./perl</code> to keep VMS and other dinosaurs happy.</p>

<p>Kurt Starsinic has been patching up some of the standard utilities to be warnings and strict clean; so far we&rsquo;ve seen his patch to <code>h2ph</code>.</p>

<p>Merijn found loads and loads of bugs in the 5.6.1 trials on AIX and HP/UX, which Sarathy ran around cleaning up. Good work, both.</p>

<p>Brian Ingerson has, sadly, decided that his excellent <a href="https://metacpan.org/pod/Inline">Inline</a> module is not going to be mature enough for 5.8.0. Still, I heartily hope something like it ships with Perl 6. Have you played with <a href="https://metacpan.org/pod/Inline">Inline</a> yet? No? Go and play with <a href="https://metacpan.org/pod/Inline">Inline</a> immediately, and until next week I remain, your humble and obedient servant,</p>

<hr />

<p><a href="mailto:simon@brecon.co.uk">Simon Cozens</a>
-   <a href="#Notes">Notes</a>
-   <a href="#561_TRIAL3_is_out_there">5.6.1-TRIAL3 is out there</a>
-   <a href="#Robin_Houston_vs_goto">Robin Houston vs. goto</a>
-   <a href="#my_foo_if_0">my $foo if 0</a>
-   <a href="#More_POD_Nits">More POD Nits</a>
-   <a href="#More_on_the_reset_bug">More on the reset bug</a>
-   <a href="#Distributive_arrow_operator">Distributive arrow operator</a>
-   <a href="#Various">Various</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_03_p5pdigest_THISWEEK-20010319.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

