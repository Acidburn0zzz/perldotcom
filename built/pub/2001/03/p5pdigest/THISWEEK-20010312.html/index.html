<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/03/12 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/03/p5pdigest/THISWEEK-20010312.html/" />
<meta property="og:title" content="This Week on p5p 2001/03/12" />
<meta property="og:description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-03-03T03:03:03Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/03/12</h1>
              <p class="blog-post-meta">Mar 12, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>You can subscribe to an email version of this summary by sending an empty message to <a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><code>perl5-porters-digest-subscribe@netthink.co.uk</code>.</a></p>

<p>Please send corrections and additions to <code>perl-thisweek-YYYYMM@simon-cozens.org</code> where <code>YYYYMM</code> is the current year and month. Changes and additions to the <a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters biographies</a> are particularly welcome.</p>

<p>There were 424 messages this week.</p>

<h3 id="span-id-pod-questions-pod-questions-span"><span id="Pod_Questions">Pod Questions</span></h3>

<p>As reported last week, Michael Stevens has been working away on attempting to make the core Perl documentation <code>podchecker</code>-clean, and has succeeded in stopping it from emitting any errors. However, he came up with quite a few weirdnesses. The most contentious was the correct way to write:</p>

<pre><code>     L&lt;New C&lt;qr//&gt; operator&gt;
</code></pre>

<p>since <code>L&lt;&gt;</code> was seeing the slash and thinking it was a section/manpage separator. <a href="http://simon-cozens.org/writings/whos-who.html#ALLBERY">Russ Allbery</a> said that the best way was</p>

<pre><code>    L&lt;&quot;New C&lt;qr//&gt; operator&quot;&gt;
</code></pre>

<p>but the problem with that is that the resulting reference gets quoted. And, in fact, <code>podchecker</code> was still unhappy with that. Russ said:</p>

<blockquote>
<p>podchecker complains about all sorts of things that I consider to be perfectly valid POD, such as the use of &lt; and &gt; in free text to mean themselves when not preceeded by a capital letter. I think making podchecker smarter is the right solution.</p>
</blockquote>

<p>But as Michael said, &ldquo;the problem is finding a clear definition of what &ldquo;smarter&rdquo; actually is.&rdquo;</p>

<p>I also complained that</p>

<pre><code>    =head2 New C&lt;qr//&gt; operator
</code></pre>

<p>was getting mangled by some parsers which didn&rsquo;t correctly restore boldface after the code section. The example I gave, <code>pod2man</code>, seemed to be due to a buggy set of roff macros.</p>

<p>Rob Napier came up with some <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-03/msg00365.html">truly excellent</a> suggestions about the future of POD and how to make it more intuitive, and Russ tried to shoo people onto the <a href="http://lists.perl.org/showlist.cgi?name=pod-people">pod-people mailing list</a> for further discussion of what changes should be made.</p>

<h3 id="span-id-patching-perlyy-patching-perly-y-span"><span id="Patching_perlyy">Patching perly.y</span></h3>

<p>Jeff Pinyan asked how one should go about patching the Perl grammar in <code>perly.y</code>; the answer, coming in three parts from myself, Peter Prymmer and <a href="http://simon-cozens.org/writings/whos-who.html#SUGALSKI">Dan Sugalski</a>, is:</p>

<p>1) Don&rsquo;t. You hardly ever need to.</p>

<p>2) Run <code>make run_byacc</code> which runs the <code>byacc</code> parser generator, and then applies a small patch to the resulting C file which allows dynamic memory allocation.</p>

<p>3) Run <code>vms/vms_yfix.pl</code> to patch up the VMS version of the parser.</p>

<p>4) CC <code>perl-mvs@perl.org</code> so that the EBCDIC people can prepare EBCDIC-aware versions of the parser.</p>

<h3 id="span-id-cvoutside-cvoutside-span"><span id="CvOUTSIDE">CvOUTSIDE</span></h3>

<p><a href="http://simon-cozens.org/writings/whos-who.html#BURLISON">Alan</a> asked what <code>CvOUTSIDE</code> was for; it&rsquo;s another undocumented flag on a CV. <a href="http://simon-cozens.org/writings/whos-who.html#GURUSAMY">Sarathy</a> knows the answer, and it&rsquo;s scary:</p>

<blockquote>
<p>Every CV that references lexicals from its outer lexical scopes needs to be able to access that outer scope&rsquo;s scratchpad at run time (via <code>pp_anonsub()</code>, <code>cv_clone2()</code> and <code>pad_findlex()</code>) to capture the lexicals that are visible at the time the cloning happens. In fact, all CVs need to have this whether they have outer lexicals referenced in them or not, given that <code>eval&quot;&quot;</code> requires visibility of the outer lexical scopes.</p>
</blockquote>

<p>Hence, (I think) <code>CvOUTSIDE</code> is a pointer to the scratchpad of the outer lexical scope. Why is this important? Well, Alan&rsquo;s Great Subroutine Memory Leak (the problem with <code>sub x { sub {} }</code>) has come about because there&rsquo;s a reference count loop. As Sarathy explains:</p>

<blockquote>
<p>The problem really is that there is a reference loop. The prototype anonymous sub holds a reference count on the outer sub via <code>CvOUTSIDE()</code>. The outer sub holds a reference count on the anonymous sub prototype via the pad entry allocated by <code>OP_ANONCODE</code>. The pad entry will be properly freed by <code>op_clear()</code> if it ever gets there, which it doesn&rsquo;t because of the loop.</p>
</blockquote>

<p>Sarathy had a couple of attempts at fixing this, but hasn&rsquo;t managed to resolve it yet.</p>

<h3 id="span-id-perlxstut-documentation-perlxstut-documentation-span"><span id="perlxstut_Documentation">perlxstut Documentation</span></h3>

<p>Vinh Lam reminded us that <code>perlxstut</code> is incomplete. Examples 6, 7, 8, and 9 are still not written. Does anyone out there want to write them?</p>

<h3 id="span-id-ebcdic-and-unicode-ebcdic-and-unicode-span"><span id="EBCDIC_and_Unicode">EBCDIC and Unicode</span></h3>

<p>With the assistance of Merijn Broeren and Morgan Stanley Dean Witter, I gained access to an EBCDIC mainframe and spent a happy day sanitizing the Unicode support on EBCDIC machines. As usual, there was some small argument over semantics, but the major change was that EBCDIC should be converted to ASCII before being upgraded to UTF8, and converted back to EBCDIC on degradation. <a href="http://simon-cozens.org/writings/whos-who.html#PRYMMER">Peter Prymmer</a> seemed happy enough with what we&rsquo;d been doing, and the patch went in. The patch, and its discussion, can be found <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-03/msg00441.html">here</a>.</p>

<p>If you don&rsquo;t want to read the whole business, this is the important bit: much of the Unicode discussion this week centered on the vexed question of &ldquo;What are v-strings for?&rdquo;. <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-03/msg00549.html">Here</a> is the definitive answer from Larry.</p>

<h3 id="span-id-perl-dl-nonlazy-perl-dl-nonlazy-span"><span id="PERL_DL_NONLAZY">PERL_DL_NONLAZY</span></h3>

<p><a href="http://simon-cozens.org/writings/whos-who.html#SCHWERN">Michael Schwern</a> asked what the mysterious <code>PERL_DL_NONLAZY</code> environment variable was for - it&rsquo;s set on <code>make test</code> but never documented. He noted that as well as being used to alter the dynamic linking behaviour, it&rsquo;s used by some test suites to determine whether or not to produce additional information - almost certainly a misuse.</p>

<p>Paul Johnson explained that it passes a flag to <code>dlopen</code> which attempts to ensure that all functions are relocated as soon as the shared object is loaded. Sounds complicated? In the normal, &ldquo;lazy&rdquo; operation of the dynamic loader, the loader doesn&rsquo;t actually load all the functions from the library file into memory at one go - instead, it merely notices that it has a bunch more functions available; when a function is called, it loads up the appropriate part of the object into memory, and jumps to it. (Not entirely unlike the behaviour of <code>use autouse</code> or <code>AutoSplit</code>.)</p>

<p>Setting [PERL_DL_NONLAZY] forces the loader to load up all functions at once, so that it can ensure that it really does have code for all the functions it claims to have code for; this is usually what you want to do when testing.</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>Sarathy fixed the &ldquo;weird reset bug&rdquo; of last week with a clever but untested patch; Chris Nandor dropped a bunch of good MacPerl protability patches. Ilya finally produced his rival UTF8 regular expressions patch, which Jarkko has been vigorously testing.</p>

<p>David Madison raised the <code>my $var if $x</code> bugbear again. Schwern&rsquo;s been cleaning up <code>Test::Harness</code>; good work as always, there. Robin Houston fixed a strange bug regarding <code>my</code> variables being cleared after a <code>goto</code> during a three-fingered <code>for</code> loop. Radu Greab fixed something strange with <code>chop</code> and arrays.</p>

<p>There was a small but pointless discussion of C coding styles, which concluded that you ought to leave off braces around single-statement blocks to <code>if</code> and the like if you can.</p>

<p>Tony Finch complained that <code>use integer</code> doesn&rsquo;t make <code>rand</code> return integers; <a href="http://simon-cozens.org/writings/whos-who.html#NEWTON">Philip Newton</a> provided a patch.</p>

<p>Congratulations to Raphael Manfredi, who spawned his first child process this week.</p>

<p>Until next week I remain, your humble and obedient servant,</p>

<hr />

<p><a href="mailto:simon@brecon.co.uk">Simon Cozens</a>
-   <a href="#Notes">Notes</a>
-   <a href="#Pod_Questions">Pod Questions</a>
-   <a href="#Patching_perlyy">Patching perly.y</a>
-   <a href="#CvOUTSIDE">CvOUTSIDE</a>
-   <a href="#perlxstut_Documentation">perlxstut Documentation</a>
-   <a href="#EBCDIC_and_Unicode">EBCDIC and Unicode</a>
-   <a href="#PERL_DL_NONLAZY">PERL_DL_NONLAZY</a>
-   <a href="#Various">Various</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_03_p5pdigest_THISWEEK-20010312.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

