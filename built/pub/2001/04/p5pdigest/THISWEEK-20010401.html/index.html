<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2001/04/01 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/04/p5pdigest/THISWEEK-20010401.html/" />
<meta property="og:title" content="This Week on p5p 2001/04/01" />
<meta property="og:description" content=" Notes You can subscribe to an email version of this summary by sending an empty message to perl5-porters-digest-subscribe@netthink.co.uk. Please send corrections and additions to perl-thisweek-YYYYMM@simon-cozens.org where YYYYMM is the current year and month. Changes and additions to the perl5-porters...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-04-04T04:04:04Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2001/04/01</h1>
              <p class="blog-post-meta">Apr 1, 2001 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>You can subscribe to an email version of this summary by sending an empty message to <a href="mailto:perl5-porters-digest-subscribe@netthink.co.uk"><code>perl5-porters-digest-subscribe@netthink.co.uk</code>.</a></p>

<p>Please send corrections and additions to <code>perl-thisweek-YYYYMM@simon-cozens.org</code> where <code>YYYYMM</code> is the current year and month. Changes and additions to the <a href="http://simon-cozens.org/writings/whos-who.html">perl5-porters</a> biographies are particularly welcome.</p>

<p>There were 446 messages this week.</p>

<h3 id="span-id-perl-and-htmlparser-perl-and-html-parser-span"><span id="Perl_and_HTMLParser">Perl and HTML::Parser</span></h3>

<p><a href="http://simon-cozens.org/writings/whos-who.html#AAS">Gisle</a> complained that a recent snapshot of Perl broke <code>HTML::Parser</code>. Apparently, his code did something like</p>

<p>sv_catpvf(sv, &ldquo;%c&rdquo;, 128);</p>

<p>and Perl upgraded the SV to UTF8, which caused confusion when his C-level code then looked at the real value of the string. <a href="http://simon-cozens.org/writings/whos-who.html#HIETANIEMI">Jarkko</a> asked why Gisle&rsquo;s code cared about the representation of the string, but it seemed like Gisle expected it to be non-UTF8. (I could argue that this was Perl&rsquo;s fault, and I could argue that it was Gisle&rsquo;s.) <a href="http://simon-cozens.org/writings/whos-who.html#GURUSAMY">Sarathy</a> warned ominously: &ldquo;We need to tread very carefully here, or 5.8.0 might break a lot of XS code out there.&rdquo; <a href="http://simon-cozens.org/writings/whos-who.html#ING-SIMMONS">Nick I-S</a> pointed out the handy-looking <code>SvPVbyte</code> macro which returned a non-UTF8 version of the string&rsquo;s contents, plus another way of doing things which was actually backwards compatible.</p>

<h3 id="span-id-autoloading-errno-autoloading-errno-span"><span id="Autoloading_Errno">Autoloading Errno</span></h3>

<p>Last week, we covered the fact that using <code>%!</code> should autoload the <code>Errno</code> module but at the time, it failed to. Robin Houston fixed that, with another quotable analysis:</p>

<blockquote>
<p>I must admit that I&rsquo;m slightly dubious as to the wisdom of doing this. It&rsquo;s not needed for compatibility (it&rsquo;s never worked), and any code which uses <code>%!</code> could simply put &ldquo; <code>use Errno;</code>&rdquo; at the top.</p>

<p>The intention, presumably, is that code which doesn&rsquo;t make use of <code>%!</code> shouldn&rsquo;t have to incur the penalty of loading [Errno.pm].</p>

<p>Currently cleverness only takes place when a glob is created. So, if you use a hash called <code>%^E</code> then the magical scalar <code>$^E</code> is set up, even though you don&rsquo;t use it.</p>

<p>In this case though, we want <code>Errno.pm</code> to be loaded <strong>only</strong> if <code>%!</code> is used. Loading the damned thing for every script which uses <code>$!</code> would be Bad.</p>

<p>The upshot of this all is that an extra test has to be inserted into the code which deals with creating new stash <strong>variables</strong> (not just the first variable of the particular glob). Even a marginal slowdown like this doesn&rsquo;t seem worth the insignificant benefit of not having to load Errno yourself.</p>
</blockquote>

<p>However, Sarathy commented that the intention was simplicity and transparency; the <code>%!</code> language feature should be implemented in a manner transparent to the end user, just like the loading of the Unicode swash tables. &ldquo;Besides,&rdquo; he concluded, &ldquo;there is probably no precedent for forcing people to load a non-pragma to enable a language feature.&rdquo;</p>

<p>Jarkko looked slightly guilty. &ldquo;Ummm, well, in other news, I may have have just created one&rdquo;, he said, referring to the new ability to export <code>IO::Socket::atmark</code> to <code>sockatmark</code>.</p>

<p>Robin also added some more reporting to <code>B::Debug</code>, and fixed up a parenthesis bug in <code>B::Deparse</code>.</p>

<h3 id="span-id-mathbig-math-big-span"><span id="MathBig">Math::Big*</span></h3>

<p>Tels and John Peacock have been working together to rewrite <code>Math::BigInt</code> and <code>Math::BigFloat</code>. Their version is <a href="http://www.cpan.org/authors/id/T/TE/TELS/">on CPAN</a>. Jarkko seems understandably a little hestitant about replacing the in-core version with this one; while we&rsquo;re assured that it will be backwards compatible (minus bugfixes, naturally) but obviously a complete rewrite isn&rsquo;t mature enough to be considered for core yet.</p>

<h3 id="span-id-pack-and-unpack-pack-and-unpack-span"><span id="pack_and_unpack">pack and unpack</span></h3>

<p>Someone asked a (non-maintainance) question about <code>pack</code> and <code>unpack</code> which <a href="http://simon-cozens.org/writings/whos-who.html#DOMINUS">MJD</a> dealt with; I took this as a cue to show my current work on a <code>perlpacktut</code>. A few people produced useful suggestions for that, which I&rsquo;ll get finished when the next consignment of tuits arrives. There was a short diversion about what an <code>asciz</code> string was; (see the documentation for the &ldquo;w&rdquo; pack format) it&rsquo;s actually a C-style null-terminated string.</p>

<h3 id="span-id-taint-testing-taint-testing-span"><span id="Taint_testing">Taint testing</span></h3>

<p>For some reason, the usual way to detect taintedness in the test suite seems to be</p>

<pre><code>    eval { $possibly_tainted, kill 0; 1 }
Nick Clark thinks this sucks, but it's a bit too late to change it now.
</code></pre>

<p>Of course, MacPerl doesn&rsquo;t have <code>kill</code> so <a href="http://simon-cozens.org/writings/whos-who.html#NANDOR">Chris</a> found that his test suite was going horribly wrong. He had a number of violent suggestions to fix this up, including having <code>kill</code> be a no-op which died on tainted data. MJD suggested that <code>kill</code> should do what it does already but be a no-op if it&rsquo;s passed a 0. The eventual solution was to have it return 0 but check for tainted data. He also hinted that this may be the precursor to Win32-like pseudoprocesses.</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>Benjamin Sugars was at it again. He fixed a bug in <code>socket</code> which leaked file descriptors, wrote a test suite for <code>Cwd</code>, joined the bug admin team, patched up <code>B::Terse</code> and <code>File::*</code> to be warnings-happy, produced another version of his XS <code>Cwd</code> module. He didn&rsquo;t document <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2001-02/msg01780.html">references in <code>@INC</code></a>, though, so he doesn&rsquo;t get the gold star.</p>

<p>I zapped <code>OPpRUNTIME</code>, a flag that was set but never tested!</p>

<p>Stephen McCamant produced a couple of optimizations to <code>peep()</code>, the optimizer.</p>

<p>Thomas Wegner and Chris Nandor fixed up <code>File::Glob</code> for MacOS.</p>

<p>Jarkko floated the idea of a <code>FETCHSLICE</code> and <code>STORESLICE</code> for tied hashes and arrays to avoid multiple <code>FETCH</code>/ <code>STORE</code> operations; there was a little discussion about the syntax:</p>

<pre><code>    STORESLICE($thing, $nkeys, $nvalues, @keys, @values)
</code></pre>

<p>would be more efficient but less user-friendly than</p>

<pre><code>    STORESLICE($thing, \@keys, \@values)
</code></pre>

<p>but no implementation as yet.</p>

<p>Schwern asked if we were going to document the fact that <code>ref qr/Foo/</code> returns &ldquo;Regexp&rdquo;. Everyone went very quiet.</p>

<p>Mark-Jason Dominus tried to introduce a new operator, <code>epochtime</code>, which return the time of the system epoch; for instance, one could use</p>

<pre><code>    localtime(epochtime())
</code></pre>

<p>to portably find out the date of the system epoch, allowing you to write epoch-independent code. Jarkko rejected the patch on the grounds that it was not sufficiently portable.</p>

<p>Until next week, then, <strong>squawk</strong>,</p>

<hr />

<p><a href="mailto:simon@brecon.co.uk">Simon Cozens</a>
-   <a href="#Notes">Notes</a>
-   <a href="#Perl_and_HTMLParser">Perl and HTML::Parser</a>
-   <a href="#Autoloading_Errno">Autoloading Errno</a>
-   <a href="#MathBig">Math::Big*</a>
-   <a href="#pack_and_unpack">pack and unpack</a>
-   <a href="#Taint_testing">Taint testing</a>
-   <a href="#Various">Various</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_04_p5pdigest_THISWEEK-20010401.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

