<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Beginners Intro to Perl - Part 6 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Editor&#39;s note: this venerable series is undergoing updates. You might be interested in the newer versions, available at: A Beginner&#39;s Introduction to Perl 5.10 A Beginner&#39;s Introduction to Files and Strings with Perl 5.10 A Beginner&#39;s Introduction to Regular Expressions..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2001/01/begperl6.html/" />
<meta property="og:title" content="Beginners Intro to Perl - Part 6" />
<meta property="og:description" content="Editor&#39;s note: this venerable series is undergoing updates. You might be interested in the newer versions, available at: A Beginner&#39;s Introduction to Perl 5.10 A Beginner&#39;s Introduction to Files and Strings with Perl 5.10 A Beginner&#39;s Introduction to Regular Expressions...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2001-01-01T01:01:01Z" />
<meta property="og:image" content="http://localhost:1313/images/author/doug-sheppard.jpg" />
<meta property="og:article:tag" content="debugging" />
<meta property="og:article:tag" content="security" />
<meta property="og:article:tag" content="tainting" />
<meta property="og:article:tag" content="warnings" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Beginners Intro to Perl - Part 6</h1>
              <p class="blog-post-meta">Jan 9, 2001 by
              
              
                
                
                <a href="#author-bio-doug-sheppard">Doug Sheppard</a>
              
              </p>
              <img alt="" src=""/>
                

<p><em>Editor&rsquo;s note: this venerable series is undergoing updates. You might be interested in the newer versions, available at:</em></p>

<ul>
<li><a href="/pub/2008/04/23/a-beginners-introduction-to-perl-510.html">A Beginner&rsquo;s Introduction to Perl 5.10</a></li>
<li><a href="/pub/2008/05/07/beginners-introduction-to-perl-510-part-2.html">A Beginner&rsquo;s Introduction to Files and Strings with Perl 5.10</a></li>
<li><a href="http://news.oreilly.com/2008/06/a-beginners-introduction-to-pe.html">A Beginner&rsquo;s Introduction to Regular Expressions with Perl 5.10</a></li>
<li><a href="http://broadcast.oreilly.com/2008/09/a-beginners-introduction-to-pe.html">A Beginner&rsquo;s Introduction to Perl Web Programming</a></li>
</ul>

<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Table of Contents</td>
</tr>
<tr class="even">
<td><p>•<strong><a href="/pub/2000/10/begperl1.html">Part 1 of this series</a></strong><br />
•<strong><a href="/pub/2000/11/begperl2.html">Part 2 of this series</a></strong><br />
•<strong><a href="/pub/2000/11/begperl3.html">Part 3 of this series</a></strong><br />
•<strong><a href="/pub/2000/12/begperl4.html">Part 4 of this series</a></strong><br />
•<strong><a href="/pub/2000/12/begperl5.html">Part 5 of this series</a></strong><br />
<br />
•<a href="#doing%20it%20right%20the%20first%20time">Doing It Right the First Time</a><br />
•<a href="#comments">Comments</a><br />
•<a href="#warnings">Warnings</a><br />
•<a href="#taint">Taint</a><br />
•<a href="#stuff%20taint%20doesn&#39;t%20catch">Stuff Taint Doesn't Catch</a><br />
•<a href="#use%20strict"><code>use strict</code></a><br />
  •<a href="#strict%20vars">Strict vars</a><br />
  •<a href="#strict%20subs">Strict subs</a><br />
  •<a href="#want%20a%20sub,%20get%20a%20string">Want a Sub, Get a String</a><br />
  •<a href="#the%20one%20exception">The One Exception</a><br />
•<a href="#is%20this%20overkill">Is This Overkill?</a><br />
•<a href="#play%20around!">Play Around!</a><br />
</p></td>
</tr>
</tbody>
</table>

<h2 id="span-id-doing-it-right-the-first-time-doing-it-right-the-first-time-span"><span id="doing it right the first time">Doing It Right the First Time</span></h2>

<p>Perl is a useful tool, which many people use to write some good software. But like all programming languages, Perl can also be used to create <em>bad</em> software. Bad software contains bugs, has security holes and is hard to fix or extend.</p>

<p>Fortunately, Perl offers you many ways to increase the quality of the programs you write. In this last installment in the Beginner&rsquo;s Intro series, we&rsquo;ll take a look at a few of them.</p>

<h3 id="span-id-comments-comments-span"><span id="comments">Comments</span></h3>

<p>In the first part of this series, we looked at the lowly <code>#</code>, which indicates a comment. Comments are your first line of defense against bad software, because they help answer the two questions that people always have when they look at source code: What does this program do and how does it do it? Comments should <em>always</em> be part of any software you write. Complex code with no comments is not <em>automatically</em> evil, but bring some holy water just in case.</p>

<p>Good comments are short, but instructive. They tell you things that aren&rsquo;t clear from reading the code. For example, here&rsquo;s some obscure code that could use a comment or two:</p>

<pre><code>        for $i (@q) {
            my ($j) = fix($i);
            transmit($j);
        }
</code></pre>

<p>Bad comments would look like this:</p>

<pre><code>        for $i (@q) { # @q is list from last sub
            my ($j) = fix($i);  # Gotta fix $j...
            transmit($j);  # ...and then it goes over the wire
        }
</code></pre>

<p>Notice that you don&rsquo;t <em>learn</em> anything from these comments. <code>my  ($j) = fix($i); # Gotta fix $j...</code> is meaningless, the equivalent of a dictionary that contains a definition like <em>widget (n.): A widget</em>. <em>What</em> is <code>@q</code>? <em>Why</em> do you have to fix its values? That may be clear from the larger context of the program, but you don&rsquo;t want to skip all around a program to find out what one little line does!</p>

<p>Here&rsquo;s something a little clearer. Notice that we actually have <em>fewer</em> comments, but they&rsquo;re more instructive:</p>

<pre><code>       # Now that we've got prices from database, let's send them to the buyer
       for $i (@q) {
           my ($j) = fix($i);  # Add local taxes, perform currency exchange
           transmit($j);
       }
</code></pre>

<p>Now it&rsquo;s obvious where <code>@q</code> comes from, and what <code>fix()</code> does.</p>

<h3 id="span-id-warnings-warnings-span"><span id="warnings">Warnings</span></h3>

<p>Comments are good, but the most important tool for writing good Perl is the ``warnings&rdquo; flag, the <code>-w</code> command line switch. You can turn on warnings by placing <code>-w</code> on the first line of your programs like so:</p>

<pre><code>         #!/usr/local/bin/perl -w
</code></pre>

<p>Or, if you&rsquo;re running a program from the command line, you can use <code>-w</code> there, as in <code>perl -w myprogram.pl</code>.</p>

<p>Turning on warnings will make Perl yelp and complain at a <em>huge</em> variety of things that are almost always sources of bugs in your programs. Perl normally takes a relaxed attitude toward things that may be problems; it assumes that you know what you&rsquo;re doing, even when you don&rsquo;t.</p>

<p>Here&rsquo;s an example of a program that Perl will be perfectly happy to run without blinking, even though it has an error on almost every line! (See how many you can spot.)</p>

<pre><code>       #!/usr/local/bin/perl

       $filename = &quot;./logfile.txt&quot;;
       open (LOG, $fn);
       print LOG &quot;Test\n&quot;;
       close LOGFILE;
</code></pre>

<p>Now, add the <code>-w</code> switch to the first line, and run it again. You should see something like this:</p>

<p>Name ``main::filename&rdquo; used only once: possible typo at ./a6-warn.pl line 3. Name ``main::LOGFILE&rdquo; used only once: possible typo at ./a6-warn.pl line 6. Name ``main::fn&rdquo; used only once: possible typo at ./a6-warn.pl line 4. Use of uninitialized value at ./a6-warn.pl line 4. print on closed filehandle main::LOG at ./a6-warn.pl line 5.</p>

<p>Here&rsquo;s what each of these errors means:</p>

<ol>
<li><p><em>Name ``main::filename&rdquo; used only once: possible typo at ./a6-warn.pl line 3.</em> and <em>Name ``main::fn&rdquo; used only once: possible typo at ./a6-warn.pl line 4.</em> Perl notices that <code>$filename</code> and <code>$fn</code> both only get used once, and guesses that you&rsquo;ve misspelled or misnamed one or the other. This is because this almost always happens because of typos or bugs in your code, like using <code>$filenmae</code> instead of <code>$filename</code>, or using <code>$filename</code> throughout your program except for one place where you use <code>$fn</code> (like in this program).</p></li>

<li><p><em>Name ``main::LOGFILE&rdquo; used only once: possible typo at ./a6-warn.pl line 6.</em> In the same way that we made our <code>$filename</code> typo, we mixed up the names of our filehandles: We use <code>LOG</code> for the filehandle while we&rsquo;re writing the log entry, but we try to close <code>LOGFILE</code> instead.</p></li>

<li><p><em>Use of uninitialized value at ./a6-warn.pl line 4.</em> This is one of Perl&rsquo;s more cryptic complaints, but it&rsquo;s not difficult to fix. This means that you&rsquo;re trying to use a variable before you&rsquo;ve assigned a value to it, and that is almost always an error. When we first mentioned <code>$fn</code> in our program, it hadn&rsquo;t been given a value yet. You can avoid this type of warning by always setting a <em>default</em> value for a variable before you first use it.</p></li>

<li><p><em>print on closed filehandle main::LOG at ./a6-warn.pl line 5.</em> We didn&rsquo;t successfully open <code>LOG</code>, because <code>$fn</code> was empty. When Perl sees that we are trying to print something to the <code>LOG</code> filehandle, it would normally just ignore it and assume that we know what we&rsquo;re doing. But when <code>-w</code> is enabled, Perl warns us that it suspects there&rsquo;s something afoot.</p></li>
</ol>

<p>So, how do we fix these warnings? The first step, obviously, is to fix these problems in our script. (And while we&rsquo;re at it, I deliberately violated our rule of always checking if <code>open()</code> succeeded! Let&rsquo;s fix that, too.) This turns it into:</p>

<pre><code>        #!/usr/local/bin/perl -w

        $filename = &quot;./logfile.txt&quot;;
        open (LOG, $filename) or die &quot;Couldn't open $filename: $!&quot;;
        print LOG &quot;Test\n&quot;;
        close LOG;
</code></pre>

<p>Now, we run our corrected program, and get this back from it:</p>

<p><em>Filehandle main::LOG opened only for input at ./a6-warn2.pl line 5.</em></p>

<p>Where did <em>this</em> error come from? Look at our <code>open()</code>. Since we&rsquo;re not preceding the filename with &gt; or &gt;&gt;, Perl opens the file for <em>reading</em>, but in the next line we&rsquo;re trying to <em>write</em> to it with a <code>print</code>. Perl will normally let this pass, but when warnings are in place, it alerts you to possible problems. Change line 4 to this instead and everything will be great:</p>

<pre><code>       open (LOG, &quot;&gt;&gt;$filename&quot;) or die &quot;Couldn't open $filename: $!&quot;;
</code></pre>

<p>The <code>&lt;-w&gt;</code> flag is your friend. Keep it on at all times. You may also want to read the <code>&lt;perldiag&gt;</code> man page, which contains a listing of all the various messages (including warnings) Perl will spit out when it encounters a problem. Each message is accompanied by a detailed description of what the message means and how to fix it.</p>

<h3 id="span-id-taint-taint-span"><span id="taint">Taint</span></h3>

<p>Using <code>-w</code> will help make your Perl programs correct, but it won&rsquo;t help make them <em>secure</em>. It&rsquo;s possible to write a program that doesn&rsquo;t emit a single warning, but is totally insecure!</p>

<p>For example, let&rsquo;s say that you are writing a CGI program that needs to write a user&rsquo;s comment to a user-specified file. You might use something like this:</p>

<pre><code>       #!/usr/local/bin/perl -w

       use CGI ':standard';

       $file = param('file');
       $comment = param('comment');

       unless ($file) { $file = 'file.txt'; }
       unless ($comment) { $comment = 'No comment'; }

       open (OUTPUT, &quot;&gt;&gt;/etc/webstuff/storage/&quot; . $file) or die &quot;$!&quot;;
       print OUTPUT $comment . &quot;\n&quot;;
       close OUTPUT;

       print header, start_html;
       print &quot;&lt;P&gt;Thanks!&lt;/P&gt;\n&quot;;       
       print end_html;
</code></pre>

<p>If you read the CGI programming installment, alarm bells are already ringing loud enough to deafen you. This program trusts the user to specify only a ``correct&rdquo; filename, and you know better than to trust the user. But nothing in this program will cause <code>-w</code> to bat an eye; as far as warnings are concerned, this program is completely correct.</p>

<p>Fortunately, there&rsquo;s a way to block these types of bugs before they become a problem. Perl offers a mechanism called <em>taint</em> that marks any variable that the user can possibly control as being insecure. This includes user input, file input and environment variables. Anything that you set within your own program is considered safe:</p>

<pre><code>     $taint = &lt;STDIN&gt;;   # This came from user input, so it's tainted
     $taint2 = $ARGV[1]; # The @ARGV array is considered tainted too.
     $notaint = &quot;Hi&quot;;    # But this is in your program... it's untainted
</code></pre>

<p>You enable taint checking with the <code>-T</code> flag, which you can combine with <code>-w</code> like so:</p>

<pre><code>      #!/usr/local/bin/perl -Tw
</code></pre>

<p><code>-T</code> will prevent Perl from running most code that may be insecure. If you try to do various dangerous things with tainted variables, like open a file for writing or use the <code>system()</code> or <code>exec()</code> functions to run external commands, Perl will stop right away and complain.</p>

<p>You <em>untaint</em> a variable by running it through a regex with matching subexpressions, and using the results from the subexpressions. Perl will consider <code>$1</code>, <code>$2</code> and so forth to be safe for your program.</p>

<p>For example, our file-writing CGI program may expect that ``sane&rdquo; filenames contain only the alphanumeric characters that are matched by the <code>\w</code> metacharacter (this would prevent a malicious user from passing a filename like <code>~/.bashrc</code>, or even <code>../test</code>). We&rsquo;d use a filter like so:</p>

<pre><code>       $file = param('file');
       if ($file) {
           $file =~ /^(\w+)$/;
           $file = $1;
       }

       unless ($file) { $file = &quot;file.txt&quot;; }
</code></pre>

<p>Now, <code>$file</code> is guaranteed to be untainted. If the user passed us a filename, we don&rsquo;t use it until we&rsquo;ve made sure it matches only <code>\w+</code>. If there was no filename, then we specify a default in our program. As for <code>$comment</code>, we never actually do anything that would cause Perl&rsquo;s taint checking to worry, so it doesn&rsquo;t need to be checked to pass <code>-T</code>.</p>

<h3 id="span-id-stuff-taint-doesn-t-catch-stuff-taint-doesn-t-catch-span"><span id="stuff taint doesn't catch">Stuff Taint Doesn&rsquo;t Catch</span></h3>

<p>Be careful! Even when you&rsquo;ve turned on taint checking, you can still write an insecure program. Remember that taint only gets looked at when you try to <em>modify</em> the system, by opening a file or running a program. Reading from a file will not trigger taintedness! A <em>very</em> common breed of security hole exploits code that doesn&rsquo;t look very different from this small program:</p>

<pre><code>        #!/usr/local/bin/perl -Tw

        use CGI ':standard';

        $file = param('filename');
        unless ($file) { $file = 'file.txt'; }

        open (FILE, &quot;&lt;/etc/webstuff/storage/&quot; . $file) or die &quot;$!&quot;;

        print header();
        while ($line = &lt;FILE&gt;) {
            print $line;
        }

        close FILE;
</code></pre>

<p>Just imagine the joy when the ``filename&rdquo; parameter contains <code>../../../../../../etc/passwd</code>. (If you don&rsquo;t see the problem: On a Unix system, the <code>/etc/passwd</code> file contains a list of all the usernames on the system, and may also contain an encrypted list of their passwords. This is great information for crackers who want to get into a machine for further mischief.) Since you are only reading the file, Perl&rsquo;s taint checking doesn&rsquo;t kick in. Similarly, <code>print</code> doesn&rsquo;t trigger taint checking, so you&rsquo;ll have to write your own value-checking code when you write any user input to a file!</p>

<p>Taint is a good <em>first</em> step in security, but it&rsquo;s not the last.</p>

<h3 id="span-id-use-strict-use-strict-span"><span id="use strict"><code>use strict</code></span></h3>

<p>Warnings and taint are two excellent tools for preventing your programs from doing bad things. If you want to go <em>further</em>, Perl offers <code>use  strict</code>. These two simple words can be put at the beginning of any program:</p>

<pre><code>        #!/usr/local/bin/perl -wT

        use strict;
</code></pre>

<p>A command like <code>use strict</code> is called a <em>pragma</em>. Pragmas are instructions to the Perl interpreter to do something special when it runs your program. <code>use strict</code> does two things that make it harder to write bad software: It makes you declare all your variables (``strict vars&rdquo;), and it makes it harder for Perl to mistake your intentions when you are using subs (``strict subs&rdquo;).</p>

<p>If you only want to use one or two types of strictness in your program, you can list them in the <code>use strict</code> pragma, or you can use a special <code>no strict</code> pragma to turn off any or all of the strictness you enabled earlier.</p>

<pre><code>        use strict 'vars';   # We want to require variables to be declared
        no strict 'vars';    # We'll go back to normal variable rules now

        use strict 'subs';   # We want Perl to distrust barewords (see below).

        no strict;           # Turn it off. Turn it all off. Go away, strict.
</code></pre>

<p>(There&rsquo;s actually a third type of strictness - strict refs - which prevents you from using symbolic references. Since we haven&rsquo;t really dealt with references, we&rsquo;ll concentrate on the other two types of strictness.)</p>

<h3 id="span-id-strict-vars-strict-vars-span"><span id="strict vars">Strict vars</span></h3>

<p>Perl is generally trusting about variables. It will alllow you to create them out of thin air, and that&rsquo;s what we&rsquo;ve been doing in our programs so far. One way to make your programs more correct is to use <em>strict vars</em>, which means that you must always <em>declare</em> variables before you use them. You declare variables by using the <code>my</code> keyword, either when you assign values to them or before you first mention them:</p>

<pre><code>        my ($i, $j, @locations);
        my $filename = &quot;./logfile.txt&quot;;
        $i = 5;
</code></pre>

<p>This use of <code>my</code> doesn&rsquo;t interfere with using it elsewhere, like in subs, and remember that a <code>my</code> variable in a sub will be used instead of the one from the rest of your program:</p>

<pre><code>        my ($i, $j, @locations);
        # ... stuff skipped ...
        sub fix {
            my ($q, $i) = @_;  # This doesn't interfere with the program $i!
        }
</code></pre>

<p>If you end up using a variable <em>without</em> declaring it, you&rsquo;ll see an error before your program runs:</p>

<pre><code>        use strict;
        $i = 5;
        print &quot;The value is $i.\n&quot;;
</code></pre>

<p>When you try to run this program, you see an error message similar to <em>Global symbol ``$i&rdquo; requires explicit package name at a6-my.pl line 3.</em> You fix this by declaring <code>$i</code> in your program:</p>

<pre><code>        use strict;
        my $i = 5;   # Or &quot;my ($i); $i = 5;&quot;, if you prefer...
        print &quot;The value is $i.\n&quot;;
</code></pre>

<p>Keep in mind that <em>some</em> of what strict vars does will overlap with the <code>-w</code> flag, but not all of it. Using the two together makes it much more difficult, but not impossible, to use an incorrect variable name. For example, strict vars <em>won&rsquo;t</em> catch it if you accidentally use the <em>wrong</em> variable:</p>

<pre><code>         my ($i, $ii) = (1, 2);
         print 'The value of $ii is ', $i, &quot;\n&quot;;
</code></pre>

<p>This code has a bug, but neither strict vars nor the <code>-w</code> flag will catch it.</p>

<h3 id="span-id-strict-subs-strict-subs-span"><span id="strict subs">Strict subs</span></h3>

<p>During the course of this series, I&rsquo;ve deliberately avoided mentioning all sorts of tricks that allow you to write more <em>compact</em> Perl. This is because of a simple rule: <em>readability always wins</em>. Not only can compactness make it difficult to read code, it can sometimes have weird side effects! The way Perl looks up subs in your program is an example. Take a look at this pair of three-line programs:</p>

<pre><code>       $a = test_value;
       print &quot;First program: &quot;, $a, &quot;\n&quot;;
       sub test_value { return &quot;test passed&quot;; }

       sub test_value { return &quot;test passed&quot;; }
       $a = test_value;
       print &quot;Second program: &quot;, $a, &quot;\n&quot;;
</code></pre>

<p>The same program with one little, insignificant line moved, right? In both cases we have a <code>test_value()</code> sub and we want to put its result into <code>$a</code>. And yet, when we run the two programs, we get two different results:</p>

<pre><code>       First program's result: test_value
       Second program's result: test passed
</code></pre>

<p>The reason <em>why</em> we get two different results is a little convoluted.</p>

<p>In the first program, at the point we get to <code>$a = test_value;</code>, Perl doesn&rsquo;t know of any <code>test_value()</code> sub, because it hasn&rsquo;t gotten that far yet. This means that <code>test_value</code> is interpreted as if it were the string &lsquo;test_value&rsquo;.</p>

<p>In the second program, the definition of <code>test_value()</code> comes <em>before</em> the <code>$a = test_value;</code> line. Since Perl has a <code>test_value()</code> sub to call, that&rsquo;s what it thinks <code>test_value</code> means.</p>

<p>The technical term for isolated words like <code>test_value</code> that might be subs and might be strings depending on context, by the way, is <em>bareword</em>. Perl&rsquo;s handling of barewords can be confusing, and it can cause two different types of bug.</p>

<h3 id="span-id-want-a-sub-get-a-string-want-a-sub-get-a-string-span"><span id="want a sub, get a string">Want a Sub, Get a String</span></h3>

<p>The first type of bug is what we encountered in our first program, which I&rsquo;ll repeat here:</p>

<pre><code>        $a = test_value;
        print &quot;First program: &quot;, $a, &quot;\n&quot;;
        sub test_value { return &quot;test passed&quot;; }
</code></pre>

<p>Remember that Perl won&rsquo;t look forward to find <code>test_value()</code>, so since it hasn&rsquo;t <em>already</em> seen <code>test_value()</code>, it assumes that you want a string. Strict subs will cause this program to die with an error:</p>

<pre><code>        use strict;

        my $a = test_value;
        print &quot;Third program: &quot;, $a, &quot;\n&quot;;
        sub test_value { &quot;test passed&quot;; }
</code></pre>

<p>(Notice the <code>my</code> put in to make sure that strict vars won&rsquo;t complain about <code>$a</code>.)</p>

<p>Now you get an error message like <em>Bareword ``test_value&rdquo; not allowed while ``strict subs&rdquo; in use at ./a6-strictsubs.pl line 3.</em> This is easy to fix, and there are two ways to do it:</p>

<ol>
<li><p>Use parentheses to make it clear you&rsquo;re calling a sub. If Perl sees <code>$a = test_value();</code>, it will assume that even if it hasn&rsquo;t seen <code>test_value()</code> defined yet, it will sometime between now and the end of the program. (If there isn&rsquo;t any <code>test_value()</code> in your program, Perl will die while it&rsquo;s running.) This is the easiest thing to do, and often the most readable.</p></li>

<li><p>Declare your sub before you first use it, like this:</p>

<pre><code>    use strict;

    sub test_value;  # Declares that there's a test_value() coming later ...
    my $a = test_value;  # ...so Perl will know this line is okay.
    print &quot;Fourth program: &quot;, $a, &quot;\n&quot;;
    sub test_value { return &quot;test_passed&quot;; }
</code></pre></li>
</ol>

<p>Declaring your subs has the advantage of allowing you to maintain the <code>$a =  test_value;</code> syntax if that&rsquo;s what you find more readable, but it&rsquo;s also a little obscure. Other programmers may not see why you have <code>sub  test_value;</code> in your code.</p>

<p>Of course, you could always move the definition of your sub <em>before</em> the line where you want to call it. This isn&rsquo;t quite as good as either of the other two methods, because now you are moving code around instead of making your existing code clearer. Also, it can cause <em>other</em> problems, which we&rsquo;ll discuss now &hellip;</p>

<h3 id="span-id-want-a-string-get-a-sub-want-a-string-get-a-sub-span"><span id="want a string, get a sub">Want a String, Get a Sub</span></h3>

<p>We&rsquo;ve seen how <code>use strict</code> can help prevent an error where you intend to call a sub, but instead get a string value. It also helps prevent the opposite error: wanting a string value, but calling a sub instead. This is a more dangerous class of bug, because it can be <em>very</em> hard to trace, and it often pops up in the most unexpected places. Take a look at this excerpt from a long program:</p>

<pre><code>        #!/usr/local/bin/perl -Tw

        use strict;

        use SomeModule;
        use SomeOtherModule;
        use YetAnotherModule;

        # ... (and then there's hundreds of lines of code) ...

        # Now we get to line 400 of the program, which tests if we got an &quot;OK&quot;
        # before we act on a request from the user.
        if ($response_code eq OK) {
            act_on($request);
        } else {
            throw_away($request);
        }
</code></pre>

<p>This program works without a hitch for a long time, because Perl sees the bareword <code>OK</code> and considers it to be a literal string. Then, two years later someone needs to add code to make this program understand HTTP status codes. They stick this in at line 2, or line 180, or line 399 (it doesn&rsquo;t matter <em>exactly</em> where, just that it comes before line 400):</p>

<pre><code>        sub OK { return 200; } # HTTP &quot;request ok, response follows&quot; code
        sub NOT_FOUND { return 404; } # &quot;URL not found&quot; code
        sub SERVER_ERROR { return 500; } # &quot;Server can't handle request&quot;
</code></pre>

<p>Take a moment to guess what happens to our program now. Try to work the word ``disaster&rdquo; into it.</p>

<p>Thanks to this tiny change, our program now throws away every request that comes in to it. The <code>if ($response eq OK)</code> test now calls the <code>OK()</code> sub, which returns a value of 200. The <code>if</code> now fails every time! The programmer, if they still have a job after this fiasco, must hunt through the entire program to find out exactly when the behavior of <code>if ($response eq OK)</code> changed, and why.</p>

<p>By the way, if the programmer is <em>really</em> unlucky, that new <code>OK()</code> sub wouldn&rsquo;t even be in <em>their</em> code at all, but defined somewhere in a new version of <code>SomeOtherModule.pm</code> that just got installed!</p>

<p>Barewords are dangerous because of this unpredictable behavior. <code>use  strict</code> (or <code>use strict 'subs'</code>) makes them predictable, because barewords that might cause strange behavior in the future will make your program die before they can wreak havoc.</p>

<h3 id="span-id-the-one-exception-the-one-exception-span"><span id="the one exception">The One Exception</span></h3>

<p>There&rsquo;s <em>one</em> place where it&rsquo;s OK to use barewords even when you&rsquo;ve turned on strict subs: when you are assigning hash keys.</p>

<pre><code>        $hash{sample} = 6;   # Same as $hash{'sample'} = 6
        %other_hash = ( pie =&gt; 'apple' );
</code></pre>

<p>Barewords in hash keys are always interpreted as strings, so there is no ambiguity.</p>

<h3 id="span-id-is-this-overkill-is-this-overkill-span"><span id="is this overkill">Is This Overkill?</span></h3>

<p>There are times when using all of the quality enforcement functionality (or ``correctness police,&rdquo; if you like to anthropmorphize) Perl offers seems like overkill. If you&rsquo;re just putting together a quick, three-line tool that you&rsquo;ll use once and then never touch again, you probably don&rsquo;t care about whether it&rsquo;ll run properly under <code>use strict</code>. When you&rsquo;re the only person who will run a program, you generally don&rsquo;t care if the <code>-T</code> flag will show that you&rsquo;re trying to do something unsafe with a piece of user input.</p>

<p>Still, it&rsquo;s a good idea to use every tool at your disposal to write good software. Here are three reasons to be concerned about correctness when you write just about <em>anything</em>:</p>

<ol>
<li><p><em>One-off programs aren&rsquo;t.</em> There are few programs worth writing that only get run once. Software tools tend to accumulate, and get used. You&rsquo;ll find that the more you use a program, the more you want it to do.</p></li>

<li><p><em>Other people will read your code.</em> Whenever programmers write something really good, they tend to keep it around, and give it to friends who have the same problem. More importantly, most projects aren&rsquo;t one-person jobs; there are teams of programmers who need to work together, reading, fixing and extennding one another&rsquo;s code. Unless your plans for the future include always working alone and having no friends, you should expect that other people will someday read and modify your code.</p></li>

<li><p>*<strong>You</strong> will read your code.* Don&rsquo;t think you have a special advantage in understanding your code just because you wrote it! Often you&rsquo;ll need to go back to software you wrote months or even years earlier to fix it or extend it. During that time you&rsquo;ll have forgotten all those clever little tricks you came up with during that caffeine-fueled all-nighter and all the little gotchas that you noticed but thought you would fix later.</p></li>
</ol>

<p>These three points all have one thing in common: Your programs <em>will</em> be rewritten and enhanced by people who will appreciate every effort you make to make their job easier. When you make sure your code is readable and correct, it tends to start out much more secure and bug-free, and it tends to stay that way, too!</p>

<h3 id="span-id-play-around-play-around-span"><span id="play around!">Play Around!</span></h3>

<p>During the course of this series, we&rsquo;ve only scratched the surface of what Perl can do. Don&rsquo;t take these articles as being definitive - they&rsquo;re just an introduction! Read the <code>perlfunc</code> page to learn about all of Perl&rsquo;s built-in functions and see what ideas they inspire. My biography page tells you how to get in touch with me if you have any questions.</p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/development">development</a></div>
                
                  <div class="tag"><a href="/tags/debugging">debugging</a></div>
                
                  <div class="tag"><a href="/tags/security">security</a></div>
                
                  <div class="tag"><a href="/tags/tainting">tainting</a></div>
                
                  <div class="tag"><a href="/tags/warnings">warnings</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-doug-sheppard">
  <div class="col-sm-2">
    
    <a href="/authors/doug-sheppard/"><div class="circle-avatar" style="background-image:url(/images/author/doug-sheppard.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/doug-sheppard/"><h3>Doug Sheppard</h3></a>
    <p></p>
    <h5><a href="/authors/doug-sheppard/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2001_01_begperl6.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

