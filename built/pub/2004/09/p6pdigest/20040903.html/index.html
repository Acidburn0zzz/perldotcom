<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on Perl 6, Week Ending 2004-09-03 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Another week, a free weekend, and still I haven&#39;t started writing the summary until Monday. Still, I don&#39;t actually start at college &#39;til next week, so that&#39;s all right then. We start with perl6-internals. Compile op with return values..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2004/09/p6pdigest/20040903.html/" />
<meta property="og:title" content="This Week on Perl 6, Week Ending 2004-09-03" />
<meta property="og:description" content=" Another week, a free weekend, and still I haven&#39;t started writing the summary until Monday. Still, I don&#39;t actually start at college &#39;til next week, so that&#39;s all right then. We start with perl6-internals. Compile op with return values...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2004-09-09T09:09:09Z" />
<meta property="og:image" content="http://localhost:1313/images/author/piers-cawley.jpg" />
<meta property="og:article:tag" content="internals" />
<meta property="og:article:tag" content="parrot" />
<meta property="og:article:tag" content="perl-6" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on Perl 6, Week Ending 2004-09-03</h1>
              <p class="blog-post-meta">Sep 9, 2004 by
              
              
                
                
                <a href="#author-bio-piers-cawley">Piers Cawley</a>
              
              </p>
              <img alt="" src=""/>
                

<p>Another week, a free weekend, and still I haven&rsquo;t started writing the summary until Monday. Still, I don&rsquo;t actually start at college &lsquo;til next week, so that&rsquo;s all right then.</p>

<p>We start with perl6-internals.</p>

<h4 id="compile-op-with-return-values">Compile op with return values</h4>

<p>The discussion of how to return something from dynamically compiled code continued with Leo, Dan and Steve Fink all working to clarify and address the issues.</p>

<p><a href="http://groups.google.com/groups?threadm=20040828065049.GC12318@kevin.fink.com">Compile op with return values</a></p>

<h4 id="library-loading">Library loading</h4>

<p>Dan started the process of nailing down Parrot&rsquo;s dynamic loading API so that it can be added to the embedding interface. Steve Fink and Aaron Sherman had suggestions.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110410bd568c66e647@%5B10.0.1.2%5D">Library loading</a></p>

<h4 id="pathological-register-allocation-scenarios">Pathological register allocation scenarios</h4>

<p>Gregor N Purdy had asked Dan if his work compiler could be made to spit out structurally equivalent C code to the Parrot code that was breaking IMCC. His idea being that we could then see how C compilers dealt with such nastiness. Dan thought that, whilst this was a good idea, it would be too much work to implement. Gregor wasn&rsquo;t so sure.</p>

<p><a href="http://groups.google.com/groups?threadm=a0611041abd58ca5c3463@%5B10.0.1.2%5D">Pathological Register Allocation Scenarios</a></p>

<h4 id="dan-and-leo-demonstrate-comic-timing-again">Dan and Leo demonstrate comic timing. Again.</h4>

<pre><code>14:17:09 GMT Dan: PerlHash test 20 is failing? Anyone know what's up
so we can fix it?
15:30:41 GMT Leo: It stopped failing at 15:55 CEST (13:55 GMT)
16:32:29 GMT Dan: D'oh!
</code></pre>

<p>We love it when a patch comes together.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110422bd58e6de10f8@%5B10.0.1.2%5D">Failing perlhash test</a></p>

<h4 id="pmc-instantiation">PMC Instantiation</h4>

<p>Leo had raised issues with the current scheme for PMC instantiation. This week Dan came through with some design which got discussed and (I think) implemented.</p>

<p><a href="http://groups.google.com/groups?threadm=a06110427bd590a576148@%5B10.0.1.2%5D">PMC Instantiation</a></p>

<h4 id="last-bits-of-the-basic-math-semantics">Last bits of the basic math semantics</h4>

<p>If you believe Barbie, &ldquo;Math is hard&rdquo;. She&rsquo;s right, up to a point. The list&rsquo;s spent a couple of weeks now sorting out the design of Parrots underlying mathematical and numeric systems to make sure that maths works right (for sufficiently useful values of &ldquo;right&rdquo;). This particular line of discussion covers rotations and stuff, where you&rsquo;re actually treating a number as a bit field.</p>

<p><a href="http://groups.google.com/groups?threadm=200408310958.i7V9wN909589@thu8.leo.home">Last bits of the basic math semantics</a></p>

<h4 id="cross-compiling-parrot">Cross-compiling parrot</h4>

<p>And you thought compiling Parrot on a Win32 box was hard. Robert Schwebel wants to cross compile Parrot and isn&rsquo;t having a good time. Dan wasn&rsquo;t surprised because the Parrot build process still gets most of its information from the local perl installation which will generally be wrong when you&rsquo;re cross compiling.</p>

<p>Dan noted that part of the problem is that we don&rsquo;t have people on the team with a need or the experience of doing cross compilation and added that he&rsquo;d be thrilled if this were to change. Any patches to make things better for cross compilers will, of course, be gratefully received.</p>

<p><a href="http://groups.google.com/groups?threadm=20040901173244.GE1369@pengutronix.de">Cross-compiling Parrot?</a></p>

<h4 id="proposal-for-a-new-pmc-layout-and-more">Proposal for a new PMC layout and more</h4>

<p>Leo&rsquo;s concerned that the current PMC layout isn&rsquo;t the Right Thing, and laid out a proposal describing some changes he thinks would be worthwhile. In essence, he argues for removing the requirement for fixed sized PMC headers and separate variable sized buffers in favour of unifying buffers and PMCs so that PMCs become variable sized, thus eliminating some time consuming indirection, and space consuming overheads.</p>

<p>Nicholas Clark thought the proposal was interesting, but said that, since the proposed changes would be invisible to the user, he&rsquo;d be far happier with a functionally complete implementation of parrot with stable, useful APIs.</p>

<p>Dan rejected the proposal (both for technical reasons and because he agreed with Nicholas). I don&rsquo;t think Leo was convinced by the technical reasons, but the &ldquo;Let&rsquo;s get the interfaces finished!&rdquo; argument clinched it.</p>

<p><a href="http://groups.google.com/groups?threadm=4135E823.7070902@toetsch.at">Leo&rsquo;s layout proposal</a></p>

<p><a href="http://groups.google.com/groups?threadm=a0611040bbd5bb29d2c15@%5B172.24.18.155%5D">Dan explains why not</a></p>

<h4 id="semantics-for-regexes">Semantics for regexes</h4>

<p>Dan appears to have opened an entertaining can of worms when he outlined his view of the minimum string semantics required to support a regular expression engine and asked for comments. Boy did he get them. And boy did they run off in all sorts of strange directions. Interesting directions mind. Anyway, further down the thread, Dan, Chip Salzenburg and Patrick Michaud seemed to reach something approximating agreement about the low level semantics required.</p>

<p><a href="http://groups.google.com/groups?threadm=a0611040ebd5bbe03d7e1@%5B172.24.18.155%5D">Semantics for regexes</a></p>

<h4 id="todos-and-calls-for-volunteers">TODOs and calls for volunteers</h4>

<p>Leo came up with a list of things that need fixing/implementing and asked for volunteers. These include sorting out what happens with the experimental ops, implementing <code>new_extended</code> for every PMC class and finishing up BigInt&rsquo;s MMD and vtable functions.</p>

<p>He also had some proposals for how we should get the Integer classes properly implemented now we know what the semantics will be.</p>

<p><a href="http://groups.google.com/groups?threadm=4137507F.5010606@toetsch.at">TODOish fix ops</a></p>

<p><a href="http://groups.google.com/groups?threadm=41385717.90803@toetsch.at">Takers wanted: new_extended</a></p>

<p><a href="http://groups.google.com/groups?threadm=41385937.7020708@toetsch.at">Takers wanted - BigInt/BigNum</a></p>

<p><a href="http://groups.google.com/groups?threadm=200409031221.i83CLUv13413@thu8.leo.home">Integer PMCs</a></p>

<h3 id="meanwhile-in-perl6-language">Meanwhile, in perl6-language</h3>

<h4 id="roles-trying-to-be-nice">Roles trying to be nice</h4>

<p>Abhijit Mahabal had some questions about making roles work. Luke, Patrick, and Jonathan Scott Duff set about answering them. I&rsquo;m not entirely sure that any of the answers so far are enough for Abhijit, but then I&rsquo;m not entirely sure that any answer could be enough. At some point you have to take things on trust and hope that nothing breaks at runtime.</p>

<p><a href="http://groups.google.com/groups?threadm=Pine.GSO.4.58.0408292126230.10203@prickly.cs.indiana.edu">Roles trying to be nice</a></p>

<h4 id="pipeline-performance">Pipeline performance</h4>

<p>Rod Adams brought up some issues with the performance of &ldquo;pipelining&rdquo; arrays in Perl 5 — in general doing say <code>grep {...} map {...} @ary</code> is rather slower than writing an explicit loop. He wondered if Perl 6 would be faster. Larry&rsquo;s answer that all lists function lazily if they can in Perl 6 seems to imply that yes, Perl 6 will be faster.</p>

<p><a href="http://groups.google.com/groups?threadm=41338F4C.2090300@rodadams.net">Pipeline performance</a></p>

<h4 id="synopsis-9-draft-1">Synopsis 9 draft 1</h4>

<p>&ldquo;Synopsis 9?&rdquo; I hear you ask &ldquo;But we haven&rsquo;t seen Apocalypse 9 yet!&rdquo;. Indeed we haven&rsquo;t, but that&rsquo;s not stopped Larry writing it. Synopsis 9 gives an overview of Perl 6&rsquo;s data structures (hopefully enough for anyone who happens to be starting work on a rough cut of a Perl 6 implementation) which will be covered in more detail when the Apocalypse itself comes out.</p>

<p>The usual storm of discussion and general proofreading goodness went on.</p>

<p><a href="http://groups.google.com/groups?threadm=20040902234740.GA29156@wall.org">Synopsis 9 draft 1</a></p>

<h4 id="the-range-operator">The range operator</h4>

<p>Joe Gottman wondered if there would be sufficiently lazy way to generate ranges. In particular, he wanted to know if he&rsquo;d be able to write <code>reverse (1..5)</code> and have Perl handle that lazily, or if he could do <code>5 .. 1 :by(-1)</code>. Larry thought that, if range objects were made sufficiently smart, there would be no reason why the <code>reverse</code> approach couldn&rsquo;t be lazy.</p>

<p><a href="http://groups.google.com/groups?threadm=200409030034.i830YESH008947@ms-smtp-04-eri0.southeast.rr.com">Reverse .. operator</a></p>

<h4 id="can-pre-and-post-be-removed-from-program-flow">Can PRE and POST be removed from program flow?</h4>

<p>John Siracusa wondered if it would be possible to turn off the PRE and POST Design By Contract hooks in production code to improve performance. (Leaving aside arguments about whether this is sensible; personally I reckon that a production environment is where you should be most worried about values that might fail the PRE/POST hooks). Larry reckoned it would be possible to simply clobber the global definitions of PRE and POST to make them no ops. This wasn&rsquo;t enough for John, who wanted to be able to get rid of them entirely so even the call to the no op didn&rsquo;t happen. So Damian showed him the obvious macros&hellip;</p>

<p><a href="http://groups.google.com/groups?threadm=BD5E4DEC.1CB3A%siracusa@mindspring.com">S4: Can PRE and POST be removed from program flow?</a></p>

<h3 id="announcements-apologies-acknowledgements">Announcements, Apologies, Acknowledgements</h3>

<p>It looks like the Google groups gateway is working again, so I&rsquo;ll keep with the Google style linking.</p>

<p>If you find these summaries useful or enjoyable, please consider contributing to the Perl Foundation to help support the development of Perl. You might also like to send feedback or contributions to a <a href="mailto:pdcawley@bofh.org.uk">getting Piers to OSCON 2005</a> fund.</p>

<p><a href="http://donate.perl-foundation.org/">The Perl Foundation</a></p>

<p><a href="http://dev.perl.org/perl6/">Perl 6 Development site</a></p>

<p>Or, you can check out <a href="http://www.bofh.org.uk/">my website</a>.</p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/perl-6">perl-6</a></div>
                
                  <div class="tag"><a href="/tags/internals">internals</a></div>
                
                  <div class="tag"><a href="/tags/parrot">parrot</a></div>
                
                  <div class="tag"><a href="/tags/perl-6">perl-6</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-piers-cawley">
  <div class="col-sm-2">
    
    <a href="/authors/piers-cawley/"><div class="circle-avatar" style="background-image:url(/images/author/piers-cawley.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/piers-cawley/"><h3>Piers Cawley</h3></a>
    <p></p>
    <h5><a href="/authors/piers-cawley/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2004_09_p6pdigest_20040903.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

