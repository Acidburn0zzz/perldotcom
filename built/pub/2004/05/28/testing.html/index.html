<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Return of Quiz of the Week </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Recently, Perl trainer and former perl.com editor Mark-Jason Dominus revived his Quiz of the Week mailing list; every week, subscribers are sent a Perl task of either &#34;regular&#34; or &#34;expert&#34; level. There are no prizes, but the submitted solutions are..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2004/05/28/testing.html/" />
<meta property="og:title" content="Return of Quiz of the Week" />
<meta property="og:description" content="Recently, Perl trainer and former perl.com editor Mark-Jason Dominus revived his Quiz of the Week mailing list; every week, subscribers are sent a Perl task of either &#34;regular&#34; or &#34;expert&#34; level. There are no prizes, but the submitted solutions are...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2004-05-05T05:05:05Z" />
<meta property="og:image" content="http://localhost:1313/images/_pub_2004_05_28_testing/111-quiz.gif" />
<meta property="og:article:tag" content="qotw" />
<meta property="og:article:tag" content="quiz" />
<meta property="og:article:tag" content="recipes" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Return of Quiz of the Week</h1>
              <p class="blog-post-meta">May 28, 2004 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<p>Recently, Perl trainer and former <em>perl.com</em> editor Mark-Jason Dominus revived his <a href="http://perl.plover.com/qotw/">Quiz of the Week</a> mailing list; every week, subscribers are sent a Perl task of either &ldquo;regular&rdquo; or &ldquo;expert&rdquo; level. There are no prizes, but the submitted solutions are collated, discussed, and analyzed. In a way, the prize is the knowledge you gain from looking at various different techniques and approaches to the same problem. Each week, we&rsquo;re going to bring you the analysis from the previous week and the question for you to think about the current week; if you want to join in and submit some solutions, see the Quiz of the Week page above.</p>

<h3 id="this-week-s-quiz">This Week&rsquo;s Quiz</h3>

<p>The regular quiz this week was submitted by Marco Baringer:</p>

<blockquote>
<p>When I was in elementary school I wasted many an hour playing Hangman with my friends.</p>

<p>The goal of the game is to guess a word with a certain (limited) number of wrong guesses. If we fail the &ldquo;man&rdquo; gets &ldquo;hanged&rdquo;; if we succeed he is set free. (We&rsquo;re not going to discuss the lesson&rsquo;s of life or the justice this game teaches to the 8 year olds who play it regularly).</p>

<p>The game starts out with one person (not the player) choosing a &ldquo;mystery&rdquo; word at random and telling the player how many letters the mystery word contains. The player then guesses letters, one at a time, and the mystery word&rsquo;s letters are filled in until a) the entire word is filled in, or b) the maximum number of wrong guesses are reached and the the player loses (man is hanged).</p>

<p>Write a Perl program that lets the user play Hangman. The program should take the following arguments:</p>

<ul>
<li>The dictionary file to use</li>
<li>The maximum number of wrong guesses to give the player</li>
</ul>

<p>The program must then chose a mystery word from the dictionary file and print out as many underscores (&rdquo;_&rdquo;) as there are letters in the mystery word. The program will then read letters from the user one at a time. After each guess the program must print the word with properly guessed letters filled in. If the word has been guessed (all the letters making up the word have been guessed) then the program must print &ldquo;LIFE!&rdquo; and exit. If the word is not guessed before the maximum number of guesses is reached then the program must print &ldquo;DEATH!&rdquo; and exit.</p>

<p>Some additional requirements:</p>

<ol>
<li>The dictionary file will contain one word per line and use only 7-bit ASCII characters. It may contain randomly generated words. The dictionary will contain only words longer than 1 character. The size of the dictionary may be very large.</li>
<li>The dictionary file used for the test (or the program for generating it) will be made available along with the write-up.</li>
<li>If a letter appears more than once in the mystery word, all occurrences of that letter must be filled in. So, if the word is &lsquo;bokonon&rsquo; and the player guesses &lsquo;o&rsquo; the output must be &lsquo;<code>_o_o_o_</code>&rsquo;.</li>
</ol>
</blockquote>

<p>The concensus on the discussion list seems to be that minor alterations and improvements to the user interface are OK, and that the expert quiz will be to write a program that efficiently implements the other side of the interface: to play the game of Hangman against the server.</p>

<p>And now, onto the discussion of last week&rsquo;s quiz&hellip;</p>

<h3 id="last-week-s-regular-quiz">Last Week&rsquo;s Regular Quiz</h3>

<p>Geoffrey Rommel sent the following question:</p>

<blockquote>
<p>The usual way to look for a character string in files in Unix is to use grep. For instance, let&rsquo;s say you want to search for the word &lsquo;summary&rsquo; without regard to case in all files in a certain directory. You might say:</p>

<pre><code>grep -i summary *
</code></pre>

<p>But if there is a very large number of files in your directory, you will get something like this:</p>

<pre><code>ksh: /usr/bin/grep: arg list too long
</code></pre>

<p>Now, you could just issue multiple commands, like this:</p>

<pre><code>grep -i summary [A-B]*
grep -i summary [C-E]*
etc.
</code></pre>

<p>&hellip; but that&rsquo;s so tedious.</p>

<p>Write a Perl program that allows you to search all files in such a directory with one command.</p>
</blockquote>

<p>And Geoffrey&rsquo;s solution:</p>

<p>This quiz was suggested to me by a directory on one of my servers where all of our executable scripts are stored. This directory now has over 4,200 scripts and has gotten too big to search.</p>

<p>The solution shown here works for my purposes, but I do not wish to depreciate the ingenious solutions found on the discussion list. I will try to evaluate and discuss them in a separate message.</p>

<p>As MJD mentioned, Perl regex matching is clearly superior to the alternatives. Since the original purpose was to search a directory of scripts, the search is not case-sensitive; that option could be added easily enough. We search only files (-f) in the specified directory, not in lower directories. I also test for &ldquo;text&rdquo; files (-T) because my Telnet client gets hopelessly confused if you start displaying non-ASCII characters.</p>

<pre><code>#!/usr/bin/perl
# The bin directory is too large to search all at once, so this does
# it in pieces.
($PAT, $DIR) = @ARGV[0,1];
$DIR ||= &quot;&quot;;
die &quot;Syntax:  q16 pattern directory\n&quot; unless $PAT;

open(LS, &quot;ls -1 $DIR |&quot;) or die &quot;Could not ls: $!&quot;;

@list = ();
while (&lt;LS&gt;) {
   chomp;
   push @list , (($DIR eq &quot;&quot;) ? $_ : &quot;$DIR/$_&quot;);
   if (@list &gt;= 800) {
      greptext($PAT, @list);
      @list = ();
   }
}
greptext($PAT, @list);

close LS;
exit;

sub greptext {
 my ($pattern, @files) = @_;

 foreach $fname (@files) {
    next unless -f $fname &amp;&amp; -T _;
    open FI, $fname;
    while (&lt;FI&gt;) {
       chomp;
       print &quot;$fname [$.]: $_\n&quot; if m/$pattern/oi;
    }
    close FI;
 }
}
</code></pre>

<p>For what it&rsquo;s worth, here is my take on the solutions offered for the week&rsquo;s quiz. This quiz was a humbling reminder that we should specify our requirements exactly. Although I deliberately left some of the design open, I apparently did not make the requirements clear. Three of the submissions failed on the very task they were intended to solve&ndash;namely, running through all files in a large directory of files. Instead of specifying a directory name, you had to specify a list of file names on the command line, which of course resulted in the dreaded &ldquo;arg list too long&rdquo; message. As someone pointed out, this is really a shell limitation, but there it is. (For the record, I am running MP-RAS, an svr4 variant, with the Korn shell.)</p>

<pre><code>           1   2   3   4   5   F    CPU                                         
brent      1   1   1   1   1   1  65.01                                         
dunham     1   1   1   0   2   2   2.92                                         
fish       1   1   1   0   2   2   3.32                                         
mjd        0   0   0   0   2   2     --                                         
rommel     1   1   1   1   2   0   2.66                                         
scott      1   0   1   1   2   2     --                                         
sims       0   0   0   0   2   2     --                                         
wett       0   0   0   0   2   0     --  

1. Did it work when there was a named pipe in the directory?                    
2. Did it work as desired on the large directory?                               
3. Did it work when only a directory name was specified?                        
4. Did it work (as ls does) when no directory name was specified?               
5. Aesthetics of output (error messages, line numbers, etc.)                    
F. Flexibility of program                                                       
CPU: to search large directory; in seconds as reported by timex                 
</code></pre>

<p>Tests 1-2 were requirements. Tests 3-4 were nice to have. Peter Scott&rsquo;s program worked nicely on a small directory but produced unexpected output on the large directory: it seemed to be executing some scripts rather than searching them, so I deemed it to have failed. Brent Royal-Gordon&rsquo;s script got a lower score for aesthetics because it produced a number of lines saying &ldquo;UX:grep: ERROR: Cannot open &ndash;&ldquo;.</p>

<p>I was particularly impressed with the flexibility of many of the scripts; my own submission, although the fastest, was also the least flexible. I am quite in agreement with James Wetterau&rsquo;s defense of minimalism. A program like this would not even be necessary if the shell allowed us to pass 4,200 arguments. Since it doesn&rsquo;t, however, we must do some of the work ourselves.</p>

<h3 id="last-week-s-expert-quiz">Last Week&rsquo;s Expert Quiz</h3>

<p>This was sent by Shlomi Fish:</p>

<blockquote>
<p>You will write a Perl program that schedules the semester of courses at Haifa University. <code>@courses</code> is an array of course names, such as &ldquo;Advanced Basket Weaving&rdquo;. <code>@slots</code> is an array of time slots at which times can be scheduled, such as &ldquo;Monday mornings&rdquo; or &ldquo;Tuesdays and Thursdays from 1:00 to 2:30&rdquo;. (Time slots are guaranteed not to overlap.)</p>

<p>You are also given a schedule that says when each course meets. <code>$schedule[$n][$m]</code> is true if course <code>$n</code> meets during time slot <code>$m</code>, and false if not.</p>

<p>Your job is to write a function, &lsquo;<code>allocate_minimal_rooms</code>&rsquo;, to allocate classrooms to courses. Each course must occupy the same room during every one of its time slots. Two courses cannot occupy the same room at the same time. Your function should produce a schedule that allocates as few rooms as possible.</p>

<p>The &lsquo;<code>allocate_minimal_rooms</code>&rsquo; function will get three arguments:</p>

<ol>
<li>The number of courses</li>
<li>The number of different time slots</li>
<li>A reference to the <code>@schedule</code> array</li>
</ol>

<p>It should return a reference to an array, say <code>$room</code>, which indicates the schedule. <code>$room-&gt;[$n]</code> will be the number of the room in which course <code>$n</code> will meet during all of its time slots. If courses <code>$n</code> and <code>$m</code> meet at the same time, then <code>$room-&gt;[$n]</code> must be different from <code>$room-&gt;[$m]</code>, because the two courses cannot use the same room at the same time.</p>
</blockquote>

<p>Well, this quiz generated several solutions from several people.</p>

<p>MJD sent a <a href="http://article.gmane.org/gmane.comp.lang.perl.qotw.discuss/1661">test suite</a>, and I sent a <a href="http://article.gmane.org/gmane.comp.lang.perl.qotw.discuss/1662">test suite of my own</a>.</p>

<p>Roger Burton West sent an <a href="http://perl.plover.com/~alias/list.cgi?1:mss:1599">exhaustive search solution</a>; Ronald J. Kimball also sent an exhaustive search one, <a href="http://perl.plover.com/~alias/list.cgi?1:mmn:1600">this time</a> using string operations to represent the schedule array.</p>

<p>Christian Duhl identified that the problem was NP-Complete, transformed it to a graph coloring problem, and solved it using <a href="http://article.gmane.org/gmane.comp.lang.perl.qotw.discuss/1666">this</a>. I sent my own solution. <a href="http://perl.plover.com/~alias/list.cgi?1:mmn:1603">This one</a> uses intermediate truth tables between courses and rooms.</p>

<p>Finally, Mark Jason Dominus posted <a href="http://perl.plover.com/~alias/list.cgi?1:mmn:1604">his solution</a>, which also used recursion as well as string operations.</p>

<p>My solution is smarter than the brute-force method, but still recursive and may explode for certain schedules.</p>

<p>It works by assigning a room to a course, and then finding a course that requires a different room. It then assigns another room to this course. The algorithm maintains a truth table of which courses can be allocated to specific rooms. Once a room was allocated to a class, all of the classes that share time-slots with this class are marked as being unable to use the room. If all the rooms that were allocated so far are unusable by a certain class, then it is allocated a new room.</p>

<p>If the algorithm reaches a place where a room can be allocated to any of several classes, it recurses with each possibility.</p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
                  <div class="tag"><a href="/tags/qotw">qotw</a></div>
                
                  <div class="tag"><a href="/tags/quiz">quiz</a></div>
                
                  <div class="tag"><a href="/tags/recipes">recipes</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2004_05_28_testing.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

