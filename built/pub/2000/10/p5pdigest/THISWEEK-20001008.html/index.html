<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2000/10/08 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes Self-tying is broken Virtual values Why is unshift slow? More Perl hacking guidelines Integer and floating-point handling printf %v format bug fixed Jarkko impersonates me Various Notes First, the meta-news this week is that you have a new..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2000/10/p5pdigest/THISWEEK-20001008.html/" />
<meta property="og:title" content="This Week on p5p 2000/10/08" />
<meta property="og:description" content=" Notes Self-tying is broken Virtual values Why is unshift slow? More Perl hacking guidelines Integer and floating-point handling printf %v format bug fixed Jarkko impersonates me Various Notes First, the meta-news this week is that you have a new...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2000-10-10T10:10:10Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2000/10/08</h1>
              <p class="blog-post-meta">Oct 8, 2000 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<ul>
<li><a href="#Notes">Notes</a></li>
<li><a href="#Self_tying_is_broken">Self-tying is broken</a></li>
<li><a href="#Virtual_Values">Virtual values</a></li>
<li><a href="#Why_is_unshift_slow">Why is unshift slow?</a></li>
<li><a href="#More_Perl_hacking_guidelines">More Perl hacking guidelines</a></li>
<li><a href="#Integer_and_floating_point_handling">Integer and floating-point handling</a></li>
<li><a href="#bugfix"><code>printf %v</code> format bug fixed</a></li>
<li><a href="#Jarkko_impersonates_me">Jarkko impersonates me</a></li>
<li><a href="#Various">Various</a></li>
</ul>

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>First, the meta-news this week is that you have a new author. I&rsquo;ve taken over producing the perl5-porters summary from Mark-Jason Dominus, so from now on, please send your corrections and additions to simon@brecon.co.uk.</p>

<p>This week was relatively quiet, with just a couple of hundred mails.</p>

<h3 id="span-id-self-tying-is-broken-self-tying-is-broken-span"><span id="Self_tying_is_broken">Self-tying is broken</span></h3>

<p>Alan Burlison noted that you can&rsquo;t create a self-tie anymore without Perl going into nasty recursion. What&rsquo;s a self-tie? As you may guess, <code>tie</code>ing a variable to itself goes like this:</p>

<pre><code>    package MyTie;
    sub TIEARRAY { bless $_[1], $_[0] }

    package main;
    my (@self);
    tie(@self, &quot;MyTie&quot;, \@self);
</code></pre>

<p>The problem comes with how tying is implemented. Perl uses a structure called &ldquo;magic&rdquo; attached to each tied variable to contain subs like <code>FETCH</code>. When you fetch a variable&rsquo;s value, Perl checks to see whether there&rsquo;s a <code>FETCH</code> sub stored in the variable&rsquo;s magic. If there is, Perl calls it to determine the variable&rsquo;s value. If this sub tries to look at the variable itself, Perl then calls the <code>FETCH</code> sub stored in the variable&rsquo;s magic to try and get its value, which, in turn, tries to look at the variable, and things end up in a mess. Alan then <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00003.html">investigated</a>and tentatively blamed Sarathy, but this turns out to have been a bad call; the problem&rsquo;s much deeper than that and nobody could think of a way of fixing it without breaking nested ties or threading. Part of the problem appears to be that nobody really knows what self-ties are supposed to do anyway. No patch was forthcoming, and the discussion fizzled out.</p>

<p>Elsewhere, Daniel Chetlin fixed some bugs with tied filehandles. He makes some other interesting points about what happened while he was working on it. <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00059.html">Read about it.</a></p>

<h3 id="span-id-virtual-values-virtual-values-span"><span id="Virtual_Values">Virtual values</span></h3>

<p>Jarkko came up with a new idea for copy-on-write sharing of scalars, but said that it may have to wait until Perl 6 before anyone implements it. Ilya popped up and characteristically said that he&rsquo;d already done it.</p>

<h3 id="span-id-why-is-unshift-slow-why-is-unshift-slow-span"><span id="Why_is_unshift_slow">Why is unshift slow?</span></h3>

<p>Ben Tilly started a discussion on <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00097.html">why unshift is so slow,</a>which didn&rsquo;t get much attention but contains a lot of juicy goodies for people thinking about how to make array handling faster. No patches or benchmarks came out of the discussion, but there&rsquo;s an opportunity for someone to try some of the ideas there and see whether there&rsquo;s any improvement.</p>

<h3 id="span-id-more-perl-hacking-guidelines-more-perl-hacking-guidelines-span"><span id="More_Perl_hacking_guidelines">More Perl hacking guidelines</span></h3>

<p>Mark Fisher contributed a helpful patch for <code>perlhack</code> on <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00099.html">using Purify to debug Perl</a>, prompting people to promise to explain how to use their favourite code checkers. None of the other patches has materialized, and the discussion moved on to the fine print of <code>PERL_DESTRUCT_LEVEL</code>.</p>

<h3 id="span-id-integer-and-floating-point-handling-integer-and-floating-point-handling-span"><span id="Integer_and_floating_point_handling">Integer and floating-point handling.</span></h3>

<p>Currently, putting together two variables which contain integers is actually a floating-point operation, meaning that variables have to get upgraded to hold floating-point values when they don&rsquo;t necessarily need to. It was hard to see a good way around this, but Sarathy came up with <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00175.html">a suggestion</a>. Someone with a few hours to spare should consider applying Sarathy&rsquo;s idea and coming back with some benchmarks.</p>

<p>In other floating-point news, Nick Clark found some <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00231.html">64-bit bugs</a> to do with the conversion between UVs and NVs. There was some discussion, but no patch.</p>

<h3 id="span-id-bugfix-printf-v-format-bug-fixed-span"><span id="bugfix"><code>printf %v</code> format bug fixed</span></h3>

<p>[This section of the report was written by Dominus.]</p>

<p>In an <a href="/pub/2000/07/p5pdigest/THISWEEK-20000702.html#More_Bug_Bounty">earlier report</a>, I mentioned a bug in the <code>%v</code> format specifier for <code>printf</code> and suggested that this was a good candidate for fixing by someone who was just starting out fixing Perl bugs. Avi F. stepped up to the challenge and provided a patch, which was accepted. Unfortunately, Avi did this right after I stopped doing p5p summaries, so never received proper credit. Thank you very much, Avi!</p>

<p><a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-07/msg00418.html">Read about it.</a></p>

<p>[We now return you to Simon Cozens.]</p>

<h3 id="span-id-jarkko-impersonates-me-jarkko-impersonates-me-span"><span id="Jarkko_impersonates_me">Jarkko impersonates me</span></h3>

<p>I noticed <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00122.html">a bug in split</a> which caused Unicode values to be denatured; Jarkko&rsquo;s worsening influenza produced a delirium that caused him to not only babble to himself but also <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-10/msg00210.html">to impersonate me.</a></p>

<p>But at least he fixed the bug. If I hack Unicode too long, will this happen to me too? Find out next week!</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>The usual collection of bug reports, test results, bug fixes, test results, esoterica and more test results. The clown who was sending duplicate copies of CCs to people has been ejected from the premises.</p>

<p>Until next week, I remain your humble and obedient servant,</p>

<hr />

<p><a href="mailto:simon@brecon.co.uk">Simon Cozens</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2000_10_p5pdigest_THISWEEK-20001008.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

