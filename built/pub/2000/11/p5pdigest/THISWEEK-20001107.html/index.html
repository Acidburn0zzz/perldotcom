<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> This Week on p5p 2000/11/07 </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content=" Notes Error number parsing VMS hackery The (f)crypt of mystery Yet more self-ties Rsync vs. FTP&#39;ing the patches Changes to README.aix The Regex Stack Problem Things nobody&#39;s fixed Craig Berry Various Notes You can subscribe to an email version..."/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/pub/2000/11/p5pdigest/THISWEEK-20001107.html/" />
<meta property="og:title" content="This Week on p5p 2000/11/07" />
<meta property="og:description" content=" Notes Error number parsing VMS hackery The (f)crypt of mystery Yet more self-ties Rsync vs. FTP&#39;ing the patches Changes to README.aix The Regex Stack Problem Things nobody&#39;s fixed Craig Berry Various Notes You can subscribe to an email version...">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2000-11-11T11:11:11Z" />
<meta property="og:image" content="http://localhost:1313/images/author/simon-cozens.jpg" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">This Week on p5p 2000/11/07</h1>
              <p class="blog-post-meta">Nov 7, 2000 by
              
              
                
                
                <a href="#author-bio-simon-cozens">Simon Cozens</a>
              
              </p>
              <img alt="" src=""/>
                

<ul>
<li><a href="#Notes">Notes</a></li>
<li><a href="#Error_number_parsing">Error number parsing</a></li>
<li><a href="#VMS_hackery">VMS hackery</a></li>
<li><a href="#The_fcrypt_of_mystery">The (f)crypt of mystery</a></li>
<li><a href="#Yet_more_self_ties">Yet more self-ties</a></li>
<li><a href="#Rsync_vs_FTPing_the_patches">Rsync vs. FTP&rsquo;ing the patches</a></li>
<li><a href="#Changes_to_READMEaix">Changes to README.aix</a></li>
<li><a href="#The_Regex_Stack_Problem">The Regex Stack Problem</a></li>
<li><a href="#Things_nobodys_fixed">Things nobody&rsquo;s fixed</a></li>
<li><a href="#Craig_Berry">Craig Berry</a></li>
<li><a href="#Various">Various</a></li>
</ul>

<h3 id="span-id-notes-notes-span"><span id="Notes">Notes</span></h3>

<p>You can subscribe to an email version of this summary by sending an empty message to <a href="mailto:p5p-digest-subscribe@plover.com"><code>p5p-digest-subscribe@plover.com</code>.</a></p>

<p>Please send corrections and additions to <code>simon@brecon.co.uk</code></p>

<p>Apologies for the slightly late appearance of this report; I aim to get them out every Monday, but I&rsquo;m hoping you were all so distracted by the US election that you didn&rsquo;t notice yet. This week was pretty heavy, reaching either 300 or 550 messages depending on whether you count unique mails or duplicates. However, there wasn&rsquo;t much in the way of <strong>hugely</strong> interesting content.</p>

<h3 id="span-id-error-number-parsing-error-number-parsing-span"><span id="Error_number_parsing">Error number parsing</span></h3>

<p>An innocent-looking patch to <code>t/lib/io_multihomed.t</code> managed to turn up some problems with <code>Errno.pm</code>. (Good work Casey Tweten for finally tracking that down, after what looked like a rather agonizing debugging session&hellip;)</p>

<p>If you didn&rsquo;t know, the <code>Errno</code> module is automatically generated by reading the system&rsquo;s <code>errno.h</code> file when Perl is being built. However, it looks like some people&rsquo;s systems and libc implementations use macros that are too difficult for Perl to parse automatically, and this meant that some error constants (you know, like <code>EINPROGRESS</code> and <code>ETOOSTUPID</code> and so on.) were not getting picked up. (Tom Hughes noticed this on RedHat 7.0 as well.) The solution is to use the <code>-dM</code> flag to gcc; there&rsquo;s not much we can do for non-gcc right now.</p>

<h3 id="span-id-vms-hackery-vms-hackery-span"><span id="VMS_hackery">VMS hackery</span></h3>

<p>There was a lot of work on VMS this week: firstly, in the area of file locking. Peter Prymmer reported that <code>t/lib/st-lock.t</code> failed since VMS doesn&rsquo;t really have locking. Peter Farley piped up and said that this was also the case on DOS and DJGPP, and the work-around there was to null-op the locking tests. Andy Dougherty mentioned that a permanent fix would be to define a <code>d_fcntl_can_lock</code> Configure variable to determine whether or not <code>fcntl</code> is any use. Craig Berry had suggested this idea before; Andy provided the patch.</p>

<p>Peter also noticed that one of Jarkko&rsquo;s patches had broken the <code>POSIX</code> module; there were also some problems with erronous output confusing the test harnesses, so that the tests were passing but were still reporting failures.</p>

<p>After all that, Perl on VMS now passes all tests, and there was much rejoicing!</p>

<h3 id="span-id-the-fcrypt-of-mystery-the-f-crypt-of-mystery-span"><span id="The_fcrypt_of_mystery">The (f)crypt of mystery</span></h3>

<p>Richard Proctor is trying to compile Perl on RiscOS (and take over the RiscOS pumpkin) however is having problems in that <code>fcrypt</code> isn&rsquo;t prototyped on that system. He tried to force the issue with a couple of casts, but Jarkko wasn&rsquo;t impressed; the Right Way to do it is to have a separate <code>riscos/</code> directory and put the platform-specific things in there. Nicholas Clark remarked that the [fcrypt] support was &ldquo;weird&rdquo;:</p>

<blockquote>
<p>There are 4 references to FCRYPT but nothing anywhere (even in a port subdirectory) defines the macro. The macro isn&rsquo;t of the usual HAS_ or I_ forms. Does anyone know where it originates?</p>
</blockquote>

<p>Nobody did, which is&hellip; well, weird. However, we found out where Riscos&rsquo;s <code>UnixLib</code> got its <code>fcrypt</code> implementation from.</p>

<p>Andy Dougherty suggested that the other right way to do it would be to define (and test for) a configure symbol <code>d_fcrypt_proto</code> which then turns into <code>HAS_FCRYPT_PROTO</code>.</p>

<p>No patches were forthcoming.</p>

<h3 id="span-id-yet-more-self-ties-yet-more-self-ties-span"><span id="Yet_more_self_ties">Yet more self-ties</span></h3>

<p>Randy Ray has a module ( <code>Perl-RPM</code>) which uses a self-tie; he found that the reference count of a self-tied object is two, where you&rsquo;d expect it to be one. Alan replied that self-ties are badly broken (hey, don&rsquo;t we know it&hellip;) and Jarkko announced that we could really do with someone who&rsquo;s prepared to tackle this issue and get it sorted out. Randy promised to try and have a look.</p>

<p>Steffen Bayer suggested that you could just manually set the reference count back to one, which struck Alan as somewhat sick. Steffen responded:</p>

<blockquote>
<p>IMO, this is a matter of opinion. :-)</p>

<p>There&rsquo;s nothing fundamentally evil about setting the refcount to a lower value, because this just triggers the DESTROY() event sooner than it would normally.</p>
</blockquote>

<p>But Nick noted that you can&rsquo;t ensure that you&rsquo;re not going to create any more references to the object during DESTROYing, so this really is fundamentally evil after all.</p>

<h3 id="span-id-rsync-vs-ftping-the-patches-rsync-vs-ftp-ing-the-patches-span"><span id="Rsync_vs_FTPing_the_patches">Rsync vs. FTP&rsquo;ing the patches</span></h3>

<p>Merijn Brand complained of a discrepancy between the patch archive (That&rsquo;s <code>rsync://ftp.linux.activestate.com/perl-current-diffs/</code> or <a href="ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current-diffs">ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current-diffs</a>) and the latest source tree. ( <code>rsync://ftp.linux.activestate.com/perl-current/</code> or <a href="ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current">ftp://ftp.linux.activestate.com/pub/staff/gsar/APC/perl-current</a>.)</p>

<p>Sarathy explained that</p>

<blockquote>
<p>The rsync mirror is automatic and syncs with the repository every five minutes.</p>

<p>Updating the patch area still requires manual intervention (with all the goofiness that implies, which you&rsquo;ve noted) and is typically on a daily cycle. Making this process automatic is on my tuit list, but don&rsquo;t ask me when.</p>
</blockquote>

<p>The thread went a little off topic into the mechanics of setting up a rsync server, but lead to <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-11/msg00073.html">a contribution to perlhack</a> from Merijn explaining how to keep in sync with the Perl source.</p>

<h3 id="span-id-changes-to-readmeaix-changes-to-readme-aix-span"><span id="Changes_to_READMEaix">Changes to README.aix</span></h3>

<p>We&rsquo;ve recently been telling AIX users that they need to upgrade their compilers in order to compile Perl, so Merijn send in a patch to README.aix to tell them how to do so. <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-11/msg00152.html">Read about it.</a></p>

<p>Jarkko also decided it was time we had a README.Solaris; volunteers are being sought.</p>

<h3 id="span-id-the-regex-stack-problem-the-regex-stack-problem-span"><span id="The_Regex_Stack_Problem">The Regex Stack Problem</span></h3>

<p>Sam Smith found a regular expression which will crash the engine with a segfault - further investigation showed it was the engine recursing too deeply and exceeding the maximum stack depth. Dominic Dunlop explained that it was difficult to fix this one, as writing stack checking code portably is quite a challenge, and fixing the root of the problem - changing the regex engine from recursion to iteration - is somewhat Herculean.</p>

<p>Dominic further explained that he had a stack checking patch but it depended on the system having the BSD resource limit functions <code>getrlimit</code> and <code>setrlimit</code>. He also couldn&rsquo;t find a nice way of making this all play sensibly with threads. At the time, Ilya had countered that the problem should really be fixed by rewriting the engine to be iterative; Dominic had tried this, but it was very tricky and slowed the whole thing down by about 30% - this was due to the extra memory allocation of the structures that needed to be copied between levels. Jarkko came up with a few ideas, most promising being the use of a custom stack.</p>

<p>The work-around is to increase the process&rsquo;s stack size using <code>ulimit</code>; it was suggested that perl should be able to use <code>setrlimit</code> to extend its own stack size when necessary. This was frowned upon by Jarkko - limits are imposed for a reason.</p>

<p>Anyone who&rsquo;s got infinite patience and sanity may want to consider hacking at removing the recursion, but so far Dominic and Hugo look like the only people patient and sane enough.</p>

<h3 id="span-id-things-nobodys-fixed-things-nobody-s-fixed-span"><span id="Things_nobodys_fixed">Things nobody&rsquo;s fixed</span></h3>

<p>A few bug reports nobody&rsquo;s investigated yet, for those of you with a spare minute: <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-11/msg00043.html">xsubpp truncates files</a></p>

<p>, <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-11/msg00060.html">the AUTOLOAD behaviour changed in 5.6</a>, and <a href="http://www.xray.mpe.mpg.de/mailing-lists/perl5-porters/2000-11/msg00221.html">UTF |= is broken</a>.</p>

<p>Enjoy!</p>

<h3 id="span-id-craig-berry-craig-berry-span"><span id="Craig_Berry">Craig Berry</span></h3>

<p>Craig Berry deserves a special mention for his huge contribution to p5p this week - we saw nearly three hundred messages from him. However, on closer examination, 284 of them turned out to be the same, thanks to a malicious copy of CC Mail belonging to somewhere completely different. (It wasn&rsquo;t Craig&rsquo;s fault at all.)</p>

<h3 id="span-id-various-various-span"><span id="Various">Various</span></h3>

<p>I leave you with a veritable smorgasbord of misdirected queries, test reports, FAQs, off-topic posts, and people spamming the list about how much spam there was on the list, and until next week I remain, your humble and obedient servant,</p>

<hr />

<p><a href="mailto:simon@brecon.co.uk">Simon Cozens</a></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-simon-cozens">
  <div class="col-sm-2">
    
    <a href="/authors/simon-cozens/"><div class="circle-avatar" style="background-image:url(/images/author/simon-cozens.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/simon-cozens/"><h3>Simon Cozens</h3></a>
    <p></p>
    <h5><a href="/authors/simon-cozens/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/legacy/_pub_2000_11_p5pdigest_THISWEEK-20001107.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

