<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Cpanminus on Perl.com - programming news, code and culture</title>
    <link>http://localhost:1313/tags/cpanminus/</link>
    <description>Recent content in Cpanminus on Perl.com - programming news, code and culture</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 27 Mar 2013 00:00:17 +0000</lastBuildDate>
    <atom:link href="/tags/cpanminus/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>How to cleanly uninstall a Perl module</title>
      <link>http://localhost:1313/article/3/2013/3/27/How-to-cleanly-uninstall-a-Perl-module/</link>
      <pubDate>Wed, 27 Mar 2013 00:00:17 +0000</pubDate>
      
      <guid>http://localhost:1313/article/3/2013/3/27/How-to-cleanly-uninstall-a-Perl-module/</guid>
      <description>

&lt;p&gt;CPAN makes installing Perl modules easy but when it comes to removing Perl modules, you have to roll your own solution*. Fortunately the Perl core includes the ExtUtils modules that can help. The script below accepts the Module::Name as an argument, and will delete all files and empty directories associated with that module.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# uninstall_perl_module.pl from PerlTricks.com&lt;/span&gt;

&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.14.2&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; ExtUtils::Installed;
&lt;span style=&#34;color:#66d9ef&#34;&gt;use&lt;/span&gt; ExtUtils::Packlist;

&lt;span style=&#34;color:#75715e&#34;&gt;# Exit unless a module name was passed&lt;/span&gt;
die (&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Error: no Module::Name passed as an argument. E.G.\n\t perl $0 Module::Name\n&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#66d9ef&#34;&gt;unless&lt;/span&gt; $#ARGV &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $module &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; shift @ARGV;

&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $installed_modules &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ExtUtils::Installed&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;new&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;# iterate through and try to delete every file associated with the module&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $file ($installed_modules&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;files($module)) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;removing $file\n&amp;#34;&lt;/span&gt;;
    unlink $file &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;could not remove $file: $!\n&amp;#34;&lt;/span&gt;;
}

&lt;span style=&#34;color:#75715e&#34;&gt;# delete the module packfile&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $packfile &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; $installed_modules&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;packlist($module)&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;packlist_file;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;removing $packfile\n&amp;#34;&lt;/span&gt;;
unlink $packfile &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;could not remove $packfile: $!\n&amp;#34;&lt;/span&gt;;

&lt;span style=&#34;color:#75715e&#34;&gt;# delete the module directories if they are empty&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;foreach&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $dir (sort($installed_modules&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;directory_tree($module))) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;removing $dir\n&amp;#34;&lt;/span&gt;);
    rmdir $dir &lt;span style=&#34;color:#f92672&#34;&gt;or&lt;/span&gt; warn &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;could not remove $dir: $!\n&amp;#34;&lt;/span&gt;;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save the script code above into a text file saved as &amp;lsquo;uninstall_perl_module.pl&amp;rsquo;. So if we wanted to uninstall the venerable &lt;code&gt;Acme::Dot&lt;/code&gt; module, we would open up the terminal, navigate to directory containing uninstall_perl_module.pl and type:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;$ perl uninstall_perl_module&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pl Acme::Dot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and the script will remove the module for you. It will &lt;strong&gt;retain non-empty directories&lt;/strong&gt;, as it uses &lt;a href=&#34;https://perldoc.perl.org/functions/rmdir.html&#34;&gt;rmdir&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;removing &lt;span style=&#34;color:#e6db74&#34;&gt;/home/si&lt;/span&gt;llymoose&lt;span style=&#34;color:#e6db74&#34;&gt;/perl5/&lt;/span&gt;perlbrew&lt;span style=&#34;color:#e6db74&#34;&gt;/perls/&lt;/span&gt;perl&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5.14.2&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/man/m&lt;/span&gt;an3&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;Acme::Dot&lt;span style=&#34;color:#ae81ff&#34;&gt;.3&lt;/span&gt;
removing &lt;span style=&#34;color:#e6db74&#34;&gt;/home/si&lt;/span&gt;llymoose&lt;span style=&#34;color:#e6db74&#34;&gt;/perl5/&lt;/span&gt;perlbrew&lt;span style=&#34;color:#e6db74&#34;&gt;/perls/&lt;/span&gt;perl&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;5.14.2&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;/lib/si&lt;/span&gt;te_perl&lt;span style=&#34;color:#e6db74&#34;&gt;/5.14.2/&lt;/span&gt;Acme&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;Dot&lt;span style=&#34;color:#f92672&#34;&gt;.&lt;/span&gt;pm
&lt;span style=&#34;color:#f92672&#34;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;app-cpanminus&#34;&gt;*App::cpanminus&lt;/h3&gt;

&lt;p&gt;&lt;a href=&#34;https://metacpan.org/pod/App::cpanminus&#34;&gt;App::cpanminus&lt;/a&gt; is a popular alternative CPAN client that can be used to manage Perl distributions. It has many great features, including uninstalling modules. Once you&amp;rsquo;ve installed App::cpanminus, to remove the &lt;code&gt;Acme::Dot&lt;/code&gt; module, at the command line type:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;$ cpanm &lt;span style=&#34;color:#f92672&#34;&gt;--&lt;/span&gt;uninstall Acme::Dot&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;App::cpanminus has loads of other great features, to see them, just run &lt;code&gt;cpanm --help&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Updated:&lt;/strong&gt; added cpanm example and clarified directory removal process. 2015-02-21**&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;em&gt;This article was originally posted on &lt;a href=&#34;http://perltricks.com&#34;&gt;PerlTricks.com&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

