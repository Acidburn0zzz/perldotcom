<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mod Perl Installation on Perl.com - programming news, code and culture</title>
    <link>http://localhost:1313/tags/mod-perl-installation/</link>
    <description>Recent content in Mod Perl Installation on Perl.com - programming news, code and culture</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 06 Jan 2005 00:00:00 -0800</lastBuildDate>
    <atom:link href="/tags/mod-perl-installation/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Bricolage Configuration Directives</title>
      <link>http://localhost:1313/pub/2005/01/06/bricolage_configuration.html/</link>
      <pubDate>Thu, 06 Jan 2005 00:00:00 -0800</pubDate>
      
      <guid>http://localhost:1313/pub/2005/01/06/bricolage_configuration.html/</guid>
      <description>

&lt;p&gt;In my previous article, I provided &lt;a href=&#34;http://localhost:1313/pub/2004/10/28/bricolage_installation.html&#34;&gt;a guided tour of the Bricolage installation process&lt;/a&gt;. If you followed along, you should now have a nice, functioning installation of Bricolage 1.8 all ready to go. But as &lt;a href=&#34;http://www.com-www.com/weirdal/mrpopeil.html&#34;&gt;Mr. Popeil&lt;/a&gt; used to say, &lt;em&gt;&amp;ldquo;But wait, there&amp;rsquo;s more!&amp;rdquo;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Like many other applications, Bricolage comes with a runtime configuration file. This file, named &lt;em&gt;bricolage.conf&lt;/em&gt;, lives in the &lt;em&gt;conf&lt;/em&gt; subdirectory of your Bricolage root. It contains a list of settings that tell Bricolage how to find things, how to connect to the database, which optional features to include, and other good stuff. This article provides a guided tour of all of the configuration settings in &lt;em&gt;bricolage.conf&lt;/em&gt; to enable you to configure things exactly the way you need them, so that you can manage your sites more effectively with Bricolage.&lt;/p&gt;

&lt;h3 id=&#34;span-id-configurationformat-configuration-format-span&#34;&gt;&lt;span id=&#34;configurationformat&#34;&gt;Configuration Format&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;The format of &lt;em&gt;bricolage.conf&lt;/em&gt;, derived from the &lt;a href=&#34;https://www.oreilly.com/catalog/cookbook/&#34;&gt;“Perl Cookbook”&lt;/a&gt;, is quite simple. A directive appears on a single line, followed by a space, an equal sign, and then the value. Anything after a pound sign (“#”) is a comment. Typical entries look like this:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;APACHE_BIN   = /usr/local/apache/bin/httpd
APACHE_CONF  = /usr/local/bricolage/conf/httpd.conf
LISTEN_PORT  = 80
SSL_PORT     = 443
SSL_ENABLE   = No
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Most &lt;em&gt;bricolage.conf&lt;/em&gt; configuration options are one of two types: Boolean values or strings. A Boolean configuration directive can be either enabled or disabled, but you have several ways in which to do so. To enable a Boolean directive, simply set its value to “Yes”, “On”, or “1” (the number one). To disable it, set it to “No”, “Off”, or “0” (zero). String values follow the equal sign. They can be as long as necessary, but cannot break across lines.&lt;/p&gt;

&lt;h3 id=&#34;span-id-apacheconfiguration-apache-configuration-span&#34;&gt;&lt;span id=&#34;apacheconfiguration&#34;&gt;Apache Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;The first section of &lt;em&gt;bricolage.conf&lt;/em&gt; configures Bricolage to use the Apache web server. Because Bricolage runs on top of Apache but uses its own startup scripts, it needs to know where to find Apache resources so that it can configure and start Apache properly. Bricolage&amp;rsquo;s default method of dynamically configuring Apache therefore relies on these directives. The installation sets many of them for you, but not all, so it&amp;rsquo;s worth it to have a look to see if you need to tweak any of them:&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;apachebin&#34;&gt;&lt;code&gt;APACHE_BIN&lt;/code&gt;&lt;/span&gt;
This directive tells Bricolage where to find your Apache &lt;em&gt;httpd&lt;/em&gt; executable, which it uses to start itself up.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;apachecon&#34;&gt;&lt;code&gt;APACHE_CON&lt;/code&gt;&lt;/span&gt;
This directive points to the &lt;em&gt;httpd.conf&lt;/em&gt; file. This, of course, is the famous Apache configuration file. It, too, needs configuration to run Bricolage (the Bricolage installer configures the default &lt;em&gt;httpd.conf&lt;/em&gt; in the &lt;em&gt;conf&lt;/em&gt; subdirectory of your Bricolage root directory), and Bricolage, in turn, uses this directive to tell &lt;em&gt;httpd&lt;/em&gt; where to find the configuration file when it starts up.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;listenport&#34;&gt;&lt;code&gt;LISTEN_PORT&lt;/code&gt;&lt;/span&gt;
This is the TCP/IP port on which Bricolage will listen for requests. It uses the HTTP standard port 80 by default, but you can &lt;a href=&#34;http://bricolagecms.org/docs/howtos/2004/04/19/virtual_host_config/&#34;&gt;change Bricolage to use another port&lt;/a&gt; if you already have another server listening on port 80.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sslport&#34;&gt;&lt;code&gt;SSL_PORT&lt;/code&gt;&lt;/span&gt;
This is the TCP/IP port on which Bricolage will listen for secure sockets layer (SSL) requests. It defaults to the standard HTTP SSL port 443, but again, you can change it to another port if something else is already using port 443. SSL is disabled by default, however, so read on for details on how to turn it on.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sslenable&#34;&gt;&lt;code&gt;SSL_ENABLE&lt;/code&gt;&lt;/span&gt;
This directive turns on SSL support. You must have either &lt;code&gt;mod_ssl&lt;/code&gt; or Apache-SSL installed and properly configured in your Apache server. Not quite a Boolean configuration directive, the possible values for &lt;code&gt;SSL_ENABEL&lt;/code&gt; are “No” (or “Off” or “0” [zero]), “mod_ssl”, or “apache-ssl”. SSL is a useful feature for keeping communications encrypted between the server and users&amp;rsquo; browsers.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;alwaysusessl&#34;&gt;&lt;code&gt;ALWAYS_USE_SSL&lt;/code&gt;&lt;/span&gt;
By default, an SSL-enabled Bricolage installation uses SSL only for logging in to Bricolage and in the user profile (where users can change their passwords). Users can elect to encrypt all communications by checking the “Always use SSL” checkbox when logging in, but some security policies may require the encryption of &lt;em&gt;all&lt;/em&gt; communications. In such cases, enable this Boolean directive to force the encryption of &lt;em&gt;all&lt;/em&gt; communications between the Bricolage server and users&amp;rsquo; browsers.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sslcertificatekeyfile&#34;&gt;&lt;code&gt;SSL_CERTIFICATE_KEY_FILE&lt;/code&gt;&lt;/span&gt;
&lt;span id=&#34;sslcertificatefile&#34;&gt;&lt;code&gt;SSL_CERTIFICATE_FILE&lt;/code&gt;&lt;/span&gt;
These directives specify the location of your SSL keys. If you&amp;rsquo;ve configured &lt;code&gt;mod_ssl&lt;/code&gt; or Apache-SSL, you should already be familiar with these files. They help to encrypt and decrypt requests between the server and the browser. If you use &lt;code&gt;make certificate&lt;/code&gt; to generate your SSL certificate during the Apache build process, by default your server key file will be &lt;em&gt;server.key&lt;/em&gt; in the &lt;em&gt;conf/ssl.key&lt;/em&gt; subdirectory of your Apache root directory, while the server public key file will be &lt;em&gt;server.crt&lt;/em&gt; and in the &lt;em&gt;conf/ssl.crt&lt;/em&gt; subdirectory. Bricolage uses these directives to set the Apache &lt;code&gt;SSLCertificateKeyFile&lt;/code&gt; and &lt;code&gt;SSLCertificateFile&lt;/code&gt; directives, respectively, in its dynamic configuration of Apache.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;namevhost&#34;&gt;&lt;code&gt;NAME_VHOST&lt;/code&gt;&lt;/span&gt;
This directive roughly corresponds to the Apache &lt;em&gt;httpd.conf&lt;/em&gt; &lt;code&gt;NameVirtualHost&lt;/code&gt; directive. Set it to the IP address on which the Bricolage Apache server will listen for requests. If you have only one IP address on your server, the simplest thing to do is to leave this directive set to “*”, which applies to all IP addresses. Again, Bricolage uses this directive in its dynamic configuration of Apache.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;vhostservername&#34;&gt;&lt;code&gt;VHOST_SERVER_NAME&lt;/code&gt;&lt;/span&gt;
This is the virtual host name under which to run Bricolage. Bricolage requires a full host or virtual host to run and will use this directive to configure the virtual host dynamically. Leave it set to “_default_” to use the default host name set in your &lt;em&gt;httpd.conf&lt;/em&gt; file.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;manualapache&#34;&gt;&lt;code&gt;MANUAL_APACHE&lt;/code&gt;&lt;/span&gt;
Bricolage uses Apache::ReadConfig to configure the httpd daemon. There is no &lt;em&gt;httpd.conf&lt;/em&gt; include file. If you want to take control of your Bricolage Apache server by manually configuring it, enable this Boolean directive. It will generate a file, &lt;em&gt;bric_httpd.conf&lt;/em&gt;, in the &lt;em&gt;bricolage&lt;/em&gt; subdirectory of your temporary directory (see the &lt;a href=&#34;#tempdir&#34;&gt;TEMP_DIR&lt;/a&gt; directive for the location of the temporary directory). This file will contain all of the Apache configuration directives that Bricolage uses to configure Apache dynamically. Restarting Bricolage will rewrite this file, but if you want to use it and edit it manually, copy it to the &lt;em&gt;conf&lt;/em&gt; subdirectory of your Bricolage root directory, disable the &lt;code&gt;MANUAL_APACHE&lt;/code&gt; directive, and then change the section of the &lt;em&gt;httpd.conf&lt;/em&gt; file that configures Bricolage from:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;PerlPassEnv BRICOLAGE_ROOT
PerlModule Bric::App::ApacheConfig
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;To:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Include /usr/local/bricolage/conf/bric_httpd.conf
PerlPassEnv BRICOLAGE_ROOT
PerlModule Bric::App::ApacheStartup
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here &lt;em&gt;/usr/local/bricolage/conf/bric_httpd.conf&lt;/em&gt; is the full path name to the newly generated &lt;em&gt;bric_httpd.conf&lt;/em&gt; file. You can now tweak this file to your heart&amp;rsquo;s content. Just be sure to generate a new one after each upgrade of Bricolage, as certain directives may change between releases.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sysuser&#34;&gt;&lt;code&gt;SYS_USER&lt;/code&gt;&lt;/span&gt;
&lt;span id=&#34;sysgroup&#34;&gt;&lt;code&gt;SYS_GROUP&lt;/code&gt;&lt;/span&gt;
These directives configure the system user and group used by Bricolage. They should contain the same value as the &lt;code&gt;User&lt;/code&gt; and &lt;code&gt;Group&lt;/code&gt; &lt;em&gt;httpd.conf&lt;/em&gt; directives, usually “nobody” or “www”. Any files written to the file system by Bricolage will be owned by this user and group.&lt;/p&gt;

&lt;h3 id=&#34;span-id-databaseconfiguration-database-configuration-span&#34;&gt;&lt;span id=&#34;databaseconfiguration&#34;&gt;Database Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;The next major section of the Bricolage configuration file configures the database. Bricolage uses PostgreSQL 7.3 or later for its data store. Connecting to that database requires several attributes, not least of which are the username and password. These are all set during installation, but it&amp;rsquo;s worth being familiar with them in case things change down the line.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;dbname&#34;&gt;&lt;code&gt;DB_NAME&lt;/code&gt;&lt;/span&gt;
The name of the database that stores Bricolage&amp;rsquo;s data. The installer will set this for you. The default value, “bric”, works well in most situations, but it might be set to a different name if you entered one during installation, perhaps because you already had another database named “bric”; Why would you want to do that? Perhaps you have multiple Bricolage installations on the same host. Another reason it might be different is that your ISP provides you with a single database that they name according to their own naming conventions. At any rate, you&amp;rsquo;re unlikely to need to change the value of this directive.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;dbuser&#34;&gt;&lt;code&gt;DB_USER&lt;/code&gt;&lt;/span&gt;
The username that Bricolage will use when connecting to the database. Again, you are unlikely to need to change this directive, especially because, when Bricolage creates the database, it specifically assigns permissions for this user to access the appropriate tables, sequences, and such. Note that, for security reasons, you should &lt;em&gt;never&lt;/em&gt; use the PostgreSQL superuser for this directive.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;dbpass&#34;&gt;&lt;code&gt;DB_PASS&lt;/code&gt;&lt;/span&gt;
The password for the &lt;code&gt;DB_USER&lt;/code&gt; to use to connect to the PostgreSQL database. You&amp;rsquo;ll need to change this directive if the password ever changes in the database. Depending on your PostgreSQL server&amp;rsquo;s security model, it might not matter what the password is. For example, if the PostgreSQL is on the same host as your Bricolage server and trusts local users (the default configuration), it will ignore the password. Consult your PostgreSQL &lt;a href=&#34;https://www.postgresql.org/docs/current/static/client-authentication.html&#34;&gt;authentication settings&lt;/a&gt; (in the server&amp;rsquo;s &lt;em&gt;pg_hba.conf&lt;/em&gt; file) or check with your PostgreSQL DBA if you have questions.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;dbhost&#34;&gt;&lt;code&gt;DB_HOST&lt;/code&gt;&lt;/span&gt;
This is the host name of your PostgreSQL server. If it&amp;rsquo;s on the same host as your Bricolage server, it will likely be commented out, thereby letting Bricolage default to “localhost”. Otherwise, it will be a different host name or IP address. Change this setting if ever your PostgreSQL server moves to a different host or has its host name or IP address changed.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;dbport&#34;&gt;&lt;code&gt;DB_PORT&lt;/code&gt;&lt;/span&gt;
The TCP/IP port on which your PostgreSQL server listens for connections. This directive will be commented out if you&amp;rsquo;ve installed PostgreSQL locally and you&amp;rsquo;re using Unix sockets instead of TCP/IP for its connectivity (a good idea for security-conscious environments). It will also be commented out if Bricolage should use the default PostgreSQL port of 5432. Otherwise, if Bricolage must connect to the PostgreSQL server via TCP/IP on a port other than 5432, set this directive to the appropriate port number.&lt;/p&gt;

&lt;h3 id=&#34;span-id-directorysettings-directory-settings-span&#34;&gt;&lt;span id=&#34;directorysettings&#34;&gt;Directory Settings&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Bricolage stores a lot of files on your server&amp;rsquo;s file system, generally in well-named directories below your Bricolage root directory. Sometimes you may want them installed elsewhere, perhaps for the purposes of conserving disk space or distributing I/O between different partitions. If you want to move any of these directories to a location other than that set by the installer, copy over any existing files to ensure that Bricolage continues to operate correctly.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;tempdir&#34;&gt;&lt;code&gt;TEMP_DIR&lt;/code&gt;&lt;/span&gt;
Bricolage creates several temporary files as it runs, for its cache, user sessions, and the like. If you selected the “multi” option when installing Bricolage, this directive will point to a directory named &lt;em&gt;tmp&lt;/em&gt; under your Bricolage root. Otherwise, it will point to your system&amp;rsquo;s global &lt;em&gt;tmp&lt;/em&gt; directory.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;masoncomproot&#34;&gt;&lt;code&gt;MASON_COMP_ROOT&lt;/code&gt;&lt;/span&gt;
The Bricolage UI uses &lt;a href=&#34;http://www.masonhq.com/&#34;&gt;HTML::Mason&lt;/a&gt;. All of the components to power the UI live in this directory, generally a subdirectory of your Bricolage root named &lt;em&gt;comp&lt;/em&gt;. However, media files uploaded to Bricolage also go in this directory, which means that it can become quite large if you manage a lot of media documents. It might be useful, therefore, to move this directory to a separate partition.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;masondataroot&#34;&gt;&lt;code&gt;MASON_DATA_ROOT&lt;/code&gt;&lt;/span&gt;
Mason compiles the Bricolage UI components into object files and stores them in this directory. For the most part you don&amp;rsquo;t need to worry about where these files live (the default is the &lt;em&gt;data&lt;/em&gt; directory under the Bricolage root directory), although Bricolage will read from it quite a lot as it loads the object files into memory, so disk I/O is important. It&amp;rsquo;s unlikely to grow too except&amp;hellip;&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;burnroot&#34;&gt;&lt;code&gt;BURN_ROOT&lt;/code&gt;&lt;/span&gt;
This directive tells Bricolage where to store formatting templates, object files, and burned files that are ready for distribution. As such, it can also grow quite large, especially if you&amp;rsquo;ve published or previewed a lot of documents. Bricolage never deletes these files so that you always have a canonical directory of the distribution files output by Bricolage. However, the default location for the &lt;code&gt;BURN_ROOT&lt;/code&gt; is under the directory specified by the &lt;code&gt;MASON_DATA_ROOT&lt;/code&gt; directive. If you encounter disk space problems, you might want to move this directory to another partition.&lt;/p&gt;

&lt;h3 id=&#34;span-id-xml-writerconfiguration-xml-writer-configuration-span&#34;&gt;&lt;span id=&#34;xml::writerconfiguration&#34;&gt;XML::Writer Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;The Bricolage Mason burner is responsible for pushing documents through Mason formatting templates. If you&amp;rsquo;re writing templates that output XML (and I&amp;rsquo;ll demonstrate writing templates in a later article, so hang in there!), you might want to simplify things by using an &lt;a href=&#34;https://metacpan.org/pod/XML::Writer&#34;&gt;XML::Writer&lt;/a&gt; object to generate the XML. Bricolage simplifies things by providing these directives to create a globally available XML::Writer object for use in all Mason templates.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;includexmlwriter&#34;&gt;&lt;code&gt;INCLUDE_XML_WRITER&lt;/code&gt;&lt;/span&gt;
Enable this Boolean directive to tell Bricolage to create an XML::Writer object that&amp;rsquo;s globally available as &lt;code&gt;$writer&lt;/code&gt; to all Mason templates. Bricolage is smart enough to configure the XML::Writer object to output XML to Mason&amp;rsquo;s buffer, so that you can even mix standard Mason output in your templates with XML::Writer output.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;xmlwriterargs&#34;&gt;&lt;code&gt;XML_WRITER_ARGS&lt;/code&gt;&lt;/span&gt;
Use this directive to specify a list of options to pass to the XML::Writer constructor when &lt;code&gt;INCLUDE_XML_WRITER&lt;/code&gt; is enabled. This directive is a string containing a Perl expression to pass to XML::Writer. The &lt;a href=&#34;https://metacpan.org/pod/XML::Writer&#34;&gt;XML::Writer documentation&lt;/a&gt; has the full list of possible parameters. Common parameters include &lt;code&gt;NEWLINES&lt;/code&gt; to trigger the output of new lines between XML elements, and &lt;code&gt;DATA_INDENT&lt;/code&gt; to indent nested XML elements by a certain number of characters.&lt;/p&gt;

&lt;h3 id=&#34;span-id-authenticationconfiguration-authentication-configuration-span&#34;&gt;&lt;span id=&#34;authenticationconfiguration&#34;&gt;Authentication Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Several configuration directives affect the behavior and security of the Bricolage authentication system. Bricolage handles its own authentication, storing passwords in the database as MD5-encrypted hashes and recording authentication in a browser cookie. In a security-conscious environment, it pays to be familiar with these directives and even to review their settings periodically.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;authttl&#34;&gt;&lt;code&gt;AUTH_TTL&lt;/code&gt;&lt;/span&gt;
This directive specifies the time-to-live, in seconds, for an authentication session. Each time an authenticated user sends a request to the server, the elapsed time resets to zero. You could therefore set &lt;code&gt;AUTH_TTL&lt;/code&gt; to 3600 seconds for a one-hour time-to-live, and a user would be able to use Bricolage all day, as long as each request was less than an hour apart (but she might have to re-authenticate after lunch). This directive is especially useful in environments where users access Bricolage from public workstations and forget to log out. The default value of 28800 (eight hours) is probably too long in a production environment.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;authsecret&#34;&gt;&lt;code&gt;AUTH_SECRET&lt;/code&gt;&lt;/span&gt;
Bricolage stores the user authentication session locally and keys it off of an MD5 string stored in a browser cookie. The MD5 string comes from the browser&amp;rsquo;s IP subnet, the expiration time, the user name, and the last access time. Because such a string is potentially replicable by someone trying to crack the system, Bricolage also uses a random string of characters to salt the MD5 string. &lt;code&gt;AUTH_SECRET&lt;/code&gt; is the string used for this purpose. The installer generates it for you, but you might want to change it now and then, in order to keep it random and meet the specifications of your security policy. All users will need to re-authenticate after you change &lt;code&gt;AUTH_SECRET&lt;/code&gt; and restart Bricolage.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;loginlength&#34;&gt;&lt;code&gt;LOGIN_LENGTH&lt;/code&gt;&lt;/span&gt;
This directive specifies a minimum user name length. Each user must have a user name of at least this number of characters. The default, “5”, is generally adequate, and allows the default “admin” user name to work properly.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;passwdlength&#34;&gt;&lt;code&gt;PASSWD_LENGTH&lt;/code&gt;&lt;/span&gt;
This directive corresponds to the &lt;code&gt;LOGIN_LENGTH&lt;/code&gt; directive, but applies to passwords. The password length in Bricolage is unlimited, but it&amp;rsquo;s generally a good idea to ensure that they all contain a minimum number of characters. The default is “5”.&lt;/p&gt;

&lt;h3 id=&#34;span-id-distributionconfiguration-distribution-configuration-span&#34;&gt;&lt;span id=&#34;distributionconfiguration&#34;&gt;Distribution Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;When Bricolage previews or publishes documents, it pushes them through formatting templates (written in Mason, Template Toolkit, or HTML::Template) and writes the resulting files to disk. It then distributes those files to the appropriate servers specified in the destination manager in the user interface. (A later article will explain more of the Bricolage administrative interface.) Many run-time configuration directives affect the behavior of the Bricolage distribution server.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enabledist&#34;&gt;&lt;code&gt;ENABLE_DIST&lt;/code&gt;&lt;/span&gt;
This Boolean directive enables Bricolage distribution. The only reason to disable distribution is if you set up a separate distribution server. To my knowledge, no one has actually done this, even though Bricolage supports it. The &lt;a href=&#34;#queuepublishjobs&#34;&gt;QUEUE_PUBLISH_JOBS&lt;/a&gt; directive is more popular to reduce Bricolage server overhead.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;distattempts&#34;&gt;&lt;code&gt;DIST_ATTEMPTS&lt;/code&gt;&lt;/span&gt;
Bricolage distributes files via file system copy, FTP, SFTP, or WebDAV—depending on your destination configuration. We all know that failures can occasionally occur. Bricolage will attempt to distribute a file after a failed distribution and will do it multiple times. Set the &lt;code&gt;DIST_ATTEMPTS&lt;/code&gt; directive to the number of times it should attempt to distribute a file before giving up.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;previewlocal&#34;&gt;&lt;code&gt;PREVIEW_LOCAL&lt;/code&gt;&lt;/span&gt;
This Boolean directive enables Bricolage&amp;rsquo;s internal preview server. This is just a URI in the Bricolage UI that knows to serve previewed content rather than the UI. This is handy for evaluating Bricolage, but be sure to disable it in a production environment, especially if your front-end server needs to serve something other than static HTML. The recommended approach is to set up a separate preview server that is identical to your production server and configure a destination to distribute and redirect previews to that server.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;previewmason&#34;&gt;&lt;code&gt;PREVIEW_MASON&lt;/code&gt;&lt;/span&gt;
With the &lt;code&gt;PREVIEW_LOCAL&lt;/code&gt; directive enabled, if the content you&amp;rsquo;re generating includes Mason calls, you can enable this boolean directive to make Bricolage&amp;rsquo;s internal preview server evaluate the Mason code before serving documents.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;defmediatype&#34;&gt;&lt;code&gt;DEF_MEDIA_TYPE&lt;/code&gt;&lt;/span&gt;
This string directive identifies the default media type (also called a “MIME type”) of files for which Bricolage cannot determine the media type. The default value, “text/html”, covers a lot of typical files in a Web content management environment, such as &lt;em&gt;.php&lt;/em&gt; or &lt;em&gt;.jsp&lt;/em&gt; files. To add new types for Bricolage to recognize, use the media type manager in the UI.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enablesftpmover&#34;&gt;&lt;code&gt;ENABLE_SFTP_MOVER&lt;/code&gt;&lt;/span&gt;
By default, Bricolage does not support distribution via secure FTP (SFTP). If you need it, install the required Net::SFTP module, enable this directive, and restart Bricolage.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sftphome&#34;&gt;&lt;code&gt;SFTP_HOME&lt;/code&gt;&lt;/span&gt;
If you&amp;rsquo;ve enabled SFTP distribution, use this directive specify a home directory for SFTP to use, especially if you want to use public and private SSH keys. Consult the &lt;a href=&#34;https://metacpan.org/pod/Net::SFTP&#34;&gt;Net::SFTP&lt;/a&gt; documentation for details.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enablesftpv2&#34;&gt;&lt;code&gt;ENABLE_SFTP_V2&lt;/code&gt;&lt;/span&gt;
Enable this directive to prefer SSH2 support for SFTP distribution. You&amp;rsquo;ll also need to install more Perl modules from CPAN. Consult the Net::SFTP documentation for details.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;sftpmovercipher&#34;&gt;&lt;code&gt;SFTP_MOVER_CIPHER&lt;/code&gt;&lt;/span&gt;
Net::SFTP uses the &lt;a href=&#34;https://metacpan.org/pod/Net::SSH::Perl&#34;&gt;Net::SSH::Perl&lt;/a&gt; module to handle the SSH side of things. This module supports multiple encryption ciphers. If you prefer one, specify it via this directive.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enablewebdavmover&#34;&gt;&lt;code&gt;ENABLE_WEBDAV_MOVER&lt;/code&gt;&lt;/span&gt;
Bricolage also supports distribution via &lt;a href=&#34;https://web.archive.org/web/20120626092812/http://webdav.org/&#34;&gt;WebDAV&lt;/a&gt;, a standard for distributing documents via the HTTP protocol. DAV, as it is also known, has support in multiple web servers including Microsoft&amp;rsquo;s IIS and Apache 2. If you&amp;rsquo;d like to distribute document files to your production server or servers via DAV, install the &lt;a href=&#34;https://metacpan.org/pod/HTTP::DAV&#34;&gt;HTTP::DAV&lt;/a&gt; module, enable this Boolean directive and restart Bricolage.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;queuepublishjobs&#34;&gt;&lt;code&gt;QUEUE_PUBLISH_JOBS&lt;/code&gt;&lt;/span&gt;
By default, when a user schedules a document to publish immediately, the Bricolage server will immediately execute the distribution. If users publish a lot of documents or you&amp;rsquo;re bulk publishing large sections of your site at once, this can really slow down the Bricolage UI for other users. This is even true even if you&amp;rsquo;ve scheduled a bulk of documents to publish at a future date and time, because the way the default &lt;em&gt;bric_dist_mon&lt;/em&gt; script works is to tickle the Bricolage server to distribute documents.&lt;/p&gt;

&lt;p&gt;The way around this problem is to enable the &lt;code&gt;QUEUE_PUBLISH_JOBS&lt;/code&gt; boolean directive and then use the &lt;em&gt;bric_queued&lt;/em&gt; program instead of &lt;em&gt;bric_dist_mon&lt;/em&gt;. With &lt;code&gt;QUEUE_PUBLISH_JOBS&lt;/code&gt; enabled, the Bricolage server will &lt;em&gt;never&lt;/em&gt; burn and distribute documents, even if a user schedules them to publish &lt;em&gt;yesterday&lt;/em&gt;. Instead, &lt;em&gt;bric_queued&lt;/em&gt; handles all of the burning and distribution itself, without having the Bricolage server expend resources on the task. With this approach, be sure to run &lt;em&gt;bric_queued&lt;/em&gt; from a fairly aggressive cron job.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftpunlinkbeforemove&#34;&gt;&lt;code&gt;FTP_UNLINK_BEFORE_MOVE&lt;/code&gt;&lt;/span&gt;
When Bricolage distributes files via FTP, it uploads them with a temporary file name, and then, when the transfer is complete, it renames the file to the final name. However, if an earlier version of the file is already present, the rename might fail. (This depends on your FTP server, but Microsoft&amp;rsquo;s IIS is the server that led us to add this feature.) In such a case, enable this directive and Bricolage will delete any existing instance of the file before renaming the temporary file.&lt;/p&gt;

&lt;h3 id=&#34;span-id-alertconfiguration-alert-configuration-span&#34;&gt;&lt;span id=&#34;alertconfiguration&#34;&gt;Alert Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Bricolage has an interface for sending alert emails when it logs events that meet certain criteria against objects. Bricolage needs to know a few things before it can send the alerts.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;smtpserver&#34;&gt;&lt;code&gt;SMTP_SERVER&lt;/code&gt;&lt;/span&gt;
Bricolage uses an SMTP server to send alert email messages. The default value for this directive, “localhost”, is fine if you use a Unix system with sendmail (or some other SMTP server) running locally. If your organization has a dedicated SMTP server or if your Bricolage host has none of its own, change the value of this directive.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;alertfrom&#34;&gt;&lt;code&gt;ALERT_FROM&lt;/code&gt;&lt;/span&gt;
Set this directive to an email address that you want to appear in the “From” header of alert emails. I typically set it to something like “Bricolage Admin &amp;lt;www@example.com&amp;gt;”, but use whatever is appropriate for your organization. If your users are inclined to reply to alert emails, you may want to set up a special &lt;code&gt;ALERT_FROM&lt;/code&gt; email address that has an auto-responder to let the user know that the reply will go unread.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;alerttometh&#34;&gt;&lt;code&gt;ALERT_TO_METH&lt;/code&gt;&lt;/span&gt;
This string directive indicates which header to use for specifying alert recipients in email alerts. The possible values are “To” and “Bcc”.&lt;/p&gt;

&lt;h3 id=&#34;span-id-userinterfaceconfiguration-user-interface-configuration-span&#34;&gt;&lt;span id=&#34;userinterfaceconfiguration&#34;&gt;User Interface Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Some configuration directives enable you to affect how the Bricolage user interface works in subtle ways. If you haven&amp;rsquo;t used the Bricolage browser-based interface much yet, some of these won&amp;rsquo;t make much sense just now. Feel free to come back and look again when you&amp;rsquo;re you&amp;rsquo;ve had some experience with the Bricolage interface and want to make it behave more according to your own notions of correctness.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;fullsearch&#34;&gt;&lt;code&gt;FULL_SEARCH&lt;/code&gt;&lt;/span&gt;
By default, when you search for objects in the Bricolage admin interfaces, or for stories, media, or templates in the asset library, the Bricolage UI appends a wildcard character to the end of your search string. Thus if you search for “foo”, the search will return results for all records that &lt;em&gt;start with “foo”&lt;/em&gt;. If, however, you set the &lt;code&gt;FULL_SEARCH&lt;/code&gt; Boolean directive to a true value, all searches in the Bricolage UI will become substring searches. So a search for “foo” will return all records where “foo” appears anywhere in a record.&lt;/p&gt;

&lt;p&gt;The downside to this approach is that it prevents PostgreSQL from using its database indexes. In principal, this is only a problem if you have a large number of objects in Bricolage. If, say, you had 100,000 stories in Bricolage, you would notice that story searches would be noticeably slower with &lt;code&gt;FULL_SEARCH&lt;/code&gt; enabled than with it disabled. Leave it disabled if you expect to manage a lot of documents. Your users can always manually prepend the wildcard character (“%”) to the front of search queries if they want a substring search.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;allowworkflowtransfer&#34;&gt;&lt;code&gt;ALLOW_WORKFLOW_TRANSFER&lt;/code&gt;&lt;/span&gt;
Bricolage workflows are made up of a series of desks. In general, workflows have their own desks, but desks can appear in more than one workflow. In such a case, documents moved to such a shared desk in one workflow will be visible on the same desk in another workflow. This is great for managing common tasks across workflows, such as translation or legal review. The upshot is that, by default, a document placed on a desk in one workflow cannot be transferred from that desk to another desk in a different workflow. Users can only move it to other desks in the workflow in which it originated. Set the &lt;code&gt;ALLOW_WORKFLOW_TRANSFER&lt;/code&gt; Boolean directive to a true value to remove this constraint, so that a document placed on a desk in one workflow can be moved from that desk to other desks in other workflows that the desk is in.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;allowallsitescx&#34;&gt;&lt;code&gt;ALLOW_ALL_SITES_CX&lt;/code&gt;&lt;/span&gt;
When managing multiple sites in Bricolage, the user interface will display a “site context” select list. Only the workflows for the selected site will be displayed. If you want to allow users to see all of the workflows for all of the sites that they have permission to access, set this Boolean directive to a true value to add an “All Sites” option to the “Site context” select list. But beware! If you have access to a lot of sites, you&amp;rsquo;ll have access to a bewildering number of workflows when you select this option!&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;yearspanbefore&#34;&gt;&lt;code&gt;YEAR_SPAN_BEFORE&lt;/code&gt;&lt;/span&gt;
&lt;span id=&#34;yearspanafter&#34;&gt;&lt;code&gt;YEAR_SPAN_AFTER&lt;/code&gt;&lt;/span&gt;
For the input of dates in Bricolage, the user interface offers select lists for the day, month, and year. By default, the years available in the “Year” select list have a limit of the ten years before and after the value for the year or the current year. If you need more years in your select list, set these directives to the number of years before and after the current value or current year. For example, if you manage a site of historical photographs with Bricolage, you might need to select years that range back over 100 years. In such a case, set &lt;code&gt;YEAR_SPAN_BEFORE&lt;/code&gt; to “100”. A science fiction book review site, on the other hand, might need years much farther in the future. For such a case, set &lt;code&gt;YEAR_SPAN_AFTER&lt;/code&gt; to the appropriately high number.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;defaultfilename&#34;&gt;&lt;code&gt;DEFAULT_FILENAME&lt;/code&gt;&lt;/span&gt;
&lt;span id=&#34;defaultfileext&#34;&gt;&lt;code&gt;DEFAULT_FILE_EXT&lt;/code&gt;&lt;/span&gt;
The file names generated for story documents are set on a per-output channel basis. The user interface offers default values for these settings in the output channel profile. The default file name is “index”, and the default file name suffix is “html”. If, say, you were outputing content to an IIS server, you might want to set the &lt;code&gt;DEFAULT_FILENAME&lt;/code&gt; directive to “default” and the &lt;code&gt;DEFAULT_FILE_EXT&lt;/code&gt; directive to “htm”, instead. It&amp;rsquo;s not a big deal either way, though, because you can actually set the values you need for each output in the user interface. These are just the displayed defaults, settable as directives for the ultimate in laziness.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enableocassetassociation&#34;&gt;&lt;code&gt;ENABLE_OC_ASSET_ASSOCIATION&lt;/code&gt;&lt;/span&gt;
Document models are associated with output channels in Bricolage. When you create a new document based on a model, it will automatically have the output channel associations defined by the model. If you&amp;rsquo;d like users to be able to change the associations—say, to assign output channels defined by the model to be optionally associated with documents based on that model—set this directive to a true value. If, however, the added complexity of output channel associations will only confuse your users, set this directive to a false value to remove the user interface for changing document output channel associations.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enablecategorybrowser&#34;&gt;&lt;code&gt;ENABLE_CATEGORY_BROWSER&lt;/code&gt;&lt;/span&gt;
When editing a story document in Bricolage, you&amp;rsquo;ll see a select list of all categories that you have READ permission to access to allow you to optionally add the story to a new category. Most of the time, however, you&amp;rsquo;ll only add a story to one or two categories, and then never change these settings. Therefore, if you have a lot of categories in your Bricolage installation (and there are systems in production with over 2000 categories), it&amp;rsquo;s wasteful to load them all every time you edit a story document when you&amp;rsquo;ll never change them again.&lt;/p&gt;

&lt;p&gt;In such a case, set the Boolean &lt;code&gt;ENABLE_CATEGORY_BROWSER&lt;/code&gt; directive to a true value and restart Bricolage. This will change the story profile to offer a link to a category browser, which enables you to search for the category or categories to associate with a story. Now, not only will you no longer load all categories every time you access the story profile (and the story profile is, for content producers, the most commonly accessed page in the Bricolage UI), but you&amp;rsquo;ll only load those you search for in the category browser. I highly recommend that every Bricolage admin to set this directive to a true value.&lt;/p&gt;

&lt;h3 id=&#34;span-id-documentmanagementconfiguration-document-management-configuration-span&#34;&gt;&lt;span id=&#34;documentmanagementconfiguration&#34;&gt;Document Management Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;These directives relate to how Bricolage manages documents.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;publishrelatedassets&#34;&gt;&lt;code&gt;PUBLISH_RELATED_ASSETS&lt;/code&gt;&lt;/span&gt;
Bricolage allows you to create relationships between documents. These can point to “related stories” or add images to a document, among other things. By default, when you publish a document, Bricolage will also try to publish any related documents. This will help to prevent 404s or broken image problems. In some cases, you might not want this behavior, so set the &lt;code&gt;PUBLISH_RELATED_ASSETS&lt;/code&gt; Boolean directive to a false value.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;storyuriwithfilename&#34;&gt;&lt;code&gt;STORY_URI_WITH_FILENAME&lt;/code&gt;&lt;/span&gt;
Story documents in Bricolage must have unique URIs. URIs consist of a story&amp;rsquo;s category and optionally other parts of the story, such as its cover date and its slug (a one-word description of a story). They do not, however, consist of the file name. This is in keeping with W3C&amp;rsquo;s &lt;a href=&#34;http://www.w3.org/Provider/Style/URI.html&#34;&gt;“Cool URIs don&amp;rsquo;t change“, by Tim Berners-Lee&lt;/a&gt;. The idea is that the story has a directory URI, and there may be several forms of the story with different file names in that directory, such as “index.html” for HTML, “rdf.xml” for RDF, and “index.pdf” for PDFs.&lt;/p&gt;

&lt;p&gt;However, some organizations have Website policies that demand the inclusion of file names in the URI. This is so that different documents can be in the same directory. A common example might be a “About Us” directory with separate “/about/index.html”, “/about/contact.html”, and “/about/copyright.html” documents. Such URIs are not possible by default in Bricolage, which requires that all stories have unique URIs, because each of these stories would have the same URI, namely “/about”. To get around this issue, set the &lt;code&gt;STORY_URI_WITH_FILENAME&lt;/code&gt; Boolean directive to a true value. From then on, all stories will include their file names in their URIs. Be careful, though! Existing stories will not have their URIs changed. Decide how you want to set this directive when you start using Bricolage, and never change it.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;allowsluglessnonfixed&#34;&gt;&lt;code&gt;ALLOW_SLUGLESS_NONFIXED&lt;/code&gt;&lt;/span&gt;
The URIs for story documents are determined by patterns specified on a per-output channel basis. There are two different URI formats in each output channel, one for fixed documents and one for non-fixed documents. Non-fixed documents typically use parts of the cover date in their URIs, while fixed URIs do not. Each document model has a flag set to indicate whether documents based on the model will use the fixed for non-fixed URI patterns. The result is that, for non-fixed stories, you might have URIs like “/reviews/books/2004/12/23/princess_bride”. Here the URI format includes the slug, a one-word summary of the contents of a story (the “princess_bride” part of this example). However, slugs are optional in stories, even non-fixed stories. If you want to force all non-fixed stories to include the slug in order to guarantee the creation of more meaningful URIs, set this Boolean directive to a true value.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;autogenerateslug&#34;&gt;&lt;code&gt;AUTOGENERATE_SLUG&lt;/code&gt;&lt;/span&gt;
This Boolean directive complements the &lt;code&gt;ALLOW_SLUGLESS_NONFIXED&lt;/code&gt; directive. If you want to keep the slug optional but generate one when a user neglects to type one in, set &lt;code&gt;AUTOGENERATE_SLUG&lt;/code&gt; to a true value. This will cause Bricolage to generate a simple slug based on the title of the story. For example, a story with the title “Essential Perl 6” would have the slug “essential_perl_6” generated for it.&lt;/p&gt;

&lt;h3 id=&#34;span-id-apache-sizelimitconfiguration-apache-sizelimit-configuration-span&#34;&gt;&lt;span id=&#34;apache::sizelimitconfiguration&#34;&gt;Apache::SizeLimit Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Bricolage is a large application that includes many CPAN modules as well as its own 120,000+ lines of code. When you start it up, its processes can take up 30MB of memory or more. In general this isn&amp;rsquo;t a problem, because Apache shares that memory between child processes. As each process handles requests, however, its size can swell independent of other processes. If you&amp;rsquo;re performing resource intensive activities, such as publishing a lot of documents at once, the process that handles the request can become quite large. Because Perl (and, by extension, &lt;code&gt;mod_perl&lt;/code&gt;) does not return memory to the system, this can give the appearance that you have a memory leak.&lt;/p&gt;

&lt;p&gt;The solution to this problem is to use the &lt;a href=&#34;https://metacpan.org/pod/Apache::SizeLimit&#34;&gt;Apache::SizeLimit&lt;/a&gt; module distributed with &lt;code&gt;mod_perl&lt;/code&gt; to check your &lt;code&gt;mod_perl&lt;/code&gt; processes periodically and kill them when they exceed a certain size. Bricolage has integrated support for Apache::SizeLimit that these directives can quickly enable and configure.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;checkprocesssize&#34;&gt;&lt;code&gt;CHECK_PROCESS_SIZE&lt;/code&gt;&lt;/span&gt;
This Boolean directive turns on the Apache::SizeLimit support. After you set it to a true value and restart Bricolage, it will use the settings in the following directives to decide how often to check your processes and to kill them when they get to be too big.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;maxprocesssize&#34;&gt;&lt;code&gt;MAX_PROCESS_SIZE&lt;/code&gt;&lt;/span&gt;
This is the maximum size, in bytes, that processes can reach before Apache::SizeLimit will kill them.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;checkfrequency&#34;&gt;&lt;code&gt;CHECK_FREQUENCY&lt;/code&gt;&lt;/span&gt;
This directive determines how often Apache::SizeLimit will check the size of your &lt;code&gt;mod_perl&lt;/code&gt; processes. If you set it to “5”, it will check a process after every fifth request handled by that process. The default is “1”.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;minsharesize&#34;&gt;&lt;code&gt;MIN_SHARE_SIZE&lt;/code&gt;&lt;/span&gt;
This directive indicates the minimum amount of shared memory the process must employ to avoid being considered a candidate for termination. Consult the Apache::SizeLimit documentation for more information. The default is “0”, meaning that all Apache &lt;code&gt;mod_perl&lt;/code&gt; processes will have their sizes checked.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;maxunsharedsize&#34;&gt;&lt;code&gt;MAX_UNSHARED_SIZE&lt;/code&gt;&lt;/span&gt;
This directive sets a limit on the amount of unshared memory a process may consume to not be a candidate for termination. You can use this directive to tweak your settings if you find that Apache::SizeLimit terminates processes while they are still mainly using shared memory. The default is “0”.&lt;/p&gt;

&lt;h3 id=&#34;span-id-virtualftpserverconfiguration-virtual-ftp-server-configuration-span&#34;&gt;&lt;span id=&#34;virtualftpserverconfiguration&#34;&gt;Virtual FTP Server Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Bricolage pushes story documents through formatting templates to generate output when you preview or publish them. Formatting templates can use Mason, Template Toolkit, or HTML::Template. If you have a lot of different types of story documents, or just elements of story documents, you&amp;rsquo;ll likely end up with a lot of templates to manage. Editing templates in the browser interface&amp;rsquo;s &lt;code&gt;textarea&lt;/code&gt; fields can be a pain. A better approach is to use the Bricolage virtual FTP server, which provides access to all Bricolage templates via FTP. If the security of your password isn&amp;rsquo;t a serious consideration (because FTP sends passwords in the clear, and maybe you work behind a firewall or over a virtual private network), enable the virtual FTP server and edit Bricolage templates from within your favorite FTP-enabled editor (Emacs, Vim, HomeSite, etc.). Here&amp;rsquo;s how.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enableftpserver&#34;&gt;&lt;code&gt;ENABLE_FTP_SERVER&lt;/code&gt;&lt;/span&gt;
This boolean directive enables the virtual FTP server. Set it to a true value, tune the other FTP directives, reboot Bricolage, fire up the &lt;a href=&#34;http://bricolagecms.org/docs/current/api/bric_ftpd.html&#34;&gt;&lt;em&gt;bric_ftpd&lt;/em&gt;&lt;/a&gt; application, and get to work! Just connect to your Bricolage FTP server on the port specified by the &lt;code&gt;FTP_PORT&lt;/code&gt; directive, login with your Bricolage username and password, and you can browse templates by site, output channel, and category.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftpport&#34;&gt;&lt;code&gt;FTP_PORT&lt;/code&gt;&lt;/span&gt;
This directive specifies a TCP/IP port on which the Bricolage virtual FTP server will listen for connections. The default is “2121”.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftpaddress&#34;&gt;&lt;code&gt;FTP_ADDRESS&lt;/code&gt;&lt;/span&gt;
If your host has more than one IP address, specify one of them here to have the virtual FTP server to listen for connections on that IP address only. By default, the FTP server will listen on all of your host&amp;rsquo;s IP addresses.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftplog&#34;&gt;&lt;code&gt;FTP_LOG&lt;/code&gt;&lt;/span&gt;
The location of the virtual FTP server log. By default, it will be in the &lt;em&gt;log&lt;/em&gt; subdirectory of your Bricolage root directory.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftppidfile&#34;&gt;&lt;code&gt;FTP_PID_FILE&lt;/code&gt;&lt;/span&gt;
Specify the location of the PID file for the Bricolage FTP server. &lt;em&gt;bric_ftpd&lt;/em&gt; will use this file to record the PID of the server when you start it and to stop the server when you execute &lt;code&gt;bric_ftpd -k&lt;/code&gt;. The default is to store the PID file in the &lt;em&gt;log&lt;/em&gt; subdirectory of your Bricolage root directory.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftpdeployonupload&#34;&gt;&lt;code&gt;FTP_DEPLOY_ON_UPLOAD&lt;/code&gt;&lt;/span&gt;
As of Bricolage 1.8 and later, the Bricolage FTP server will save templates to your private sandbox when you upload them. This means that they will be checked out to you, appear in your personal workspace in the UI, and execute when you (and only you) preview stories that use them. To check in and deploy a template to use in production when other users preview and publish documents, simply append the string &lt;em&gt;.deploy&lt;/em&gt; to the end of the file name when you upload it and Bricolage will do the rest.&lt;/p&gt;

&lt;p&gt;Prior to version 1.8.0, the Bricolage virtual FTP server checked out, updated, checked in, and deployed templates on every upload. If for some reason you prefer this approach (and to be honest, I can&amp;rsquo;t imagine why &lt;em&gt;anyone&lt;/em&gt; would!), set the &lt;code&gt;FTP_DEPLOY_ON_UPLOAD&lt;/code&gt; directive to a true value and restart &lt;em&gt;bric_ftpd&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;ftpdebug&#34;&gt;&lt;code&gt;FTP_DEBUG&lt;/code&gt;&lt;/span&gt;
If for some reason the virtual FTP server isn&amp;rsquo;t behaving the way you expect, set this Boolean directive to a true value and restart &lt;em&gt;bric_ftpd&lt;/em&gt;. Then tail the FTP log (specified by the &lt;code&gt;FTP_LOG&lt;/code&gt; directive) to diagnose the problem.&lt;/p&gt;

&lt;h3 id=&#34;span-id-preloadingconfiguration-preloading-configuration-span&#34;&gt;&lt;span id=&#34;preloadingconfiguration&#34;&gt;Preloading Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Because Bricolage runs on Apache 1.3, the parent process loads all of its code at startup time, before it forks off any children. This is memory efficient, because most modern operating systems use a copy-on-write forking design. This means that the children all share memory with the parent until they write to that memory, at which time the kernel copies that memory to the child process.&lt;/p&gt;

&lt;p&gt;When loading a lot of code, children never overwrite much of it. It&amp;rsquo;s highly advantageous to load as much code as you think you&amp;rsquo;ll need into the parent process at startup time, to prevent each of the children from loading it themselves and taking up that much more memory. These directives help you to do just that.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;perlloader&#34;&gt;&lt;code&gt;PERL_LOADER&lt;/code&gt;&lt;/span&gt;
This string directive can be any Perl code you like, as long as it&amp;rsquo;s all on one line in the &lt;em&gt;bricolage.conf&lt;/em&gt; file. Bricolage will execute this code at startup time, in the namespace used by the Mason burner. This is very useful for loading Perl modules that your templates use, so that you&amp;rsquo;re not loading them in each child process. The default value loads &lt;a href=&#34;https://metacpan.org/pod/Apache::Util&#34;&gt;Apache::Util&lt;/a&gt;, which has many useful HTML output utility functions, and &lt;a href=&#34;http://www.bricolage.cc/docs/current/api/Bric::Util::Burner&#34;&gt;Bric::Util::Burner&lt;/a&gt;, which exports several constants that you can use in templates to tell what type of burn is being executed (preview or publish). Other common modules you might want to load here include &lt;a href=&#34;https://metacpan.org/pod/CGI&#34;&gt;CGI.pm&lt;/a&gt; or &lt;a href=&#34;https://metacpan.org/pod/XML::RSS&#34;&gt;XML::RSS&lt;/a&gt; to assist with HTML and RSS output, respectively. You can load anything here, really.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;loadlanguages&#34;&gt;&lt;code&gt;LOAD_LANGUAGES&lt;/code&gt;&lt;/span&gt;
Bricolage has localizations for multiple languages, including German, Portuguese, Italian, Cantonese, Mandarin, and Russian. The localization libraries are Perl modules loaded at server startup time. For the most efficient use of memory, load the languages you expect to use most often by specifying the appropriate language codes (such as “en” for English, “pt_pt” for Portuguese, “de_de” for German, etc.) in a space-delimited list via the &lt;code&gt;LOAD_LANGUAGES&lt;/code&gt; directive.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;loadcharsets&#34;&gt;&lt;code&gt;LOAD_CHAR_SETS&lt;/code&gt;&lt;/span&gt;
This directive functions just like the &lt;code&gt;LOAD_LANGUAGES&lt;/code&gt; directive, except that it loads the libraries that convert to and from UTF-8. Bricolage allows individual users to use different character sets when accessing the Bricolage UI, including ISO-8859-1, ISO-8859-2, Big5, ShiftJIS, GB-2312, and others. To save memory overhead, specify each character set that you expect your users will need to use day-to-day in Bricolage in a space-delimited list in the &lt;code&gt;LOAD_CHAR_SETS&lt;/code&gt; directive.&lt;/p&gt;

&lt;h3 id=&#34;span-id-thumbnailconfiguration-thumbnail-configuration-span&#34;&gt;&lt;span id=&#34;thumbnailconfiguration&#34;&gt;Thumbnail Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;As of Bricolage 1.8.0, Bricolage can generate thumbnail versions of image files uploaded for media documents. All you need to do is install the &lt;a href=&#34;https://metacpan.org/pod/Imager&#34;&gt;Imager&lt;/a&gt; module from CPAN (along with the necessary libraries for the image formats you use—see the &lt;a href=&#34;https://metacpan.org/pod/Imager&#34;&gt;Imager README&lt;/a&gt; file for details) and configure thumbnail support via these directives.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;usethumbnails&#34;&gt;&lt;code&gt;USE_THUMBNAILS&lt;/code&gt;&lt;/span&gt;
Set this Boolean directive to a true value and restart Bricolage to have thumbnails generated for all image files in Bricolage. You must have Imager installed, of course. You might also want to consider installing media type icons specific to particular types of non-image files. See the &lt;em&gt;README&lt;/em&gt; file and script in &lt;em&gt;contrib/copy_gnome_icons&lt;/em&gt; in the Bricolage sources for information on which icon files to use and how to install them using the &lt;em&gt;copy_gnome_icons&lt;/em&gt; script.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;thumbnailsize&#34;&gt;&lt;code&gt;THUMBNAIL_SIZE&lt;/code&gt;&lt;/span&gt;
Set this directive to the maximum dimension of thumbnail images, in pixels. Bricolage will use this number to constrain the size of the thumbnail so that its greatest dimension does not exceed this number. For example, if &lt;code&gt;THUMBNAIL_SIZE&lt;/code&gt; has its default value, “75”, and you upload a 150 x 100 pixel image file, Bricolage will generate a 75 x 50 pixel thumbnail.&lt;/p&gt;

&lt;h3 id=&#34;span-id-htmlareaconfiguration-htmlarea-configuration-span&#34;&gt;&lt;span id=&#34;htmlareaconfiguration&#34;&gt;htmlArea Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Bricolage 1.8.0 added support for WYSIWYG (what you see is what you get) editing via the &lt;a href=&#34;http://www.htmlarea.com/&#34;&gt;htmlArea&lt;/a&gt; JavaScript editor, though it has this feature disabled by default. To enable it, download and install htmlArea 3.0 (in beta release as of this writing) in the &lt;em&gt;comp/media/htmlarea&lt;/em&gt; directory under your Bricolage root. Then configure it via these directives and restart Bricolage. You will then be able to specify a “WYSIWYG” field type in document element definitions, and content editors can take advantage of htmlArea&amp;rsquo;s WYSIWYG features when editing content in those fields.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;enablehtmlarea&#34;&gt;&lt;code&gt;ENABLE_HTMLAREA&lt;/code&gt;&lt;/span&gt;
Set this Boolean directive to a true value to enable Bricolage&amp;rsquo;s htmlArea support. You must have htmlArea installed in the &lt;em&gt;comp/media/htmlarea&lt;/em&gt; directory under your Bricolage root.&lt;/p&gt;

&lt;p&gt;&lt;span id=&#34;htmlareatoolbar&#34;&gt;&lt;code&gt;HTMLAREA_TOOLBAR&lt;/code&gt;&lt;/span&gt;
The htmlArea editor offers a lot of WYSIWYG features as controls (buttons) in its interface. The controls handle tasks such as copy, paste, italicize, boldface, link, etc. By default, Bricolage enables only a subset of these controls. The subset excludes layout type features such as font selection and color, line justification, and the like. The idea is to provide only the tools needed for users to easily add semantically meaningful markup rather than layout markup, so as to keep content independent of presentation. If you really need to allow your users to use six different type faces in twelve colors, you can enable the htmlArea controls for these features via the &lt;code&gt;HTMLAREA_TOOLBAR&lt;/code&gt; directive. The value of the directive is a comma-separated list of single-quoted strings with brackets at either end. See the htmlArea documentation for a &lt;a href=&#34;http://www.htmlarea.com/htmlarea_2/documentation.html#setup3&#34; title=&#34;“htmlArea documentation: How can I change what controls are
displayed on the toolbar?“&#34;&gt;complete list of supported controls&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;span-id-upnext-up-next-span&#34;&gt;&lt;span id=&#34;upnext&#34;&gt;Up Next&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Now you have all the information you need to configure how Bricolage operates to your heart&amp;rsquo;s content. My next article will explore the nitty-gritty of defining document models in Bricolage.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Installing Bricolage</title>
      <link>http://localhost:1313/pub/2004/10/28/bricolage_installation.html/</link>
      <pubDate>Thu, 28 Oct 2004 00:00:00 -0800</pubDate>
      
      <guid>http://localhost:1313/pub/2004/10/28/bricolage_installation.html/</guid>
      <description>

&lt;p&gt;Now that &lt;a href=&#34;http://localhost:1313/pub/2004/08/27/bricolage.html&#34; title=&#34;Content Management with Bricolage&#34;&gt;Content Management with Bricolage&lt;/a&gt; has piqued your interest, you might be wondering what you need to do to install it. I&amp;rsquo;ll be the first to admit that installing Bricolage is not trivial, given that it requires several third-party applications and modules to do its job. That said, the installer tries hard to identify what pieces you have and which ones you don&amp;rsquo;t, to help you through the process. Even still, it can help to have a nice guide to step you through the process.&lt;/p&gt;

&lt;p&gt;This article is here to help.&lt;/p&gt;

&lt;h3 id=&#34;packaging-systems&#34;&gt;Packaging Systems&lt;/h3&gt;

&lt;p&gt;First off, depending on your operating system, you may be able to install Bricolage via the supported packaging system. If you run FreeBSD, you can install a recent version from the Free BSD ports collection. To do so, update your ports tree, and then:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% cd /usr/ports/www/bricolage
% make
% make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A Debian package is also available. To install it, add these lines to your &lt;em&gt;/etc/apt/sources.list&lt;/em&gt; file:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# bricolage
deb http://tetsuo.geekhive.net/mark/debian/unstable /
deb-src http://tetsuo.geekhive.net/mark/debian/unstable /
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then you can install Bricolage using &lt;code&gt;apt-get&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# apt-get install bricolage-db
# apt-get install bricolage
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The packaged distributions of Bricolage are great because they handle all of the dependencies for you, making installation extremely easy. The downside, however, is that there is frequently a lag behind a new release of Bricolage and the updating of the relevant packages. For example, the current stable release of Bricolage is 1.8.2, but the FreeBSD ports package is currently at 1.8.1. The Debian port is at 1.8.0. Furthermore, as of this writing, neither packaging system supports upgrading an existing installation of Bricolage, which may require database updates.&lt;/p&gt;

&lt;h3 id=&#34;building-bricolage&#34;&gt;Building Bricolage&lt;/h3&gt;

&lt;p&gt;The alternative is to compile and install Bricolage and all of its dependencies yourself. This is not as difficult as it might at first sound, because Bricolage is a 100% Perl application and therefore requires no compilation. Many of the dependencies, however, &lt;em&gt;do&lt;/em&gt; require compilation and have their own histories of successful installation on a given platform. For the most part, however, they have solid histories of success, and in the event of trouble, there are lots of resources for help on the Internet (see, for example, my articles on &lt;a href=&#34;http://www.oreillynet.com/pub/au/1059&#34; title=&#34;building Apache/mod_perl on Mac OS X&#34;&gt;building Apache/&lt;code&gt;mod_perl&lt;/code&gt; on Mac OS X&lt;/a&gt;). The platform-specific &lt;em&gt;README&lt;/em&gt; files that come with Bricolage also contain useful information to help with your installation.&lt;/p&gt;

&lt;p&gt;The next few sections of this article cover manual installation of Bricolage. If you&amp;rsquo;re happy with a package install, this information can still be very useful for understanding Bricolage&amp;rsquo;s requirements. If you&amp;rsquo;re antsy, &lt;a href=&#34;http://localhost:1313/pub/2004/10/28/bricolage_installation.html?page=3#upnext&#34; title=&#34;Bricolage Runtime Configuration&#34;&gt;skip to the end&lt;/a&gt; to find out where to go next.&lt;/p&gt;

&lt;h3 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h3&gt;

&lt;p&gt;First: did you read the &lt;em&gt;README&lt;/em&gt; file for your platform?&lt;/p&gt;

&lt;p&gt;The most important prerequisites for Bricolage are:&lt;/p&gt;

&lt;p&gt;Perl
What kind of Perl.com article &lt;em&gt;wouldn&amp;rsquo;t&lt;/em&gt; have this requirement? Bricolage requires Perl 5.6.1 or later, but if you&amp;rsquo;re going to work with &lt;em&gt;any&lt;/em&gt; kind of non-ASCII characters in your content, I &lt;em&gt;strongly&lt;/em&gt; recommend Perl 5.8.3 or later for its solid Unicode support. All text content managed by Bricolage is UTF-8, so for sites such as &lt;a href=&#34;http://www.rfa.org/&#34; title=&#34;RFA publishes in ten different
languages!&#34;&gt;Radio Free Asia&lt;/a&gt; the newer versions of Perl are a must.&lt;/p&gt;

&lt;p&gt;Experience has also shown that some vendor versions of Perl don&amp;rsquo;t work too well. Red Hat&amp;rsquo;s Perl, in particular, seems to have several problems that just go away once a sys-admin decides to compile her own. &lt;em&gt;Caveat Perler.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Apache
Bricolage doesn&amp;rsquo;t serve content, but it does require a web server to serve its interface. It requires Apache 1.3.12 or later, with a strong recommendation for the latest, 1.3.31. Bricolage does not yet support Apache 2, though the upcoming release of &lt;code&gt;mod_perl&lt;/code&gt; 2 will lead to a port.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;mod_perl&lt;/code&gt;
Speaking of &lt;code&gt;mod_perl&lt;/code&gt;, Bricolage requires &lt;code&gt;mod_perl&lt;/code&gt; 1.25 or later, with a strong recommendation to use the latest, 1.29. You can either statically compile &lt;code&gt;mod_perl&lt;/code&gt; into Apache or, as of the recent release of Bricolage 1.8.2, compile it as a dynamically shared object library (DSO). However, in order to use &lt;code&gt;mod_perl&lt;/code&gt; as a DSO, you must have compiled with a Perl that was configured with &lt;code&gt;-Uusemymalloc&lt;/code&gt; &lt;em&gt;or&lt;/em&gt; &lt;code&gt;-Ubincompat5005&lt;/code&gt;. See &lt;a href=&#34;http://perl.apache.org/docs/1.0/guide/install.html#When_DSO_can_be_Used&#34; title=&#34;When DSO can be Used in the mod_perl FAQ&#34;&gt;this &lt;code&gt;mod_perl&lt;/code&gt; FAQ&lt;/a&gt; for more details. Bricolage&amp;rsquo;s installer will check this configuration against the Perl you use to run the installation and will complain if the installing Perl lacks these attributes. However, this check is only valid if the Perl running the installation is the same as the Perl used by &lt;code&gt;mod_perl&lt;/code&gt;, so it pays to be aware of this issue.&lt;/p&gt;

&lt;p&gt;As I said, Bricolage does not currently support &lt;code&gt;mod_perl&lt;/code&gt; 2. However, now that &lt;code&gt;mod_perl&lt;/code&gt; 2 is nearing release, there is greater interest in porting Bricolage to it (and therefore to Apache 2). Some work has begun in this area, and we hope to be able to announce &lt;code&gt;mod_perl&lt;/code&gt; 2 support by the end of the year.&lt;/p&gt;

&lt;p&gt;PostgreSQL
Bricolage stores all of its data in a &lt;a href=&#34;http://www.postgresql.org/&#34; title=&#34;PostgreSQL website&#34;&gt;PostgreSQL&lt;/a&gt; database. For those not familiar with PostgreSQL, it is an advanced, ACID-compliant, open-source object-relational database management system. I&amp;rsquo;ve found the compilation very easy on all platforms I&amp;rsquo;ve tried it on (although I have had to install &lt;a href=&#34;http://www.justatheory.com/computers/os/macosx/libreadline.html&#34; title=&#34;Compiling libreadline on Mac OS X&#34;&gt;&lt;em&gt;libreadline&lt;/em&gt;&lt;/a&gt; on Mac OS X, first). Bricolage requires PostgreSQL 7.3 or later and recommends version 7.4. Bricolage will support the forthcoming PostgreSQL 8.0 around the time of its release, but to date no one has tested them together.&lt;/p&gt;

&lt;p&gt;The one other recommendation I make is that you &lt;a href=&#34;http://www.justatheory.com/computers/databases/postgresql/always_use_c_locale.html&#34; title=&#34;Always use the C Locale with PostgreSQL&#34;&gt;specify &lt;code&gt;--no-locale&lt;/code&gt; or &lt;code&gt;--locale=C&lt;/code&gt; when you initialize the PostgreSQL database&lt;/a&gt;. This is especially important if you will be managing content in more than one language, as it will prevent searches and sort ordering from being specific to one language and possibly incompatible with others. A &lt;a href=&#34;http://archives.postgresql.org/pgsql-general/2004-08/msg01079.php&#34; title=&#34;Subject: UTF-8 and LIKE vs =&#34;&gt;Unicode and searching discussion on the pgsql-general mail list&lt;/a&gt; provides a broader perspective.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;mod_ssl&lt;/code&gt; or &lt;code&gt;apache-ssl&lt;/code&gt;
If you want encrypted communications between Bricolage and its clients, install either &lt;code&gt;mod_ssl&lt;/code&gt; or &lt;code&gt;apache-ssl&lt;/code&gt;. SSL is optional in Bricolage, but I recommend using it for security purposes. Bricolage can use SSL for all requests or just for authentication and password changing requests. Tune in for the next article in this series, “Bricolage Runtime Configuration”, for information on configuring SSL support.&lt;/p&gt;

&lt;p&gt;Expat
Bricolage uses the &lt;a href=&#34;https://metacpan.org/pod/XML::Parser&#34;&gt;XML::Parser&lt;/a&gt; Perl module, which in turn requires the Expat XML parser library. Most Unix systems have a version of Expat installed already, but if you need it, install it from the &lt;a href=&#34;https://libexpat.github.io&#34; title=&#34;The Expat XML Parser&#34;&gt;Expat home page&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;CPAN Modules
Bricolage uses a very large number of CPAN modules. Most of those required in turn require still more modules. For the most part, we recommend that you let the Bricolage installer install the required modules. It will determine which modules you need and install them using the &lt;code&gt;CPAN&lt;/code&gt; module. If you want to get ahead of the game, use the &lt;code&gt;CPAN&lt;/code&gt; module to install them yourself, first. The easiest way to do it is to install &lt;a href=&#34;https://metacpan.org/pod/Bundle::Bricolage&#34;&gt;Bundle::Bricolage&lt;/a&gt;. This module bundles up all of the required modules so that &lt;code&gt;CPAN&lt;/code&gt; will install them for you:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% perl -MCPAN -e &#39;install Bundle::Bricolage&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There are also several optional modules. Install these all in one command by using the &lt;a href=&#34;https://metacpan.org/pod/Bundle::BricolagePlus&#34;&gt;Bundle::BricolagePlus&lt;/a&gt; module:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% perl -MCPAN -e &#39;install Bundle::BricolagePlus&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Installing the Perl modules yourself can be useful if you expect to have trouble with one or more of them, as you can easily go back and manually install any troublesome modules. If you want to install them all yourself, without using the bundles, the &lt;em&gt;INSTALL&lt;/em&gt; file has a complete list (copied from &lt;a href=&#34;http://www.bricolage.cc/docs/current/api/Bric::Admin&#34; title=&#34;Bric::Admin&#34;&gt;Bric::Admin&lt;/a&gt;). I don&amp;rsquo;t recommend this approach, however; it will take you all night!&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Bricolage currently does not run on Windows. This situation will likely change soon, with the forthcoming introduction of PostgreSQL 8.0 with native Windows support as well as &lt;code&gt;mod_perl&lt;/code&gt; 2. Watch the &lt;a href=&#34;http://www.bricolage.cc/&#34; title=&#34;Bricolage
website&#34;&gt;Bricolage web site&lt;/a&gt; for announcements in the coming months.&lt;/p&gt;

&lt;h3 id=&#34;installation&#34;&gt;Installation&lt;/h3&gt;

&lt;p&gt;With all of the major dependencies worked out, it&amp;rsquo;s time to install Bricolage. Download it from the &lt;a href=&#34;http://www.bricolage.cc/downloads/&#34; title=&#34;Bricolage Downloads&#34;&gt;Bricolage download page&lt;/a&gt; to the directory of your choice. Bricolage is distributed as a tarball like most Perl modules. Decompress it and then execute the usual Perl module commands to install it:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% wget http://www.bricolage.cc/downloads/bricolage-1.8.2.tar.gz
% tar zxvf bricolage-1.8.2.tar.gz
% cd bricolage-1.8.2
% perl Makefile.PL
% make
% make test
% make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;OK, to be fair, the process is actually more complicated than that, principally during &lt;code&gt;make&lt;/code&gt;. Let&amp;rsquo;s walk through the process.&lt;/p&gt;

&lt;h3 id=&#34;installation-configuration&#34;&gt;Installation Configuration&lt;/h3&gt;

&lt;p&gt;The first step, &lt;code&gt;perl Makefile.PL&lt;/code&gt;, doesn&amp;rsquo;t really do what it does with your typical Perl modules. It&amp;rsquo;s really just a wrapper around a custom &lt;code&gt;Makefile&lt;/code&gt; to make sure that everything thereafter uses the Perl binary with which you executed &lt;em&gt;Makefile.PL&lt;/em&gt;. If you&amp;rsquo;re using an installation of Perl somewhere other than in your path, use it to execute &lt;em&gt;Makefile.PL&lt;/em&gt; explicitly, such as &lt;code&gt;/path/to/my/perl Makefile.PL&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;The next step, &lt;code&gt;make&lt;/code&gt;, will take the most time as the installer pauses to ask several questions. Let&amp;rsquo;s take it step-by-step.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% make
/usr/bin/perl inst/required.pl


==&amp;gt; Probing Required Software &amp;lt;==

looking for PostgreSQL with version &amp;gt;= 7.3.0...
Found PostgreSQL&#39;s pg_config at &#39;/usr/local/pgsql/bin/pg_config&#39;.
Is this correct? [yes]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first thing the Bricolage installer does is to check for all of its dependencies. Here, it asks for the location of &lt;code&gt;pg_config&lt;/code&gt;, the PostgreSQL configuration program. The installer will use this application to determine the version number of PostgreSQL, among other things. If you&amp;rsquo;re using a package-installed version of PostgreSQL, make sure that you have the PostgreSQL development tools installed, as well (yes, I&amp;rsquo;m looking at &lt;em&gt;you&lt;/em&gt;, Red Hat users!). Bricolage will look in several common locations for &lt;code&gt;pg_config&lt;/code&gt;; if it doesn&amp;rsquo;t find it, or if it finds the wrong one (because you have more than one installed), type in the location of &lt;code&gt;pg_config&lt;/code&gt;. Otherwise, simply accept the one it has found.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Is this correct? [yes] [Return]
Found acceptable version of Postgres: 7.4.3.
Looking for Apache with version &amp;gt;= 1.3.12...
Found Apache server binary at &#39;/usr/sbin/httpd&#39;.
Is this correct? [yes]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, the Bricolage installer searches for an instance of Apache 1.3.x. This time it&amp;rsquo;s looking for the &lt;code&gt;httpd&lt;/code&gt; executable. The same comments that applied to PostgreSQL apply to the Apache Web server; either accept the instance of &lt;code&gt;httpd&lt;/code&gt; or type in an alternate. On my Mac, I never use Apple&amp;rsquo;s Apache (an old habit because Apple&amp;rsquo;s Apache uses a DSO &lt;code&gt;mod_perl&lt;/code&gt;, whereas I always compile my own with a static &lt;code&gt;mod_perl&lt;/code&gt;).&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Is this correct? [yes] no
Enter path to Apache server binary [/usr/sbin/httpd] /usr/local/apache/bin/httpd
Are you sure you want to use &#39;/usr/local/apache/bin/httpd&#39;? [yes] [Return]
Found Apache executable at /usr/local/apache/bin/httpd.
Found acceptable version of Apache: 1.3.31.
Looking for expat...
Found expat at /usr/local/lib/libexpat.so.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;From here, the Bricolage installer continues looking for other dependencies, starting with the Expat XML parsing library. Then the installer probes for all of the required and optional Perl modules:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; Finished Probing Required Software &amp;lt;==

/usr/bin/perl inst/modules.pl


==&amp;gt; Probing Required Perl Modules &amp;lt;==

Looking for Storable...found.
Looking for Time::HiRes...found.
Looking for Unix::Syslog...found.
Looking for Net::Cmd...found.
Looking for Devel::Symdump...found.
Looking for DBI...found.
Checking that DBI version is &amp;gt;= 1.18... ok.
&amp;amp;x2026;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;As I said, Bricolage requires quite a few Perl modules, so I&amp;rsquo;m truncating the list here for the sake of space. If any required modules are missing, the installer makes a note of it. If any optional modules are missing, it will prompt you to find out if you want to install them. Respond as appropriate.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;…
Looking for HTML::Template...found.
Looking for HTML::Template::Expr...found.
Looking for Template...found.
Checking that Template version is &amp;gt;= 2.14... ok.
Looking for Encode...found.
Looking for Pod::Simple...found.
Looking for Test::Pod...found.
Checking that Test::Pod version is &amp;gt;= 0.95... ok.
Looking for Devel::Profiler... found.
Checking that Devel::Profiler version is &amp;gt;= 0.03... ok.
Looking for Apache::SizeLimit...found.
Looking for Net::FTPServer...found.
Looking for Net::SFTP...not found.
Do you want to install the optional module Net::SFTP? [no] [Return]
Looking for HTTP::DAV...not found.
Do you want to install the optional module HTTP::DAV? [no] [Return]
Looking for Text::Levenshtein...not found.
Do you want to install the optional module Text::Levenshtein? [no] yes
Looking for Crypt::SSLeay...found.
Looking for Imager...found.
Looking for Text::Aspell...not found.

Do you want to install the optional module Text::Aspell? [no] [Return]
Looking for XML::DOM...not found.
Do you want to install the optional module XML::DOM? [no] [Return]
Looking for CGI...found.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In this example, I&amp;rsquo;ve elected to install the &lt;a href=&#34;https://metacpan.org/pod/Text::Levenshtein&#34;&gt;Text::Levenshtein&lt;/a&gt; module, but no other optional modules not already installed.&lt;/p&gt;

&lt;h4 id=&#34;optional-perl-modules&#34;&gt;Optional Perl Modules&lt;/h4&gt;

&lt;p&gt;Of course, if you previously installed Bundle::BricolagePlus from CPAN, you will have all of the optional modules installed. Let me provide a bit of background on each optional module so that you can decide for yourself which you need and which you don&amp;rsquo;t. If you&amp;rsquo;re just starting out with Bricolage, I recommend you don&amp;rsquo;t worry too much about the optional modules; you can always add them if you decide that you need them later.&lt;/p&gt;

&lt;p&gt;HTML::Template and HTML::Template::Expr
These two modules are necessary to create HTML::Template templates to format your content in Bricolage. Most Bricolage users use the required HTML::Mason module, but you should elect to install these modules if you&amp;rsquo;re an HTML::Template user.&lt;/p&gt;

&lt;p&gt;Template 2.14
Install the Perl Template Toolkit if you plan to write your content formatting templates in Template Toolkit rather than in Mason or HTML::Template.&lt;/p&gt;

&lt;p&gt;Encode
The Encode module comes with and only works with Perl 5.8.0 and later. Install it you plan to support any character encodings other than UTF-8 in the Bricolage UI.&lt;/p&gt;

&lt;p&gt;Pod::Simple and Test::Pod 0.95
These modules help to test the Bricolage API documentation, but are not otherwise necessary.&lt;/p&gt;

&lt;p&gt;Devel::Profiler 0.03
This module can be useful if you experience performance problems with Bricolage and need to profile it to identify the bottleneck. You can always install it later if you need it.&lt;/p&gt;

&lt;p&gt;Apache::SizeLimit
This module is useful for busy Bricolage installations. Because Perl does not return memory to the operating system when it has finished with it, the Apache/&lt;code&gt;mod_perl&lt;/code&gt; processes can sometimes get quite large. This is especially true if you use the SOAP interface to import or publish a lot of documents. Apache::SizeLimit allows you to configure &lt;code&gt;mod_perl&lt;/code&gt; to kill off its processes when they exceed a certain size, thus returning the memory to the OS. This is the best way to keep the size of Bricolage under control in a busy environment.&lt;/p&gt;

&lt;p&gt;Net::FTPServer
This module is necessary to use the Bricolage virtual FTP server. The virtual FTP server makes it easy to edit Bricolage templates via FTP. It&amp;rsquo;s a very nice feature when you&amp;rsquo;re doing a lot of template development work, offering a more integrated interface for your favorite editor than the cut-and-paste approach of the UI. The downside is that FTP is an unencrypted protocol, so it sends passwords used to log in to the Bricolage virtual FTP server sent in the clear. This may not be so important if you&amp;rsquo;re using Bricolage behind a firewall or on a VPN, and is irrelevant if you&amp;rsquo;re not using SSL, because you&amp;rsquo;re already sending passwords in the clear; but don&amp;rsquo;t do that.&lt;/p&gt;

&lt;p&gt;Net::SFTP 0.08
This module is necessary if you plan to distribute document files to your delivery server via secure FTP. Bricolage supports file system copying, FTP, secure FTP, and DAV distribution.&lt;/p&gt;

&lt;p&gt;HTTP::DAV
Install this module if you plan to distribute document files to your delivery server via DAV.&lt;/p&gt;

&lt;p&gt;Text::Levenshtein
This module is an optional alternative to the required Text::Soundex module. Bricolage uses it to analyze field names and suggest alternatives for misspellings in the “Super Bulk Edit” interface. Either of these modules is fine, although many people consider Text::Levenshtein to have a superior algorithm. I&amp;rsquo;ll show an example of how this works in the Super Bulk Edit interface in a later article.&lt;/p&gt;

&lt;p&gt;Crypt::SSLeay
Install this module if you plan to use SSL with Bricolage. It allows the SOAP clients to negotiate an encrypted connection to Bricolage.&lt;/p&gt;

&lt;p&gt;Imager
This module is necessary if you plan to enable thumbnail images in Bricolage — why wouldn&amp;rsquo;t you want that? You&amp;rsquo;ll need to make sure that you first have all of the supporting libraries you need installed, such as &lt;em&gt;libpng&lt;/em&gt;, &lt;em&gt;libtiff&lt;/em&gt;, and &lt;em&gt;libgif&lt;/em&gt; (or &lt;em&gt;giflib&lt;/em&gt;). I&amp;rsquo;ll discuss enabling thumbnail support in the next article.&lt;/p&gt;

&lt;p&gt;Text::Aspell, XML::DOM, and CGI
These modules are necessary to use the spell-checking available with the optional HTMLArea module. I&amp;rsquo;ll discuss HTMLArea support in the next article.&lt;/p&gt;

&lt;h4 id=&#34;back-to-installation-configuration&#34;&gt;Back to Installation Configuration&lt;/h4&gt;

&lt;p&gt;After the Bricolage installer has determined which Perl module dependencies need to be satisfied, it moves on to checking the Apache dependencies, using the path to the &lt;code&gt;httpd&lt;/code&gt; binary we provided earlier:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; Finished Probing Required Perl Modules &amp;lt;==

/usr/bin/perl inst/apache.pl


==&amp;gt; Probing Apache Configuration &amp;lt;==

Extracting configuration data from `/usr/local/apache/bin/httpd -V`.
Reading Apache conf file: /usr/local/apache/conf/httpd.conf.
Extracting static module list from `/usr/local/apache/bin/httpd -l`.
Your Apache supports loadable modules (DSOs).
Found Apache user: nobody
Found Apache group: nobody
Checking for required Apache modules...
All required modules found.
====================================================================

Your Apache configuration suggested the following defaults.  Press
[return] to confirm each item or type an alternative.  In most cases
the default should be correct.

Apache User:                     [nobody]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The most important settings relative to Apache are the Apache user, group, and port, as well as the domain name of your new Bricolage server. The Bricolage installer probes the default Apache &lt;em&gt;httpd.conf&lt;/em&gt; file to select default values, so you can often accept these:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Apache User:                     [nobody] [Return]
Apache Group:                    [nobody] [Return]
Apache Port:                     [80] [Return]
Apache Server Name:              [geertz.example.com] bricolage.example.com
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here I&amp;rsquo;ve elected only to change the hostname for my Bricolage server. Because Bricolage requires its own hostname to run, I&amp;rsquo;ve just given it a meaningful name. Be sure to set up DNS as necessary to point to your Bricolage-specific domain name. You can also run Bricolage on alternate ports, which can be useful on a server running Bricolage in addition to an existing web server (see the Bricolage web site for more information on &lt;a href=&#34;http://www.bricolage.cc/docs/howtos/2004/09/18/separate_instance_config/&#34; title=&#34;Running Bricolage on the Same Machine as the Front-End Server&#34;&gt;running Bricolage concurrent with another web server process&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Bricolage will also check to see if your Apache binary includes support for &lt;code&gt;mod_ssl&lt;/code&gt; or Apache-SSL. If so, it will ask if you wish to use SSL support with Bricolage:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Do you want to use SSL? [no] yes
SSL certificate file location [/usr/local/apache/conf/ssl.crt/server.crt] [Return]
SSL certificate key file location [/usr/local/apache/conf/ssl.key/server.key] [Return]
Apache SSL Port:                 [443] [Return]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here I&amp;rsquo;ve elected to use the default values. If your Apache server has both &lt;code&gt;mod_ssl&lt;/code&gt; and Apache-SSL support, the installer will prompt to find out which you wish to use. The installer will pull the default SSL certificates from the Apache &lt;em&gt;conf&lt;/em&gt; directory; type in alternatives if you want to use different certificates or if the installer couldn&amp;rsquo;t find any.&lt;/p&gt;

&lt;p&gt;Once it has all of the Apache configuration information in hand, the Bricolage installer moves on to gathering PostgreSQL information:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; Finished Probing Apache Configuration &amp;lt;==

/usr/bin/perl inst/postgres.pl


==&amp;gt; Probing PostgreSQL Configuration &amp;lt;==

Extracting postgres include dir from /usr/local/pgsql/bin/pg_config.
Extracting postgres lib dir from /usr/local/pgsql/bin/pg_config.
Extracting postgres bin dir from /usr/local/pgsql/bin/pg_config.
Finding psql.
Finding PostgreSQL version.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;In order to create the Bricolage database and populate it with default data, the installer needs access to the database server as the PostgreSQL administrative or “Root” user, usually “postgres”. Then it will ask you to pick names for the Bricolage database and PostgreSQL user, which it will create:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Postgres Root Username [postgres] [Return]
Postgres Root Password (leave empty for no password) [] [Return]
Postgres System Username [postgres] [Return]
Bricolage Postgres Username [bric] [Return]
Bricolage Postgres Password [NONE] password
Are you sure you want to use &#39;password&#39;? [yes] [Return]
Bricolage Database Name [bric] [Return]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here I&amp;rsquo;ve accepted the default value for the “Postgres Root Username”. I left the password empty because by default PostgreSQL allows local users to access the server without a username. Instances of PostgreSQL installed from a package may have other authentication rules; consult the documentation for your installation of PostgreSQL for details. The “Postgres System Username” is necessary only if you&amp;rsquo;re running PostgreSQL on the same box as Bricolage. If so, then you&amp;rsquo;ll need to type in the Unix username under which PostgreSQL runs (also usually “postgres”). If PostgreSQL is running on another box, enter “root” or some other real local username for this option.&lt;/p&gt;

&lt;p&gt;You can give your Bricolage database and PostgreSQL user any names you like, but the defaults are typical. You must provide a password for the Bricolage PostgreSQL username (here I&amp;rsquo;ve entered “password”). Next, the Bricolage installer will prompt for the location of your PostgreSQL server:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Postgres Database Server Hostname (default is unset, i.e. local domain socket)
      [] [Return]
Postgres Database Server Port Number (default is local domain socket)
      [] [Return]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Here I&amp;rsquo;ve accepted the defaults, because I&amp;rsquo;m running PostgreSQL on the local box and on the default port. In fact, if you leave these two options to their empty defaults, Bricolage will use a Unix socket to communicate with the PostgreSQL server. This has the advantage of not only being faster than a TCP/IP connection, but it also allows you to turn off PostgreSQL&amp;rsquo;s TCP/IP support if you worry about having another port open on your server. However, if PostgreSQL is running on a separate box, you must enter a host name or IP address. If it&amp;rsquo;s running on a port other than the default port (5432), enter the appropriate port number.&lt;/p&gt;

&lt;p&gt;Next, the Bricolage installer asks how you want to install its various parts:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; Finished Probing PostgreSQL Configuration &amp;lt;==

/usr/bin/perl inst/config.pl


==&amp;gt; Gathering User Configuration &amp;lt;==

========================================================================

Bricolage comes with two sets of defaults.  You&#39;ll have the
opportunity to override these defaults but choosing wisely here will
probably save you the trouble.  Your choices are:

  s - &amp;quot;single&amp;quot;   one installation for the entire system

  m - &amp;quot;multi&amp;quot;    an installation that lives next to other installations
                 on the same machine

Your choice? [s]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;There are essentially two ways to install Bricolage: The first, “single”, assumes that you will only ever have a single instance of Bricolage installed on your server. In such a case, it will install all of the Perl modules into the appropriate Perl &lt;code&gt;@INC&lt;/code&gt; directory like any other Perl module and the executables into the same &lt;em&gt;bin&lt;/em&gt; directory as your instance of Perl (such as &lt;em&gt;/usr/local/bin&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;The second way to install Bricolage is with the “multi” option. This option allows you to have multiple versions of Bricolage installed on a single server. Even if you never intend to do this, I generally recommend taking this approach, because the upshot is that &lt;em&gt;all&lt;/em&gt; of your Bricolage files (with the exception of the database, the location of which depends on your PostgreSQL configuration) will install into a single directory. This makes it very easy to keep track of where everything is.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Your choice? [s] m
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, the Bricolage installer wants to know where to install Bricolage. The default option, &lt;em&gt;/usr/local/bricolage&lt;/em&gt;, is the easiest, but you can put it anywhere you like. All of the other relevant directories will by default be subdirectories of this directory, but you can change them too. For example, you might prefer to have the error log file in the typical log directory for your OS, such as &lt;em&gt;/var/log&lt;/em&gt;. Personally, I prefer to keep everything in one place.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Bricolage Root Directory [/usr/local/bricolage] [Return]
Temporary Directory [/usr/local/bricolage/tmp] [Return]
Perl Module Directory [/usr/local/bricolage/lib] [Return]
Executable Directory [/usr/local/bricolage/bin] [Return]
Man-Page Directory (! to skip) [/usr/local/bricolage/man] [Return]
Log Directory [/usr/local/bricolage/log] [Return]
PID File Location [/usr/local/bricolage/log/httpd.pid] [Return]
Mason Component Directory [/usr/local/bricolage/comp] [Return]
Mason Data Directory [/usr/local/bricolage/data] [Return]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you elected for the “single” installation option, then your choices would look more like:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Bricolage Root Directory [/usr/local/bricolage] [Return]
Temporary Directory [/tmp] [Return]
Perl Module Directory [/usr/local/lib/perl5/site_perl/5.8.5] [Return]
Executable Directory [/usr/local/bin] [Return]
Man-Page Directory (! to skip) [/usr/local/man] [Return]
Log Directory [/usr/local/apache/logs/] [Return]
PID File Location [/usr/local/apache/logs/httpd.pid] [Return]
Mason Component Directory [/usr/local/bricolage/comp] [Return]
Mason Data Directory [/usr/local/bricolage/data] [Return]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Again, you can customize these as you like. That&amp;rsquo;s it for the installation configuration!&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;==&amp;gt; Finished Gathering User Configuration &amp;lt;==


===========================================================
===========================================================

Bricolage Build Complete. You may now proceed to
&amp;quot;make cpan&amp;quot;, which must be run as root, to install any
needed Perl modules; then to
&amp;quot;make test&amp;quot; to run some basic tests of the API; then to
&amp;quot;make install&amp;quot;, which must be run as root.

===========================================================
===========================================================
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;installing-cpan-modules&#34;&gt;Installing CPAN Modules&lt;/h4&gt;

&lt;p&gt;Whether you elected to install optional CPAN modules, the Bricolage installer still might have identified missing module dependencies, so it&amp;rsquo;s a good idea to follow the helpful instructions and run &lt;code&gt;make cpan&lt;/code&gt;. Of course, the &lt;code&gt;cpan&lt;/code&gt; target will implicitly execute if you just moved on to &lt;code&gt;make test&lt;/code&gt;, but it&amp;rsquo;s a good idea to run it on its own to have more control over things and to identify any possible problems. My system had all of the dependencies satisfied already (I&amp;rsquo;ve done this once or twice before), but you&amp;rsquo;ll recall that I had elected to install the optional Text::Leventshtein module. The Bricolage installer will therefore attempt to install it from CPAN.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% make cpan
/usr/bin/perl inst/cpan.pl
This process must (usually) be run as root.
Continue as non-root user? [yes] n
make: *** [cpan] Error 1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Whoops! Don&amp;rsquo;t make the mistake I just made! &lt;code&gt;make cpan&lt;/code&gt; must run as the root user.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% sudo make cpan
/usr/bin/perl inst/cpan.pl


==&amp;gt; Installing Modules From CPAN &amp;lt;==

CPAN: Storable loaded ok
CPAN: LWP::UserAgent loaded ok

&amp;amp;x2026;

Found Text::Levenshtein.  Installing...
Running install for module Text::Levenshtein
Running make for J/JG/JGOLDBERG/Text-Levenshtein-0.05.tar.gz
Fetching with LWP:
  http://www.perl.com/CPAN/authors/id/J/JG/JGOLDBERG/Text-Levenshtein-0.05.tar.gz

&amp;amp;x2026;

Text::Levenshtein installed successfully.


==&amp;gt; Finished Installing Modules From CPAN &amp;lt;==
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I&amp;rsquo;ve truncated the output here, but you should have the general idea. The Bricolage installer uses the Perl &lt;code&gt;CPAN&lt;/code&gt; module to install any needed modules from CPAN. If you encounter any problems, you might need to stop and manually configure and install a module. If so, once you&amp;rsquo;re ready to continue with the Bricolage installation, delete the &lt;em&gt;modules.db&lt;/em&gt; file in order to force the installer to detect all modules again so that it notices that you now have the module installed:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% rm modules.db
% sudo make cpan
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;running-tests&#34;&gt;Running Tests&lt;/h4&gt;

&lt;p&gt;The next step in installing Bricolage is optional, but will help identify any pitfalls before going any further. That&amp;rsquo;s running the test suite.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% make test
PERL_DL_NONLAZY=1 /usr/bin/perl inst/runtests.pl
t/Bric/Test/Runner....ok
All tests successful, 7 subtests skipped.
Files=1, Tests=2510, 21 wallclock secs ( 8.83 cusr +  1.39 csys = 10.22 CPU)
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;make-it-so&#34;&gt;Make it So!&lt;/h4&gt;

&lt;p&gt;Once all tests pass, you&amp;rsquo;re ready to install Bricolage:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% sudo make install
/usr/bin/perl inst/is_root.pl
/usr/bin/perl inst/cpan.pl
All modules installed. No need to install from CPAN.
rm -f lib/Makefile
cd lib; /usr/bin/perl Makefile.PL; make install
&amp;amp;x2026;
==&amp;gt; Finished Copying Bricolage Files &amp;lt;==
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you happened to select a database name for Bricolage for a database that already exists, the installer will warn you about it:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/usr/bin/perl inst/db.pl


==&amp;gt; Creating Bricolage Database &amp;lt;==

Becoming postgres...
Creating database named bric...
Database named &amp;quot;bric&amp;quot; already exists.  Drop database? [no]
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now you have a choice. If you elect to dropt the database, the Bricolage installer will drop it and then create a new copy — but it must have “Root” user access to the PostgreSQL server. In other situations you might want to continue with the installed database, as in the case when your ISP has created the database for you ahead of time. You will also receive a prompt if the PostgreSQL user for the Bricolage database already exists. Again, you can either opt to drop and recreate the user or continue with the existing username:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Database named &amp;quot;bric&amp;quot; already exists.  Drop database? [no] [Return]
Create tables in existing database? [yes] [Return]
Creating user named bric...
User named &amp;quot;bric&amp;quot; already exists. Continue with this user? [yes] [Return]
Loading Bricolage Database (this may take a few minutes).
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;At this point, the Bricolage installer is creating the Bricolage database. On my Mac, it takes about a minute to create the database, but your mileage may vary. Once that ends, the installer grants the appropriate PostgreSQL permissions and the installation is complete!&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;Done.
Finishing database...
Done.
/usr/bin/perl inst/db_grant.pl
Becoming postgres...
Granting privileges...
Done.
/usr/bin/perl inst/done.pl


=========================================================================
=========================================================================

                   Bricolage Installation Complete

You may now start your Bricolage server with the command (as root):

  /usr/local/bricolage/bin/bric_apachectl start

If this command fails, look in your error log for more information:

  /usr/local/bricolage/log/error_log

Once your server is started, open a web browser and enter the URL for
your server:

  http://bricolage.example.com

Login in as &amp;quot;admin&amp;quot; with the default password &amp;quot;change me now!&amp;quot;. Your
first action should be changing this password. Navigate into the ADMIN -&amp;gt;
SYSTEM -&amp;gt; Users menu, search for the &amp;quot;admin&amp;quot; user, click the &amp;quot;Edit&amp;quot;
link, and change the password.

=========================================================================
=========================================================================
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;start-er-up-and-login&#34;&gt;Start &amp;lsquo;er Up and Login&lt;/h4&gt;

&lt;p&gt;That&amp;rsquo;s it. Bricolage should start with the command helpfully provided by the installer:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% sudo /usr/local/bricolage/bin/bric_apachectl start
bric_apachectl start: starting httpd
bric_apachectl start: httpd started
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;If you set the Bricolage root directory to something other than &lt;em&gt;/usr/local/bricolage&lt;/em&gt;, you&amp;rsquo;ll need to set the &lt;code&gt;$BRICOLAGE_CONF&lt;/code&gt; environment variable, first. For example, using Bash or Zsh, do:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;% BRICOLAGE_ROOT=/opt/bricolage \
&amp;gt; sudo /opt/bricolage/bin/bric_apachectl start
bric_apachectl start: starting httpd
bric_apachectl start: httpd started
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once Bricolage successfully starts, point your browser to the appropriate URL and login as the “admin” user and change the password!&lt;/p&gt;

&lt;h3 id=&#34;span-id-upnext-up-next-bricolage-runtime-configuration-span&#34;&gt;&lt;span id=&#34;upnext&#34;&gt;Up Next: Bricolage Runtime Configuration&lt;/span&gt;&lt;/h3&gt;

&lt;p&gt;Now that you have Bricolage up and running, you can start using it. Consult the documentation as directed in the &lt;em&gt;README&lt;/em&gt; file to get started. Feel free to also subscribe to the &lt;a href=&#34;http://www.bricolage.cc/support/lists/&#34; title=&#34;Bricolage Mail Lists&#34;&gt;Bricolage mail lists&lt;/a&gt; to ask any questions and to learn from the brave souls who have gone before you.&lt;/p&gt;

&lt;p&gt;If you&amp;rsquo;re interested in tuning your Bricolage installation, be sure to catch my next article, “Bricolage Runtime Configuration”, in which I&amp;rsquo;ll cover all of the options when configuring Bricolage for added functionality and features.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

