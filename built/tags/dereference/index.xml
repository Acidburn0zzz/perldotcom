<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dereference on Perl.com - programming news, code and culture</title>
    <link>http://localhost:1313/tags/dereference/</link>
    <description>Recent content in Dereference on Perl.com - programming news, code and culture</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Thu, 02 May 2013 20:16:55 +0000</lastBuildDate>
    <atom:link href="/tags/dereference/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Dynamic variable names with a dereferencing block</title>
      <link>http://localhost:1313/article/23/2013/5/2/Dynamic-variable-names-with-a-dereferencing-block/</link>
      <pubDate>Thu, 02 May 2013 20:16:55 +0000</pubDate>
      
      <guid>http://localhost:1313/article/23/2013/5/2/Dynamic-variable-names-with-a-dereferencing-block/</guid>
      <description>&lt;p&gt;Perl is remarkably flexible and allows you to achieve all kinds of wizardry with the language. One example of this is using a dereferencing block to use a scalar value as a variable name. This allows you to use variables with dynamic names.&lt;/p&gt;

&lt;p&gt;An interesting example of this can be seen in &lt;a href=&#34;https://metacpan.org/source/NRG/Nginx-ParseLog-1.01/lib/Nginx/ParseLog.pm&#34;&gt;Nginx::ParseLog&lt;/a&gt;, I&amp;rsquo;ve reproduced the relevant code:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; ( $log_string &lt;span style=&#34;color:#f92672&#34;&gt;=~&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;m/^($ip)\s-\s (.*?)\s         \[(.*?)\]\s  &amp;#34;(.*?)&amp;#34;\s  (\d+)\s  (\d+)\s     &amp;#34;(.*?)&amp;#34;\s  &amp;#34;(.*?)&amp;#34;$/x&lt;/span&gt;) {
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $deparsed &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; { };
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $c &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
         
    &lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; @field_list &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;qw/
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            ip     
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;        remote_user
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            time    
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            request
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            status 
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            bytes_send
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            referer 
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;            user_agent
&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    /&lt;/span&gt;;
 
    {
        &lt;span style=&#34;color:#66d9ef&#34;&gt;no&lt;/span&gt; strict &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;refs&amp;#39;&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;# some Perl magic&lt;/span&gt;
 
        &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (@field_list) {
            $deparsed&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;{ $_  } &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ${ &lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;$c };
            }
    }
     
    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; $deparsed;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What this code does is match $log_string against a regex - if the match is successful, it iterates through the regex capture global variables ($1-$8), using the values of @field_list as the key values for the captures. The dynamic variable name is stored in $c.&lt;/p&gt;

&lt;p&gt;Using dynamic variable names can provide useful shortcuts when used in the right context. Dynamic variables can also increase the risk of error (note that strict &amp;lsquo;refs&amp;rsquo; had to be disabled for this code to work). What&amp;rsquo;s nice about this example is using the regex match in the if statement provides the assurance that every capture was successful, hence in this context it should be ok to turn strict refs off briefly.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;em&gt;This article was originally posted on &lt;a href=&#34;http://perltricks.com&#34;&gt;PerlTricks.com&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Find the index of the last element in an array</title>
      <link>http://localhost:1313/article/6/2013/3/28/Find-the-index-of-the-last-element-in-an-array/</link>
      <pubDate>Thu, 28 Mar 2013 23:30:33 +0000</pubDate>
      
      <guid>http://localhost:1313/article/6/2013/3/28/Find-the-index-of-the-last-element-in-an-array/</guid>
      <description>

&lt;p&gt;Most Perl programmers know that to find the size of an array, the array must called in a scalar context like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Declare the array&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; @numbers_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;41&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;67&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;,&lt;span style=&#34;color:#ae81ff&#34;&gt;62&lt;/span&gt;); 
&lt;span style=&#34;color:#75715e&#34;&gt;# Get the array size&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $size_of_array &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; @numbers_array;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This understanding can lead to programmers applying a scalar context to an array to access its last element (subtracting 1 because arrays are zero-based).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $numbers_array[@numbers_array &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;];
&lt;span style=&#34;color:#75715e&#34;&gt;# 62&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;the-last-index-variable&#34;&gt;The last-index variable&lt;/h3&gt;

&lt;p&gt;Perl has a &amp;lsquo;last-index&amp;rsquo; variable for arrays ($#array_name).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $#numbers_array; 
&lt;span style=&#34;color:#75715e&#34;&gt;# 4&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $numbers_array[$#numbers_array]; 
&lt;span style=&#34;color:#75715e&#34;&gt;# 62&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The last index operator ($#array_name) also works on arrayrefs if you insert an extra dollar sigil:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; $arrayref &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; [&lt;span style=&#34;color:#ae81ff&#34;&gt;41&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;67&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;13&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;9&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;62&lt;/span&gt;];
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $#$arrayref;
&lt;span style=&#34;color:#75715e&#34;&gt;# 4&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $$arrayref[$#$arrayref]; 
&lt;span style=&#34;color:#75715e&#34;&gt;# 62&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&#34;negative-indexing&#34;&gt;Negative indexing&lt;/h3&gt;

&lt;p&gt;Perl provides a shorter syntax for accessing the last element of an array: negative indexing. Negative indices track the array from the end, so -1 refers to the last element, -2 the second to last element and so on.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-perl&#34; data-lang=&#34;perl&#34;&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Declare the array&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;my&lt;/span&gt; @cakes &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;qw(victoria_sponge chocolate_gateau carrot)&lt;/span&gt;;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;# carrot&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;# chocolate_gateau&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;]; &lt;span style=&#34;color:#75715e&#34;&gt;# victoria_sponge&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;];  &lt;span style=&#34;color:#75715e&#34;&gt;# victoria_sponge&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;];  &lt;span style=&#34;color:#75715e&#34;&gt;# chocolate_gateau&lt;/span&gt;
&lt;span style=&#34;color:#66d9ef&#34;&gt;print&lt;/span&gt; $cakes[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;];  &lt;span style=&#34;color:#75715e&#34;&gt;# carrot&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
&lt;em&gt;This article was originally posted on &lt;a href=&#34;http://perltricks.com&#34;&gt;PerlTricks.com&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>

