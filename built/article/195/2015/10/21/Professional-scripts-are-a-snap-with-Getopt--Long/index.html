<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Professional scripts are a snap with Getopt::Long </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="This core module makes it easy to write programs"/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/article/195/2015/10/21/Professional-scripts-are-a-snap-with-Getopt--Long/" />
<meta property="og:title" content="Professional scripts are a snap with Getopt::Long" />
<meta property="og:description" content="This core module makes it easy to write programs">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2015-10-10T10:10:10Z" />
<meta property="og:image" content="http://localhost:1313/images/author/david-farrell.jpg" />
<meta property="og:article:tag" content="app" />
<meta property="og:article:tag" content="terminal" />
<meta property="og:article:tag" content="type_check" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Professional scripts are a snap with Getopt::Long</h1>
              <p class="blog-post-meta">Oct 21, 2015 by
              
              
                
                
                <a href="#author-bio-david-farrell">David Farrell</a>
              
              </p>
              <img alt="" src=""/>
                

<p>Scripts are practically Perl&rsquo;s raison d&rsquo;être, and so naturally it has some great scripting tools. <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> is a module for parsing command line arguments (similar to Python&rsquo;s <a href="https://docs.python.org/dev/library/argparse.html">argparse</a>). Using <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a>, you can quickly define a standard Unix-like interface for your program. With just a few lines of code you can parse, type-check and assign the parameters passed to your program. Sounds good? Read on to find out how.</p>

<h3 id="building-a-basic-app">Building a basic app</h3>

<p>Let&rsquo;s imagine I wanted to create a program for creating software licenses, like <a href="https://metacpan.org/pod/App::Software::License">App::Software::License</a>. The user will run the program and it will print the software license text, with the license text customized for the user. To do this, the program will need to process a few arguments from the user—a perfect use case for <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a>! Let&rsquo;s start with the license holder&rsquo;s name:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $holder_name,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name\n&#34;</span>;</code></pre></div>
<p>I start by importing <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a>, it&rsquo;s part of the core Perl distribution, so if you have Perl installed, you should already have it. The <code>GetOptions</code> function from <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> is where the magic happens. It takes a hash of parameter names and variable references which define the program&rsquo;s API. The string <code>holder=s</code> tells <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> to accept an argument like <code>--holder</code> and assign it to <code>$holder_name</code>. If we receive any arguments that are not defined in <code>GetOptions</code>, the code dies and prints out an exception message (terminating the exception message with a newline stops Perl from printing the line reference of the exception). The final line just prints out the value. I&rsquo;ll save the script as <code>license</code> and test it out:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ chmod a<span style="color:#f92672">+</span>x license
$ <span style="color:#960050;background-color:#1e0010">./</span>license <span style="color:#f92672">--</span>holder <span style="color:#e6db74">&#34;David Farrell&#34;</span>
David Farrell</code></pre></div>
<p>On Windows, you&rsquo;ll need to type:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#f92672">&gt;</span> perl license <span style="color:#f92672">--</span>holder <span style="color:#e6db74">&#34;David Farrell&#34;</span></code></pre></div>
<p>By default <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> also recognizes the short form of arguments, so this works too:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ <span style="color:#960050;background-color:#1e0010">./</span>license <span style="color:#f92672">-</span>h <span style="color:#e6db74">&#34;David Farrell&#34;</span>
David Farrell</code></pre></div>
<h3 id="type-checking">Type checking</h3>

<p><a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> provides basic type checking for strings, integers and floating point numbers. I&rsquo;ve already added a string argument for the license holder&rsquo;s name, so I&rsquo;ll add an integer option for the license year:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $year,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name $year\n&#34;</span>;</code></pre></div>
<p>Running the program again, it will now accept a <code>--year</code> argument:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#f92672">./</span>license <span style="color:#f92672">-</span>h <span style="color:#e6db74">&#34;David Farrell&#34;</span> <span style="color:#f92672">--</span>y <span style="color:#ae81ff">2014</span>
David Farrell <span style="color:#ae81ff">2014</span></code></pre></div>
<p>Note how I was able to pass <code>-y 2014</code> and <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> knew to assign it to <code>$year</code>. <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> will also do basic type checking, so if a non-integer value is passed, it will print and warning and the script will die.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#f92672">./</span>license <span style="color:#f92672">-</span>h <span style="color:#e6db74">&#34;David Farrell&#34;</span> <span style="color:#f92672">--</span>year abcd
Value <span style="color:#e6db74">&#34;abcd&#34;</span> invalid <span style="color:#66d9ef">for</span> option year (number expected)
Invalid options passed to <span style="color:#f92672">./</span>getopt</code></pre></div>
<p>I&rsquo;m going to add an option for the license type, so the user can specify which license text they want such as the GPL, MIT or BSD licenses (there are many more).</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $year,
  <span style="color:#e6db74">&#39;type=s&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $type,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name $year $type\n&#34;</span>;</code></pre></div>
<h3 id="boolean-options">Boolean options</h3>

<p>Finally I want to add a boolean option for whether to print out the full license text or not. To use boolean options with <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a>, it&rsquo;s the same as with other options except that you don&rsquo;t specify the type after the option name:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $year,
  <span style="color:#e6db74">&#39;type=s&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $type,
  <span style="color:#e6db74">&#39;fulltext&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span><span style="color:#66d9ef">my</span> $fulltext,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name $year $type $fulltext\n&#34;</span>;</code></pre></div>
<p>The fulltext option does not take a value and will be initialized as 1 if present, or <code>undef</code> if not:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ <span style="color:#960050;background-color:#1e0010">./</span>license <span style="color:#f92672">-</span>h <span style="color:#e6db74">&#34;David Farrell&#34;</span> <span style="color:#f92672">-</span>y <span style="color:#ae81ff">2012</span> <span style="color:#f92672">-</span>t FreeBSD <span style="color:#f92672">-</span>fulltext
David Farrell <span style="color:#ae81ff">2012</span> FreeBSD <span style="color:#ae81ff">1</span></code></pre></div>
<h3 id="default-values">Default values</h3>

<p>Some options I can give default values to. For example if the user doesn&rsquo;t pass the year they want the license for, I&rsquo;ll assume they want the current year.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;
<span style="color:#66d9ef">use</span> Time::Piece;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $year <span style="color:#f92672">=</span> year_now()),
  <span style="color:#e6db74">&#39;type=s&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;artistic 2.0&#39;</span>),
  <span style="color:#e6db74">&#39;fulltext&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $fulltext,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">year_now</span>
{
  <span style="color:#66d9ef">my</span> $localtime <span style="color:#f92672">=</span> localtime;
  <span style="color:#66d9ef">return</span> $localtime<span style="color:#f92672">-&gt;</span>year;
}

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name $year $type $fulltext\n&#34;</span>;</code></pre></div>
<p>I&rsquo;ve added the <a href="https://metacpan.org/pod/Time::Piece">Time::Piece</a> module, which is a <a href="http://perltricks.com/article/59/2014/1/10/Solve-almost-any-datetime-need-with-Time--Piece">useful</a> module for datetime handling, and a subroutine <code>year_now</code> which returns the current year. Meanwhile I&rsquo;ve updated <code>GetOptions</code> to assign the current year to the <code>$year</code> variable. This will be overridden if the user passes the year argument. I&rsquo;ve also given the license type the default value of &ldquo;artistic 2.0&rdquo; as that is the same license as Perl 5 (and the license used by many modules).</p>

<h3 id="mandatory-parameters">Mandatory parameters</h3>

<p>So far so good, but what about mandatory parameters? This script will not work unless the user passes the license holder information. For mandatory parameters I have to check for their presence myself, <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> can&rsquo;t help me here. Luckily it&rsquo;s a simple check:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> Getopt::Long;
<span style="color:#66d9ef">use</span> Time::Piece;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $year <span style="color:#f92672">=</span> year_now()),
  <span style="color:#e6db74">&#39;type=s&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;artistic 2.0&#39;</span>),
  <span style="color:#e6db74">&#39;fulltext&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $fulltext,
) <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;Invalid options passed to $0\n&#34;</span>;

<span style="color:#75715e"># check we got a license holder</span>
die <span style="color:#e6db74">&#34;$0 requires the license holder argument (--holder)\n&#34;</span> <span style="color:#66d9ef">unless</span> $holder_name;

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">year_now</span>
{
  <span style="color:#66d9ef">my</span> $localtime <span style="color:#f92672">=</span> localtime;
  <span style="color:#66d9ef">return</span> $localtime<span style="color:#f92672">-&gt;</span>year;
}

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$holder_name $year $type $fulltext\n&#34;</span>;</code></pre></div>
<p>In case you&rsquo;re wondering, the variable <code>$0</code> is a special variable that is the program&rsquo;s name. It&rsquo;s a handy shortcut for exception messages and cheating at writing <a href="https://en.wikipedia.org/wiki/Quine_%28computing%29">quines</a> (like this: <code>open+0;print&lt;0&gt;</code>).</p>

<h3 id="help-text">Help text</h3>

<p>We&rsquo;re almost done, but <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> has more tricks up its sleeve. I&rsquo;ll add some basic documentation to this script, in <a href="https://perldoc.perl.org/perlpod.html">Pod</a>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> Getopt::Long <span style="color:#e6db74">&#39;HelpMessage&#39;</span>;
<span style="color:#66d9ef">use</span> Time::Piece;

GetOptions(
  <span style="color:#e6db74">&#39;holder=s&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $holder_name,
  <span style="color:#e6db74">&#39;year=i&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $year <span style="color:#f92672">=</span> year_now()),
  <span style="color:#e6db74">&#39;type=s&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span>(<span style="color:#66d9ef">my</span> $type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;artistic 2.0&#39;</span>),
  <span style="color:#e6db74">&#39;fulltext&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">\</span> <span style="color:#66d9ef">my</span> $fulltext,
  <span style="color:#e6db74">&#39;help&#39;</span>     <span style="color:#f92672">=&gt;</span>   <span style="color:#66d9ef">sub</span> { HelpMessage(<span style="color:#ae81ff">0</span>) },
) <span style="color:#f92672">or</span> HelpMessage(<span style="color:#ae81ff">1</span>);

<span style="color:#75715e"># die unless we got the mandatory argument</span>
HelpMessage(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">unless</span> $holder_name;

print_license ($holder_name, $year, $type, $fulltext);

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">year_now</span>
{
  <span style="color:#66d9ef">my</span> $localtime <span style="color:#f92672">=</span> localtime;
  <span style="color:#66d9ef">return</span> $localtime<span style="color:#f92672">-&gt;</span>year;
}

<span style="color:#75715e"># tbc</span>
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">print_license</span> { <span style="color:#f92672">...</span> }

<span style="color:#75715e">=head1 NAME
</span><span style="color:#75715e">
</span><span style="color:#75715e">license - get license texts at the command line!
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 SYNOPSIS
</span><span style="color:#75715e">
</span><span style="color:#75715e">  --holder,-h     Holder name (required)
</span><span style="color:#75715e">  --year,-y       License year (defaults to current year)
</span><span style="color:#75715e">  --type,-t       License type (defaults to Artistic 2.0)
</span><span style="color:#75715e">  --fulltext,-f   Print the full license text
</span><span style="color:#75715e">  --help,-h       Print this help
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 VERSION
</span><span style="color:#75715e">
</span><span style="color:#75715e">0.01
</span><span style="color:#75715e">
</span><span style="color:#75715e">=cut</span></code></pre></div>
<p>The documentation is pretty minimal, just the program name, synopsis of its arguments and a version number. I&rsquo;ve replaced the print statement with a stub function <code>print_license</code>, which is where the main program would be implemented. I&rsquo;ve replaced the <code>die</code> calls with the <a href="https://metacpan.org/pod/Getopt::Long">Getopt::Long</a> function <code>HelpMessage</code>. This will print a usage help text and exit the program when called. Let&rsquo;s try it out:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ <span style="color:#960050;background-color:#1e0010">./</span>license <span style="color:#f92672">-</span>k
Unknown option: k
Usage:
      <span style="color:#f92672">--</span>holder, <span style="color:#f92672">-</span>h    Holder name (required)
      <span style="color:#f92672">--</span>year, <span style="color:#f92672">-</span>y      License year (defaults to current year)
      <span style="color:#f92672">--</span>type, <span style="color:#f92672">-</span>t      License type (defaults to Artistic <span style="color:#ae81ff">2.0</span>)
      <span style="color:#f92672">--</span>fulltext, <span style="color:#f92672">-</span>f  Print the full license text
      <span style="color:#f92672">--</span>help, <span style="color:#f92672">-</span>h      Print this help</code></pre></div>
<p>Not bad! <code>HelpMessage</code> takes an exit value to return to the OS. If the user passes the argument <code>--help</code> the program should print the usage and exit without error (value zero). However if they don&rsquo;t pass any arguments at all or if they pass any invalid arguments, the same usage text will be printed but the program will exit with 1, indicating that something went wrong.</p>

<p><br />
<em>This article was originally posted on <a href="http://perltricks.com">PerlTricks.com</a>.</em></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/development">development</a></div>
                
                  <div class="tag"><a href="/tags/app">app</a></div>
                
                  <div class="tag"><a href="/tags/terminal">terminal</a></div>
                
                  <div class="tag"><a href="/tags/type_check">type_check</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-david-farrell">
  <div class="col-sm-2">
    
    <a href="/authors/david-farrell/"><div class="circle-avatar" style="background-image:url(/images/author/david-farrell.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/david-farrell/"><h3>David Farrell</h3></a>
    <p>David is the editor of Perl.com. An organizer of the <a href="http://www.meetup.com/The-New-York-Perl-Meetup-Group/">New York Perl Meetup</a>, he works for ZipRecruiter as a software developer, and sometimes <a href="https://twitter.com/perltricks">tweets</a> about Perl and Open Source.</p>
    <h5><a href="/authors/david-farrell/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/article/professional-scripts-are-a-snap-with-getopt--long.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

