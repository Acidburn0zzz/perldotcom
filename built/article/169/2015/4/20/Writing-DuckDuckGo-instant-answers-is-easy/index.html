<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Writing DuckDuckGo instant answers is easy </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The privacy-focused search engine has a helpful community and great tools"/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/article/169/2015/4/20/Writing-DuckDuckGo-instant-answers-is-easy/" />
<meta property="og:title" content="Writing DuckDuckGo instant answers is easy" />
<meta property="og:description" content="The privacy-focused search engine has a helpful community and great tools">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2015-04-04T04:04:04Z" />
<meta property="og:image" content="http://localhost:1313/images/169/thumb_5E030C7A-E6E1-11E4-9A7F-886D1846911D.jpeg" />
<meta property="og:article:tag" content="duckduckgo" />
<meta property="og:article:tag" content="perldoc" />
<meta property="og:article:tag" content="cheatsheet" />
<meta property="og:article:tag" content="app_duckpan" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Writing DuckDuckGo instant answers is easy</h1>
              <p class="blog-post-meta">Apr 20, 2015 by
              
              
                
                
                <a href="#author-bio-david-farrell">David Farrell</a>
              
              </p>
              <img alt="" src="/images/169/5E030C7A-E6E1-11E4-9A7F-886D1846911D.jpeg"/>
                

<p><strong>Editor note:</strong> some of the information in this article is out of date, see our new DuckDuckGo <a href="http://perltricks.com/article/189/2015/8/22/Writing-DuckDuckGo-plugins-just-got-easier">article</a> for details.</p>

<p>A few weeks ago, I attended NYC <a href="http://duckduckgo.ticketleap.com/quackhacknyc/">Quack &amp; Hack</a>, and learned how to write DuckDuckGo instant answers. Instant answers are really cool: they are micro apps that trigger when a user searches for specific terms. For example if you search for <a href="https://duckduckgo.com/?q=help+tmux&amp;ia=answer">help tmux</a>, you&rsquo;ll see a tmux cheatsheet displayed. This is a awesome - you can commit code that will go live on DuckDuckGo.com and the good news is that you don&rsquo;t have to wait until the next Quack &amp; Hack to learn how to write one yourself; DuckDuckGo provide great tools that make it easy.</p>

<h3 id="setting-up-the-development-environment">Setting up the development environment</h3>

<p>DuckDuckGo support several different types of instant answers, but today I&rsquo;m going to focus on creating a cheatsheet, which is displayed by the search engine whenever a user searches for a matching set of keywords.</p>

<p>To get going you&rsquo;ll need Perl 5.18 or higher and have installed <a href="https://metacpan.org/pod/App::duckpan">App::DuckPAN</a>, which you can do with <code>cpan</code> or <code>cpanminus</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ cpan App::DuckPAN
<span style="color:#75715e"># or</span>
$ cpanm App::DuckPAN</code></pre></div>
<p>You&rsquo;ll also need a local copy of DuckDuckGo&rsquo;s goodies instant answers repo <a href="https://github.com/duckduckgo/zeroclickinfo-goodies">repo</a>, which you can clone with Git:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ git clone https:<span style="color:#e6db74">//gi</span>thub<span style="color:#f92672">.</span>com<span style="color:#e6db74">/duckduckgo/</span>zeroclickinfo<span style="color:#f92672">-</span>goodies<span style="color:#f92672">.</span>git</code></pre></div>
<p>With both App::DuckPAN and the goodies repo installed, change into the zeroclickinfo-goodies repo, and launch the duckpan server:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ cd zeroclickinfo<span style="color:#f92672">-</span>goodies
$ duckpan server</code></pre></div>
<p>When you run <code>duckpan server</code>, there will probably be a lot of output, but you should see this:</p>

<pre><code>Checking asset cache...
Starting up webserver...
You can stop the webserver with Ctrl-C
HTTP::Server::PSGI: Accepting connections at http://0:5000/
</code></pre>

<p>If you open your browser and navigate to <code>http://localhost:5000</code>, you&rsquo;ll be greeted with the DuckDuckGo search page (try <code>http://0:5000</code> if localhost doesn&rsquo;t work). Search for &ldquo;help tmux&rdquo; and you should see the same instant answer cheatsheet appear as on the live <a href="https://duckduckgo.com/?q=help+tmux&amp;ia=answer">website</a>.</p>

<h3 id="creating-the-instant-answer">Creating the instant answer</h3>

<p>So now you&rsquo;ve got the development environment setup, you&rsquo;re ready to create an instant answer. I&rsquo;m going to create an instant answer for <code>perldoc</code> (taken from my perldoc <a href="#">article</a>). I can get a headstart on this by creating the skeleton instant answer code with <code>duckpan new</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ duckpan <span style="color:#66d9ef">new</span> PerldocCheatSheet</code></pre></div>
<p>This creates the basic files required for the instant answer:</p>

<pre><code>Created file: lib/DDG/Goodie/PerldocCheatSheet.pm
Created file: t/PerldocCheatSheet.t
Successfully created Goodie: PerldocCheatSheet
</code></pre>

<p>All of the logic for the instant answer is in <code>PerldocCheatSheet.pm</code>, and <code>duckpan</code> has already created a good skeleton:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">package</span> DDG::Goodie::PerldocCheatSheet;
<span style="color:#75715e"># ABSTRACT: Write an abstract here</span>
<span style="color:#75715e"># Start at https://duck.co/duckduckhack/goodie_overview if you are new</span>
<span style="color:#75715e"># to instant answer development</span>

<span style="color:#66d9ef">use</span> DDG::Goodie;

zci answer_type <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;perldoc_cheat_sheeet&#34;</span>;
zci is_cached   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>;

<span style="color:#75715e"># Metadata.  See https://duck.co/duckduckhack/metadata for help in filling out this section.</span>
name <span style="color:#e6db74">&#34;PerldocCheatSheeet&#34;</span>;
description <span style="color:#e6db74">&#34;Succinct explanation of what this instant answer does&#34;</span>;
primary_example_queries <span style="color:#e6db74">&#34;first example query&#34;</span>, <span style="color:#e6db74">&#34;second example query&#34;</span>;
secondary_example_queries <span style="color:#e6db74">&#34;optional -- demonstrate any additional triggers&#34;</span>;
<span style="color:#75715e"># Uncomment and complete: https://duck.co/duckduckhack/metadata#category</span>
<span style="color:#75715e"># category &#34;&#34;;</span>
<span style="color:#75715e"># Uncomment and complete: https://duck.co/duckduckhack/metadata#topics</span>
<span style="color:#75715e"># topics &#34;&#34;;</span>
code_url <span style="color:#e6db74">&#34;https://github.com/duckduckgo/zeroclickinfo-goodies/blob/master/lib/DDG/Goodie/PerldocCheatSheet.pm&#34;</span>;
attribution github <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#34;GitHubAccount&#34;</span>, <span style="color:#e6db74">&#34;Friendly Name&#34;</span>],
            twitter <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;twitterhandle&#34;</span>;

<span style="color:#75715e"># Triggers</span>
triggers any <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;triggerWord&#34;</span>, <span style="color:#e6db74">&#34;trigger phrase&#34;</span>;

<span style="color:#75715e"># Handle statement</span>
handle remainder <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">sub</span> {

    <span style="color:#75715e"># optional - regex guard</span>
    <span style="color:#75715e"># return unless qr/^\w+/;</span>

    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">unless</span> $_; <span style="color:#75715e"># Guard against &#34;no answer&#34;</span>

    <span style="color:#66d9ef">return</span> $_;
};

<span style="color:#ae81ff">1</span>;</code></pre></div>
<p>I&rsquo;ll fill in the answers for the abstract, <a href="https://duck.co/duckduckhack/metadata">metadata</a> and <a href="https://duck.co/duckduckhack/goodie_triggers">triggers</a>, and the <code>handle</code> subroutine:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">package</span> DDG::Goodie::PerldocCheatSheet;
<span style="color:#75715e"># ABSTRACT: A cheat sheet for perldoc, the Perl documentation program</span>

<span style="color:#66d9ef">use</span> DDG::Goodie;

zci answer_type <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;perldoc_cheat_sheet&#34;</span>;
zci is_cached   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>;

<span style="color:#75715e"># Metadata</span>
name <span style="color:#e6db74">&#34;PerldocCheatSheet&#34;</span>;
source <span style="color:#e6db74">&#34;http://perltricks.com/article/155/2015/2/26/Hello-perldoc--productivity-booster&#34;</span>;
description <span style="color:#e6db74">&#34;A cheat sheet for perldoc, the Perl documentation program&#34;</span>;
primary_example_queries <span style="color:#e6db74">&#34;help perldoc&#34;</span>, <span style="color:#e6db74">&#34;perldoc cheatsheet&#34;</span>, <span style="color:#e6db74">&#34;perldoc commands&#34;</span>, <span style="color:#e6db74">&#34;perldoc ref&#34;</span>;
category <span style="color:#e6db74">&#34;programming&#34;</span>;
topics <span style="color:#e6db74">qw/computing geek programming sysadmin/</span>;
code_url
  <span style="color:#e6db74">&#34;https://github.com/duckduckgo/zeroclickinfo-goodies/blob/master/lib/DDG/Goodie/PerldocCheatSheet.pm&#34;</span>;
attribution github  <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#34;dnmfarrell&#34;</span>, <span style="color:#e6db74">&#34;David Farrell&#34;</span>],
            twitter <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;perltricks&#34;</span>,
            web     <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;http://perltricks.com&#39;</span>;

<span style="color:#75715e"># Triggers</span>
triggers startend <span style="color:#f92672">=&gt;</span> (
        <span style="color:#e6db74">&#34;perldoc&#34;</span>,
        <span style="color:#e6db74">&#34;perldoc help&#34;</span>,
        <span style="color:#e6db74">&#34;help perldoc&#34;</span>,
        <span style="color:#e6db74">&#34;perldoc cheat sheet&#34;</span>,
        <span style="color:#e6db74">&#34;perldoc cheatsheet&#34;</span>,
        <span style="color:#e6db74">&#34;perldoc commands&#34;</span>,
        <span style="color:#e6db74">&#34;perldoc ref&#34;</span>);

<span style="color:#75715e"># Handle statement</span>
<span style="color:#66d9ef">my</span> $HTML <span style="color:#f92672">=</span> share(<span style="color:#e6db74">&#34;perldoc_cheat_sheet.html&#34;</span>)<span style="color:#f92672">-&gt;</span>slurp(iomode <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;&lt;:encoding(UTF-8)&#39;</span>);
<span style="color:#66d9ef">my</span> $TEXT<span style="color:#f92672">=</span> share(<span style="color:#e6db74">&#34;perldoc_cheat_sheet.txt&#34;</span>)<span style="color:#f92672">-&gt;</span>slurp(iomode <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;&lt;:encoding(UTF-8)&#39;</span>);

handle remainder <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">sub</span> {
    <span style="color:#66d9ef">return</span>
        heading <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;Perldoc Cheat Sheet&#39;</span>,
        html    <span style="color:#f92672">=&gt;</span> $HTML,
        answer  <span style="color:#f92672">=&gt;</span> $TEXT,
};

<span style="color:#ae81ff">1</span>;</code></pre></div>
<p>The handle subroutine will return a plain text and an HTML version of the cheat sheet to the user. The <code>share</code> function loads static files from the <code>share/goodie/</code> directory. These files should be created in the <code>share/goodie/perldoc_cheat_sheet/</code> directory, and it is <strong>essential</strong> that the filenames are lowercased versions of the instant answer name, separated by underscores. So &ldquo;PerldocCheatSheet&rdquo; becomes &ldquo;perldoc_cheat_sheet&rdquo;. You can view the files on <a href="https://github.com/dnmfarrell/zeroclickinfo-goodies/tree/perldoc/share/goodie/perldoc_cheat_sheet">GitHub</a>. Note that the CSS file is not referenced directly by any code: it is automagically loaded by DuckDuckGo (this is why the directory and filename must be correct). I copied the CSS from the tmux <a href="https://github.com/duckduckgo/zeroclickinfo-goodies/tree/master/share/goodie/tmux_cheat_sheet">example</a>, it provides two columns of text that will display side-by-side or wrap to a single column if the screen width is too narrow.</p>

<h3 id="testing-the-instant-answer">Testing the instant answer</h3>

<p>The quickest way to test that the instant answer is working, is with the <code>duckpan query</code> command. I can run it in the terminal:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ duckpan query</code></pre></div>
<p>This launches an interactive command line program. I can enter one of the triggers for my perldoc instant answer, and see if the server responds as expected:</p>

<pre><code>Query: perldoc ref
  You entered: perldoc ref
---
DDG::ZeroClickInfo  {
    Parents       WWW::DuckDuckGo::ZeroClickInfo
    public methods (4) : DOES, has_structured_answer, new, structured_answer
    private methods (0)
    internals: {
        answer        &quot;perldoc [option]

Module Options
--------------
...
</code></pre>

<p>Looking good! (I&rsquo;ve cut the output as it&rsquo;s verbose). The next thing I can try is a browser test using <code>duckpan server</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ duckpan server</code></pre></div>
<p>Then I point my browser at <code>http://localhost:5000</code>, and enter a trigger query for the instant answer. That works as well. Finally, I need to complete a unit test script for the instant answer. I&rsquo;ve already got a skeleton test script which was created by <code>duckpan new</code> at the start:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> Test::More;
<span style="color:#66d9ef">use</span> DDG::Test::Goodie;

zci answer_type <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;perldoc_cheat_sheet&#34;</span>;
zci is_cached   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>;

ddg_goodie_test(
    [<span style="color:#e6db74">qw( DDG::Goodie::PerldocCheatSheeet )</span>],
    <span style="color:#75715e"># At a minimum, be sure to include tests for all:</span>
    <span style="color:#75715e"># - primary_example_queries</span>
    <span style="color:#75715e"># - secondary_example_queries</span>
    <span style="color:#e6db74">&#39;example query&#39;</span> <span style="color:#f92672">=&gt;</span> test_zci(<span style="color:#e6db74">&#39;query&#39;</span>),
    <span style="color:#75715e"># Try to include some examples of queries on which it might</span>
    <span style="color:#75715e"># appear that your answer will trigger, but does not.</span>
    <span style="color:#e6db74">&#39;bad example query&#39;</span> <span style="color:#f92672">=&gt;</span> undef,
);

done_testing;</code></pre></div>
<p>I&rsquo;ll update the test file, and add some comments:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>

<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> Test::More;
<span style="color:#66d9ef">use</span> DDG::Test::Goodie;

zci answer_type <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;perldoc_cheat_sheet&#34;</span>;
zci is_cached   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>;

<span style="color:#75715e"># all responses for this goodie are the same</span>
<span style="color:#66d9ef">my</span> @test_zci <span style="color:#f92672">=</span> (
  <span style="color:#75715e"># regex for the plain text response</span>
  <span style="color:#e6db74">qr/^perldoc \[option\].*Module Options.*Search Options.*Common Options.*Help.*$/</span>s,
  <span style="color:#75715e"># check the heading</span>
  heading <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;Perldoc Cheat Sheet&#39;</span>,
  <span style="color:#75715e"># check the html pattern</span>
  html    <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">qr#$#</span>s,
);  

ddg_goodie_test(
    <span style="color:#75715e"># name of goodie to test</span>
    [<span style="color:#e6db74">&#39;DDG::Goodie::PerldocCheatSheet&#39;</span>],

    <span style="color:#75715e"># At a minimum, be sure to include tests for all:</span>
    <span style="color:#75715e"># - primary_example_queries</span>
    <span style="color:#75715e"># - secondary_example_queries</span>
    <span style="color:#e6db74">&#39;help perldoc&#39;</span>        <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#39;help perldoc&#39;</span>        <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;perldoc&#34;</span>             <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;perldoc help&#34;</span>        <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;help perldoc&#34;</span>        <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;perldoc cheat sheet&#34;</span> <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;perldoc cheatsheet&#34;</span>  <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),
    <span style="color:#e6db74">&#34;perldoc commands&#34;</span>    <span style="color:#f92672">=&gt;</span> test_zci(@test_zci),

    <span style="color:#75715e"># Try to include some examples of queries on which it might</span>
    <span style="color:#75715e"># appear that your answer will trigger, but does not.</span>
    <span style="color:#e6db74">&#39;perl doc help&#39;</span>     <span style="color:#f92672">=&gt;</span> undef,
    <span style="color:#e6db74">&#39;perl documentaton&#39;</span> <span style="color:#f92672">=&gt;</span> undef,
    <span style="color:#e6db74">&#39;perl faq&#39;</span>          <span style="color:#f92672">=&gt;</span> undef,
    <span style="color:#e6db74">&#39;perl help&#39;</span>         <span style="color:#f92672">=&gt;</span> undef,
);

done_testing;</code></pre></div>
<p>Most of this is easy to follow; but there are a few gotchas; <code>@test_zci</code> is a variable that stores the expected output from a successful trigger of the instant answer. It&rsquo;s a bit of a hack: its passed to the <code>test_zci()</code> function which expects a scalar which matches the plain text response, followed by 2 key/pairs, one for the heading and one for the HTML response (see the <a href="https://duck.co/duckduckhack/test_files">docs</a> for more detail). I can run this script at the command line:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$ prove <span style="color:#f92672">-</span>I t<span style="color:#f92672">/</span>PerldocCheatSheet<span style="color:#f92672">.</span>t</code></pre></div>
<pre><code>t/PerldocCheatSheet.t .. ok    
All tests successful.
Files=1, Tests=12,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.17 cusr  0.01 csys =  0.20 CPU)
Result: PASS
</code></pre>

<p>All the tests pass, so I&rsquo;m ready to issue a pull request to the DuckDuckGo community!</p>

<h3 id="where-to-go-for-help">Where to go for help</h3>

<p>Whilst the DuckDuckGo tools are great, there is also good <a href="http://duckduckhack.com/">documentation</a> available and a friendly community supporting development when you need it. I spent some time on the Gitter <a href="https://gitter.im/duckduckgo/zeroclickinfo-goodies?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge">chatroom</a> for the instant answers repo, and the people there were friendly and responsive (and more importantly, they have commit bits :).</p>

<p><br />
<em>This article was originally posted on <a href="http://perltricks.com">PerlTricks.com</a>.</em></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/community">community</a></div>
                
                  <div class="tag"><a href="/tags/duckduckgo">duckduckgo</a></div>
                
                  <div class="tag"><a href="/tags/perldoc">perldoc</a></div>
                
                  <div class="tag"><a href="/tags/cheatsheet">cheatsheet</a></div>
                
                  <div class="tag"><a href="/tags/app_duckpan">app_duckpan</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-david-farrell">
  <div class="col-sm-2">
    
    <a href="/authors/david-farrell/"><div class="circle-avatar" style="background-image:url(/images/author/david-farrell.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/david-farrell/"><h3>David Farrell</h3></a>
    <p>David is the editor of Perl.com. An organizer of the <a href="http://www.meetup.com/The-New-York-Perl-Meetup-Group/">New York Perl Meetup</a>, he works for ZipRecruiter as a software developer, and sometimes <a href="https://twitter.com/perltricks">tweets</a> about Perl and Open Source.</p>
    <h5><a href="/authors/david-farrell/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/article/writing-duckduckgo-instant-answers-is-easy.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

