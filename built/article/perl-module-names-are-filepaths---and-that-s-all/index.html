<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> Perl module names are filepaths - and that&#39;s all </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Understand how Perl loads code"/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/article/perl-module-names-are-filepaths---and-that-s-all/" />
<meta property="og:title" content="Perl module names are filepaths - and that&#39;s all" />
<meta property="og:description" content="Understand how Perl loads code">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2016-12-12T12:12:12Z" />
<meta property="og:image" content="http://localhost:1313/images/author/david-farrell.jpg" />
<meta property="og:article:tag" content="cpan" />
<meta property="og:article:tag" content="pause" />
<meta property="og:article:tag" content="cuckoo" />
<meta property="og:article:tag" content="module" />
<meta property="og:article:tag" content="package" />
<meta property="og:article:tag" content="perlmod" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">Perl module names are filepaths - and that&#39;s all</h1>
              <p class="blog-post-meta">Dec 14, 2016 by
              
              
                
                
                <a href="#author-bio-david-farrell">David Farrell</a>
              
              </p>
              <img alt="" src=""/>
                

<p>It&rsquo;s common in Perl parlance to treat the words &ldquo;module&rdquo; and &ldquo;package&rdquo; as synonyms, and in practice they almost refer to the same thing. A module name is shorthand for a filepath, but a package name refers to a namespace within the Perl symbol table. It&rsquo;s easy to forget this because module names and packages are written in the same colon-separated notation, and conventionally we give packages the same name as the module filepath. For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">require</span> Test::More; <span style="color:#75715e"># load Test/More.pm</span>

Test::More::ok <span style="color:#ae81ff">1</span>; <span style="color:#75715e"># call the ok function in the Test::More namespace</span></code></pre></div>
<p>In this example, <code>Test::More</code> appears twice, but it really refers to two separate things; the first is a filepath, the second is a symbol namespace. They do not have to have the same name. Unfortunately <a href="https://perldoc.perl.org/perlmod.html">perlmod</a> perpetuates this myth:</p>

<blockquote>
<p>A module is just a set of related functions in a library file, i.e., a
Perl package with the same name as the file.</p>
</blockquote>

<h3 id="demo">Demo</h3>

<p>I&rsquo;ll make a quick module called &ldquo;ACME::Foo::Bar&rdquo;, <code>lib/ACME/Foo/Bar.pm</code> looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">package</span> Whatever2;

<span style="color:#66d9ef">our</span> $VERSION <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.01</span>;

<span style="color:#75715e">=head1 NAME
</span><span style="color:#75715e">
</span><span style="color:#75715e">ACME::Foo::Bar - proof that module names and packages are not the same
</span><span style="color:#75715e">
</span><span style="color:#75715e">=cut</span>

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">me</span> { __PACKAGE__ }

<span style="color:#ae81ff">1</span>;</code></pre></div>
<p>Note that the package name <code>Whatever2</code> is completely different to the module name <code>ACME::Foo::Bar</code>. At the terminal I can test it out:</p>

<pre><code>$ perl -Ilib -MACME::Foo::Bar -E 'say Whatever2::me'
Whatever2
</code></pre>

<p>Perl happily loads the ACME::Foo::Bar module and the <code>Whatever2</code> namespace (I originally used <code>Whatever</code> as the package name, but there is another package on CPAN with that name).</p>

<h3 id="as-a-distribution">As a distribution</h3>

<p>By adding a makefile, I can make this an installable distribution, <code>Makefile.PL</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> <span style="color:#ae81ff">5.008000</span>;

<span style="color:#66d9ef">use</span> ExtUtils::MakeMaker;
WriteMakefile(
  NAME           <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;ACME::Foo::Bar&#39;</span>,
  VERSION_FROM   <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;lib/ACME/Foo/Bar.pm&#39;</span>,
  ABSTRACT_FROM  <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;lib/ACME/Foo/Bar.pm&#39;</span>,
  AUTHOR         <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;David Farrell&#39;</span>,
  LICENSE        <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;perl5&#39;</span>,
  MIN_PERL_VERSION <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;5.008000&#34;</span>,
);</code></pre></div>
<p>Hell, I can add some tests while we&rsquo;re at it, <code>t/whatever.t</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/perl</span>
<span style="color:#66d9ef">use</span> Test::More;

<span style="color:#66d9ef">BEGIN</span> { use_ok <span style="color:#e6db74">&#39;ACME::Foo::Bar&#39;</span>, <span style="color:#e6db74">&#39;import module&#39;</span> }

is Whatever2::me, <span style="color:#e6db74">&#39;Whatever2&#39;</span>, <span style="color:#e6db74">&#39;me() returns package name&#39;</span>;

done_testing;</code></pre></div>
<p>Installation is easy:</p>

<pre><code>$ perl Makefile.PL
Generating a Unix-style Makefile
Writing Makefile for ACME::Foo::Bar
Writing MYMETA.yml and MYMETA.json
$ make
cp README.pod blib/lib/ACME/Foo/README.pod
cp lib/ACME/Foo/Bar.pm blib/lib/ACME/Foo/Bar.pm
Manifying 2 pod documents
$ make test
PERL_DL_NONLAZY=1 &quot;/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0&quot; &quot;-MExtUtils::Command::MM&quot; &quot;-MTest::Harness&quot; &quot;-e&quot; &quot;undef *Test::Harness::Switches; test_harness(0, 'blib/lib', 'blib/arch')&quot; t/*.t
t/whatever.t .. ok
All tests successful.
Files=1, Tests=2,  0 wallclock secs ( 0.01 usr  0.00 sys +  0.01 cusr  0.00 csys =  0.02 CPU)
Result: PASS
$ make install
Manifying 2 pod documents
Installing /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/site_perl/5.22.0/ACME/Foo/Bar.pm
Installing /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/site_perl/5.22.0/ACME/Foo/README.pod
Installing /home/dfarrell/.plenv/versions/5.22.0/man/man3/ACME::Foo::README.3
Installing /home/dfarrell/.plenv/versions/5.22.0/man/man3/ACME::Foo::Bar.3
Appending installation info to /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/5.22.0/x86_64-linux/perllocal.pod
</code></pre>

<p>Now I can test the installed version at the terminal:</p>

<pre><code>$ perl -MACME::Foo::Bar -E 'say Whatever2::me'
Whatever2
</code></pre>

<p>Tada! Works like a charm.</p>

<h3 id="toolchain-issues">Toolchain issues</h3>

<p>So now I have a distribution with a module containing a different package name, how well does it work with the CPAN toolchain? I&rsquo;ve uploaded the distribution to CPAN, and you can view it on <a href="https://metacpan.org/release/DFARRELL/ACME-Foo-Bar-0.02">metacpan</a>, and its CPAN Testers <a href="http://www.cpantesters.org/distro/A/ACME-Foo-Bar.html?oncpan=1&amp;distmat=1&amp;version=0.02&amp;grade=2">results</a> are looking good.</p>

<p>There is one big issue though: the PAUSE indexer. PAUSE is the server which maintains CPAN data and its packages <a href="https://cpan.metacpan.org/modules/02packages.details.txt">list</a> is an index mapping package names to distributions. The indexer requires that a distribution has a module with a matching package name in it. This makes sense as it discourages users from uploading conflicting package names into different distributions.</p>

<p>CPAN clients lookup the package name in the packages list to know which distribution to install, so if my <code>Whatever2</code> package isn&rsquo;t in the list, I can&rsquo;t install <code>ACME::Foo::Bar</code> that way:</p>

<pre><code>$ cpan Whatever2
CPAN: Storable loaded ok (v2.53)
Reading '/home/dfarrell/.local/share/.cpan/Metadata'
  Database was generated on Thu, 15 Dec 2016 13:53:43 GMT
Warning: Cannot install Whatever2, don't know what it is.
Try the command

    i /Whatever2/

to find objects with matching identifiers.
</code></pre>

<p>But referencing it by its distribution name works fine:</p>

<pre><code>$ cpan DFARRELL/ACME-Foo-Bar-0.02.tar.gz
--&gt; Working on DFARRELL/ACME-Foo-Bar-0.02.tar.gz
Fetching http://www.cpan.org/authors/id/D/DF/DFARRELL/ACME-Foo-Bar-0.02.tar.gz ... OK
Configuring ACME-Foo-Bar-0.02 ... OK
Building and testing ACME-Foo-Bar-0.02 ... OK
Successfully installed ACME-Foo-Bar-0.02
1 distribution installed
</code></pre>

<p>One exception to this is <a href="https://metacpan.org/pod/App::cpanminus">cpanm</a>, which falls back on a file search of the metacpan API if it doesn&rsquo;t find the package in <a href="http://cpanmetadb.plackperl.org/">CPAN meta DB</a>. So this works:</p>

<pre><code>$ cpanm Whatever2
</code></pre>

<h3 id="summary">Summary</h3>

<p>Neil Bowers has written an excellent <a href="http://neilb.org/2015/09/05/cpan-glossary.html#cuckoo-package">glossary</a> of CPAN terms. Packages with a namespace different to their module name are known as &lsquo;cuckoo&rsquo; packages.</p>

<p>As conventions go, using the same package and module name is useful and recommended. Especially if the code is going to be shared via CPAN or otherwise. But it&rsquo;s good to know that they&rsquo;re not the same thing.</p>

<p><br><strong>Updates</strong>:<em>Changed example to use &ldquo;require&rdquo; instead of &ldquo;use&rdquo;, as &ldquo;use&rdquo; calls &ldquo;import()&rdquo; on the namespace. Changed the package name to &ldquo;Whatever2&rdquo; to avoid a CPAN conflict. Thanks to Perlancar, Aristotle and Grinnz for the feedback on /r/perl. 2016-12-15</em></p>

<p><br />
<em>This article was originally posted on <a href="http://perltricks.com">PerlTricks.com</a>.</em></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/development">development</a></div>
                
                  <div class="tag"><a href="/tags/cpan">cpan</a></div>
                
                  <div class="tag"><a href="/tags/pause">pause</a></div>
                
                  <div class="tag"><a href="/tags/cuckoo">cuckoo</a></div>
                
                  <div class="tag"><a href="/tags/module">module</a></div>
                
                  <div class="tag"><a href="/tags/package">package</a></div>
                
                  <div class="tag"><a href="/tags/perlmod">perlmod</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-david-farrell">
  <div class="col-sm-2">
    
    <a href="/authors/david-farrell/"><div class="circle-avatar" style="background-image:url(/images/author/david-farrell.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/david-farrell/"><h3>David Farrell</h3></a>
    <p>David is the editor of Perl.com. An organizer of the <a href="http://www.meetup.com/The-New-York-Perl-Meetup-Group/">New York Perl Meetup</a>, he works for ZipRecruiter as a software developer, and sometimes <a href="https://twitter.com/perltricks">tweets</a> about Perl and Open Source.</p>
    <h5><a href="/authors/david-farrell/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/article/perl-module-names-are-filepaths---and-that-s-all.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

