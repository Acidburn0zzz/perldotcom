<!DOCTYPE html>
<html lang="en-us">
  <head>
  <title> How to upload a script to CPAN </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Share your code with others via CPAN"/>
  <meta name="robots" content="index, follow">
  <meta name="google-site-verification" content="TZowffo_LX2mmsw2DbeNNbukCMnIOA8T-6CMJPiYllI" />

<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@PerlFoundation">
<meta property="og:url" content="http://localhost:1313/article/how-to-upload-a-script-to-cpan/" />
<meta property="og:title" content="How to upload a script to CPAN" />
<meta property="og:description" content="Share your code with others via CPAN">
<meta property="og:site_name" content="Perl.com" />

<meta property="og:type" content="article" />
<meta property="og:article:published_time" content="2016-11-11T11:11:11Z" />
<meta property="og:image" content="http://localhost:1313/images/author/david-farrell.jpg" />
<meta property="og:article:tag" content="distribution" />
<meta property="og:article:tag" content="metacpan" />
<meta property="og:article:tag" content="cpan-testers" />
<meta property="og:article:tag" content="toolchain" />


  <link rel="icon" href="/favicon.ico">
  <link href="/article/index.xml" rel="alternate" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/article/index.xml" rel="feed" type="application/rss+xml" title="Perl.com - programming news, code and culture" />
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/css/perldotcom.css"/>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50555-22', 'auto');
ga('create', 'UA-85734801-2', 'auto', 'editor');
ga('send', 'pageview');
ga('editor.send', 'pageview');
</script>

</head>
<body>

<div class="container-fluid full-wdith antonio">
 <div class="row">
  <div class="navbar-inverse" style="border-radius:none !important" role="navigation">
    <div class="container-fluid">
      <ul class="nav navbar-nav pull-right follow">
          <li>MORE:</li>
          <li><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a><li>
          <li><a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a><li>
          <li><a href="/article/index.xml" />
              <img src="/images/site/rss_20.png" alt="rss"></a></li>
          <li><a href="https://github.com/tpf/perldotcom" />
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></li>
      </ul>
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
          <a class="navbar-nav" href="/">
            <div class="header-logo">Perl.com</div>
          </a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li><a href="/about">
              <div class="circle">
                <img src="/images/site/perl-camel.png" alt="" />
              </div>
                  &nbsp;&nbsp;ABOUT</a>
          </li>
          <li><a href="/authors">
              <div class="circle">
                  <span class="glyphicon glyphicon-user txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;AUTHORS</a>
          </li>
          <li><a href="/categories">
              <div class="circle">
                  <span class="glyphicon glyphicon-folder-open txt-blue-major" aria-hidden="true"></span>
              </div>
                  &nbsp;&nbsp;CATEGORIES</a>
          </li>
          <li><a href="/tags">
              <div class="circle">
                <span class="txt-blue-major" aria-hidden="true"><strong>#</strong></span>
              </div>
                  &nbsp;&nbsp;TAGS</a>
          </li>
          <li>
            <form class="search" name="ddg" action="https://duckduckgo.com/" method="get">
              <input type="text" name ="q" placeholder="SEARCH" />
              <input type="hidden" value="perl.com" name="sites" />
            </form>
          </li>
        </ul>
      </div>
    </div>
  </div>
 </div>
</div>


  <section id="content" role="main">
    <section class="entry-content">
      <div class="container">
        <div class="row">
          <div class="col-md-9">
            <div class="row">
              <article class="fulltext">
              <h1 class="blog-post-title">How to upload a script to CPAN</h1>
              <p class="blog-post-meta">Nov 14, 2016 by
              
              
                
                
                <a href="#author-bio-david-farrell">David Farrell</a>
              
              </p>
              <img alt="" src=""/>
                

<p>If you&rsquo;ve got a Perl script that does something useful, you might want to put it on CPAN. Becoming a CPAN author is a rite-of-passage for Perl programmers, you&rsquo;ll learn about the CPAN infrastructure and sharing code is a nice thing to do. Within a few minutes of uploading a distribution to CPAN, it&rsquo;s indexed and installable by anyone with a CPAN client, which is pretty incredible.</p>

<p>So let&rsquo;s say I&rsquo;ve got this Perl script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!/usr/bin/env perl</span>
<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> DateTime;

<span style="color:#66d9ef">my</span> $text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;bar&#39;</span>;
<span style="color:#66d9ef">my</span> $dt <span style="color:#f92672">=</span> DateTime<span style="color:#f92672">-&gt;</span>now;

<span style="color:#66d9ef">if</span> ($dt<span style="color:#f92672">-&gt;</span>mon <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $dt<span style="color:#f92672">-&gt;</span>day <span style="color:#f92672">==</span> <span style="color:#ae81ff">31</span>) {
   $text <span style="color:#f92672">=</span> reverse $text;
}

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$text\n&#34;</span>;
exit <span style="color:#ae81ff">0</span>;</code></pre></div>
<p>It usually prints &ldquo;bar&rdquo;, but on January 31, <a href="https://www.daysoftheyear.com/days/backward-day/">National Backward day</a>, it prints &ldquo;rab&rdquo;. I&rsquo;ll take you step-by-step through the process of putting it on CPAN.</p>

<h3 id="setup-your-distribution-directory">Setup your distribution directory</h3>

<p>An upload to CPAN is called a distribution, and each one contains several files, so I need to make a directory to contain all of the files I&rsquo;m going to create. As most applications are uploaded under the namespace <code>App</code>, that&rsquo;s what I&rsquo;ll use too:</p>

<pre><code>$ mkdir App-foo
$ cd App-foo
</code></pre>

<p>This is the root project directory. Now I&rsquo;m going to make a few subdirectories:</p>

<pre><code>$ mkdir script
$ mkdir -p lib/App
</code></pre>

<p><code>lib/App</code> is a parent directory for the stub module that we&rsquo;ll create shortly. The <code>script</code> directory is where I&rsquo;ll place the <code>foo</code> script.</p>

<h3 id="prepare-the-script-for-cpan">Prepare the script for CPAN</h3>

<p>I&rsquo;ll copy my script to <code>script/foo</code>. One change I like to make my CPAN scripts is the shebang line. For my personal scripts I typically use:</p>

<pre><code>#!/usr/bin/env perl
</code></pre>

<p>The advantage of this is by calling <code>env</code> the Perl that is executed can be changed by updating my <code>PATH</code>. This is great when you&rsquo;re running perlbrew or plenv. However not everyone manages multiple installations of Perl this way. Instead, I like to use:</p>

<pre><code>#!perl
</code></pre>

<p>When the distribution is installed, the shebang line is automatically changed to the absolute path of the Perl executable used to install the distribution, like this:</p>

<pre><code>#!/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0
</code></pre>

<p>You can also use <code>#!/usr/bin/perl</code> and it will be overwritten by the install process. One reason I like <code>#!perl</code> is that it won&rsquo;t work without either installing the script or specifying the perl to run it with. This avoids mistakes like accidentally running the script with system Perl.</p>

<p>I should also add some documentation, so the final script looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#!perl</span>
<span style="color:#66d9ef">use</span> strict;
<span style="color:#66d9ef">use</span> warnings;
<span style="color:#66d9ef">use</span> DateTime;

<span style="color:#66d9ef">my</span> $text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;bar&#39;</span>;
<span style="color:#66d9ef">my</span> $dt <span style="color:#f92672">=</span> DateTime<span style="color:#f92672">-&gt;</span>now;

<span style="color:#66d9ef">if</span> ($dt<span style="color:#f92672">-&gt;</span>mon <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> $dt<span style="color:#f92672">-&gt;</span>day <span style="color:#f92672">==</span> <span style="color:#ae81ff">31</span>) {
   $text <span style="color:#f92672">=</span> reverse $text;
}

<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$text\n&#34;</span>;
exit <span style="color:#ae81ff">0</span>;

<span style="color:#75715e">=head1 NAME
</span><span style="color:#75715e">
</span><span style="color:#75715e">foo - print bar, usually
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 DESCRIPTION
</span><span style="color:#75715e">
</span><span style="color:#75715e">A simple script which usually prints C&lt;bar&gt;. On national backwards day
</span><span style="color:#75715e">(January 31), it prints C&lt;rab&gt;. This distribution is used to show others
</span><span style="color:#75715e">how to prepare a script for CPAN.
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 SYNOPSIS
</span><span style="color:#75715e">
</span><span style="color:#75715e">  $ foo
</span><span style="color:#75715e">  bar
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 AUTHOR
</span><span style="color:#75715e">
</span><span style="color:#75715e">David Farrell
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 LICENSE
</span><span style="color:#75715e">
</span><span style="color:#75715e">FreeBSD
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 INSTALLATION
</span><span style="color:#75715e">
</span><span style="color:#75715e">Using C&lt;cpan&gt;:
</span><span style="color:#75715e">
</span><span style="color:#75715e">    $ cpan App::foo
</span><span style="color:#75715e">
</span><span style="color:#75715e">Manual install:
</span><span style="color:#75715e">
</span><span style="color:#75715e">    $ perl Makefile.PL
</span><span style="color:#75715e">    $ make
</span><span style="color:#75715e">    $ make install
</span><span style="color:#75715e">
</span><span style="color:#75715e">=cut</span></code></pre></div>
<p>I&rsquo;ve included installation instructions here, you&rsquo;ll see why later.</p>

<h3 id="make-a-stub-module">Make a stub module</h3>

<p>The CPAN toolchain requires at least one package in every distribution<sup>1</sup>, so I&rsquo;m going to make a stub <code>lib/App/foo.pm</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">package</span> App::foo;

<span style="color:#66d9ef">our</span> $VERSION <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.01</span>;

<span style="color:#75715e">=head1 NAME
</span><span style="color:#75715e">
</span><span style="color:#75715e">App::foo - an app that usually prints &#34;bar&#34;
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 DESCRIPTION
</span><span style="color:#75715e">
</span><span style="color:#75715e">This is a stub module, see F&lt;script/foo&gt; for details of the app.
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 AUTHOR
</span><span style="color:#75715e">
</span><span style="color:#75715e">David Farrell
</span><span style="color:#75715e">
</span><span style="color:#75715e">=head1 LICENSE
</span><span style="color:#75715e">
</span><span style="color:#75715e">FreeBSD
</span><span style="color:#75715e">
</span><span style="color:#75715e">=cut</span>

<span style="color:#ae81ff">1</span>;</code></pre></div>
<p>This stub module does a couple of important things: having the package means CPAN can index the module and it will be searchable on <a href="https://metacpan.org/">metacpan</a> and installable by CPAN clients like <code>cpan</code> and <code>cpanm</code>. It sets the distribution version number and it includes some basic documentation to point users towards the <code>foo</code> script, which is the meat and potatoes of this distribution.</p>

<p><br/><sup>1</sup> You can trick CPAN by editing the META files and not providing a Perl module. Check out <a href="https://metacpan.org/pod/stasis">stasis</a> for an example of this. The downside is it&rsquo;s not clear what other tools in the Perl toolchain might break without a real package. Not recommended.</p>

<h3 id="create-a-makefile-pl">Create a Makefile.PL</h3>

<p>The other file we need is <code>Makefile.PL</code>. This is a Perl script which will create the Makefile that builds, tests and installs the module. Later I&rsquo;ll use some of the built-in routines in the Perl toolchain to use our Makefile.PL to do a bit more than that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> <span style="color:#ae81ff">5.008004</span>;
<span style="color:#66d9ef">use</span> ExtUtils::MakeMaker;

WriteMakefile(
  NAME             <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;App::foo&#39;</span>,
  VERSION_FROM     <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;lib/App/foo.pm&#39;</span>,
  ABSTRACT_FROM    <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;lib/App/foo.pm&#39;</span>,
  AUTHOR           <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;David Farrell&#39;</span>,
  LICENSE          <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;freebsd&#39;</span>,
  MIN_PERL_VERSION <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;5.008004&#39;</span>,
  EXE_FILES        <span style="color:#f92672">=&gt;</span> [<span style="color:#e6db74">&#39;script/foo&#39;</span>],
  PREREQ_PM        <span style="color:#f92672">=&gt;</span> {
    <span style="color:#e6db74">&#39;strict&#39;</span>   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#39;warnings&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>,
    <span style="color:#e6db74">&#39;DateTime&#39;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;0.37&#39;</span>,
  },
  (eval { ExtUtils::MakeMaker<span style="color:#f92672">-&gt;</span>VERSION(<span style="color:#ae81ff">6.46</span>) } ? (META_MERGE <span style="color:#f92672">=&gt;</span> {
      <span style="color:#e6db74">&#39;meta-spec&#39;</span> <span style="color:#f92672">=&gt;</span> { version <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2</span> },
      resources <span style="color:#f92672">=&gt;</span> {
          repository <span style="color:#f92672">=&gt;</span> {
              type <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;git&#39;</span>,
              url  <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;https://github.com/dnmfarrell/foo.git&#39;</span>,
              web  <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#39;https://github.com/dnmfarrell/foo&#39;</span>,
          },
      }})
   : ()
  ),
);</code></pre></div>
<p>This <code>Makefile.PL</code> script uses <a href="https://metacpan.org/pod/ExtUtils::MakeMaker">ExtUtils::MakeMaker</a>. Right at the top of the script the statement <code>use 5.008004</code> ensures this script can only be run by Perl version 5.8.4 or higher. The <code>MINIMUM_PERL_VERSION</code> entry is there so CPAN clients and services like CPAN testers will know what minimum Perl version is required to use the distribution.</p>

<p>You can see I&rsquo;ve set the version and abstract text to come from the stub module. I&rsquo;ve set the license to be FreeBSD, but there are many <a href="https://metacpan.org/pod/CPAN::Meta::Spec#license">others</a> that are accepted. Both the license and minimum Perl version entries are newer options that may generate warnings in older versions of ExtUtils::MakeMaker - that&rsquo;s fine, they&rsquo;ll be ignored and the build can continue regardless.</p>

<p>The <code>EXE_FILES</code> line is important; it will make sure the script is copied to an executable directory on installation. <code>PREREQ_PM</code> is a hashref of the runtime modules used by the script. In this case the first version of <a href="https://metacpan.org/pod/DateTime">DateTime</a> that supported the <code>mon()</code> method used in the script was 0.37 (technically <code>mon()</code> is an alias that I could switch to <code>month()</code> but that would make for a less interesting example). For the strict and warnings pragmas, there is no minimum version so I can just use zero.</p>

<p>The final part of the script begins with the <code>eval</code> and it&rsquo;s a little odd. Older versions of ExtUtils::MakeMaker didn&rsquo;t support version 2 of the CPAN meta specification, so using <a href="https://metacpan.org/pod/ExtUtils::MakeMaker#META_MERGE">META_MERGE</a> this will only be included if being built with a modern version. This optional entry can be used if the distribution code is in a repository like GitHub, otherwise it&rsquo;s not needed. Sites like MetaCPAN will include a link to the repo on GitHub if this is present.</p>

<h3 id="create-a-readme">Create a README</h3>

<p>I like to cheat for this one:</p>

<pre><code>$ perldoc -u script/foo &gt; README.pod
</code></pre>

<p>This writes the raw POD out of the script into <code>README.pod</code>. One thing to remember is to include installation instructions in this file. This is why I included it in the script POD.</p>

<h3 id="add-a-license-file">Add a LICENSE file</h3>

<p>I&rsquo;ve already specified this distribution&rsquo;s software license as FreeBSD in the makefile, so I should include a copy of the license in the distribution. This is easy with <a href="https://metacpan.org/pod/App::Software::License">App::Software::License</a>:</p>

<pre><code>$ software-license --holder 'David Farrell' --license FreeBSD --type fulltext &gt; LICENSE
</code></pre>

<p>This creates a FreeBSD license in my name and writes it to the <code>LICENSE</code> file.</p>

<h3 id="build-the-distribution-tarball">Build the distribution tarball</h3>

<p>Ok now the fun begins!</p>

<pre><code>$ perl Makefile.PL
Generating a Unix-style Makefile
Writing Makefile for App::foo
Writing MYMETA.yml and MYMETA.json
</code></pre>

<p>This creates the <code>Makefile</code> but also META files which define the metadata of the distribution. These is used by the CPAN toolchain for things like indexing, version control and dependency management (<a href="https://metacpan.org/pod/CPAN::Meta::Spec">CPAN::Meta::Spec</a> describes the metadata specification).</p>

<pre><code>$ make manifest
&quot;/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0&quot; &quot;-MExtUtils::Manifest=mkmanifest&quot; -e mkmanifest
Added to MANIFEST: lib/App/foo.pm
Added to MANIFEST: LICENSE
Added to MANIFEST: Makefile.PL
Added to MANIFEST: MANIFEST
Added to MANIFEST: README.pod
Added to MANIFEST: script/foo
</code></pre>

<p>This will create the <code>MANIFEST</code> file, which lists all of the files in a distribution.</p>

<pre><code>$ make
cp lib/App/foo.pm blib/lib/App/foo.pm
cp README.pod blib/lib/App/README.pod
cp script/foo blib/script/foo
&quot;/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0&quot; -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/foo
Manifying 1 pod document
Manifying 2 pod documents

$ make install
Manifying 1 pod document
Manifying 2 pod documents
Installing /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/site_perl/5.22.0/App/foo.pm
Installing /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/site_perl/5.22.0/App/README.pod
Installing /home/dfarrell/.plenv/versions/5.22.0/man/man1/foo.1
Installing /home/dfarrell/.plenv/versions/5.22.0/man/man3/App::README.3
Installing /home/dfarrell/.plenv/versions/5.22.0/man/man3/App::foo.3
Installing /home/dfarrell/.plenv/versions/5.22.0/bin/foo
Appending installation info to /home/dfarrell/.plenv/versions/5.22.0/lib/perl5/5.22.0/x86_64-linux/perllocal.pod
cp lib/App/foo.pm blib/lib/App/foo.pm
cp script/foo blib/script/foo
&quot;/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0&quot; -MExtUtils::MY -e 'MY-&gt;fixin(shift)' -- blib/script/foo
Manifying 1 pod document
</code></pre>

<p>These commands build the distribution and install it on my computer. I can test run the script now:</p>

<pre><code>$ foo
bar
</code></pre>

<p>That works, so I&rsquo;ll create the distribution tarball:</p>

<pre><code>$ make dist
rm -rf App-foo-0.01
&quot;/home/dfarrell/.plenv/versions/5.22.0/bin/perl5.22.0&quot; &quot;-MExtUtils::Manifest=manicopy,maniread&quot; \
        -e &quot;manicopy(maniread(),'App-foo-0.01', 'best');&quot;
mkdir App-foo-0.01
mkdir App-foo-0.01/lib
mkdir App-foo-0.01/lib/App
mkdir App-foo-0.01/script
Generating META.yml
Generating META.json
tar cvf App-foo-0.01.tar App-foo-0.01
App-foo-0.01/
App-foo-0.01/script/
App-foo-0.01/script/foo
App-foo-0.01/Makefile.PL
App-foo-0.01/lib/
App-foo-0.01/lib/App/
App-foo-0.01/lib/App/foo.pm
App-foo-0.01/META.json
App-foo-0.01/META.yml
App-foo-0.01/MANIFEST
App-foo-0.01/README.pod
rm -rf App-foo-0.01
gzip --best App-foo-0.01.tar
Created App-foo-0.01.tar.gz
</code></pre>

<p>Almost done, I&rsquo;ll use the Makefile to clean up the build files:</p>

<pre><code>$ make clean
rm -f \
foo.bso foo.def \
foo.exp foo.x \
 blib/arch/auto/App/foo/extralibs.all \
blib/arch/auto/App/foo/extralibs.ld Makefile.aperl \
*.a *.o \
*perl.core MYMETA.json \
MYMETA.yml blibdirs.ts \
core core.*perl.*.? \
core.[0-9] core.[0-9][0-9] \
core.[0-9][0-9][0-9] core.[0-9][0-9][0-9][0-9] \
core.[0-9][0-9][0-9][0-9][0-9] libfoo.def \
mon.out perl \
perl perl.exe \
perlmain.c pm_to_blib \
pm_to_blib.ts so_locations \
tmon.out
rm -rf \
  blib
mv Makefile Makefile.old &gt; /dev/null 2&gt;&amp;1
</code></pre>

<h3 id="upload-to-cpan">Upload to CPAN</h3>

<p>I already have a PAUSE account, so I can skip this step. Otherwise prospective CPAN authors need to <a href="http://pause.perl.org/pause/query?ACTION=request_id">register</a> for a PAUSE account. Don&rsquo;t skip on the &ldquo;A short description of why you would like a PAUSE ID&rdquo; entry - this is one way the PAUSE admins identify human versus bot requests, and you don&rsquo;t want to be mistaken for a bot!</p>

<p>Once I <a href="https://pause.perl.org/pause/authenquery">login</a> to PAUSE, I can upload the distribution from the <a href="https://pause.perl.org/pause/authenquery?ACTION=add_uri">uploads page</a>. These days I like to do it from the command line with <a href="https://metacpan.org/pod/CPAN::Uploader">CPAN::Uploader</a>. That would work like this:</p>

<pre><code>$ cpan-upload -u DFARRELL App-foo-0.01.tar.gz
</code></pre>

<p><code>cpan-upload</code> will then prompt for my PAUSE password, and confirm the upload was successful.</p>

<p>Within a few minutes, I&rsquo;ll receive two emails from PAUSE: one confirms the uploaded distribution file, the other confirms it was indexed. Depending on how fast the CPAN mirrors update their index, users can now install the module at their command line with:</p>

<pre><code>$ cpan App::foo
</code></pre>

<h3 id="wrap-up">Wrap-up</h3>

<p>It may seem like a lot of work at first, but I only had to create the stub module and the Makefile.PL, both of which can be copied from elsewhere, and edited. The other files were generated. All the files described in this article are available in the GitHub <a href="https://github.com/dnmfarrell/App-foo">repo</a>.</p>

<p>Chapter 12 of <a href="https://www.amazon.com/Intermediate-Perl-Beyond-Basics-Learning/dp/1449393098">Intermediate Perl</a> describes how to create a Perl distribution in greater detail. <a href="https://perldoc.perl.org/perlnewmod.html">perlnewmod</a> is a brief overview of how create a module and prepare it for CPAN.</p>

<p><br />
<em>This article was originally posted on <a href="http://perltricks.com">PerlTricks.com</a>.</em></p>

              </article>
              <p><strong>Tags</strong></p>
              <div class="tags">
                <div class="category"><a href="/categories/cpan">cpan</a></div>
                
                  <div class="tag"><a href="/tags/distribution">distribution</a></div>
                
                  <div class="tag"><a href="/tags/metacpan">metacpan</a></div>
                
                  <div class="tag"><a href="/tags/cpan-testers">cpan-testers</a></div>
                
                  <div class="tag"><a href="/tags/toolchain">toolchain</a></div>
                
              </div>
            </div>
            
              
                
<div class="row" id="author-bio-david-farrell">
  <div class="col-sm-2">
    
    <a href="/authors/david-farrell/"><div class="circle-avatar" style="background-image:url(/images/author/david-farrell.jpg)"></div></a>
  </div>
  <div class="col-sm-10">
    <a href="/authors/david-farrell/"><h3>David Farrell</h3></a>
    <p>David is the editor of Perl.com. An organizer of the <a href="http://www.meetup.com/The-New-York-Perl-Meetup-Group/">New York Perl Meetup</a>, he works for ZipRecruiter as a software developer, and sometimes <a href="https://twitter.com/perltricks">tweets</a> about Perl and Open Source.</p>
    <h5><a href="/authors/david-farrell/">Browse their articles</a></h5>
  </div>
</div>

            
            <div class="row">
              <h3>Feedback</h3>
              <p>Something wrong with this article? Help us out by opening an issue or pull request on <a href="https://github.com/tpf/perldotcom/blob/master/content/article/how-to-upload-a-script-to-cpan.md">GitHub</a></p>
            </div>
          </div>
          <div class="col-md-3">
            <div class="latest-sidebar">

  <div class="row">
    <div class="col-sm-12 centering">
      <span style="font-size:1.8em" class="antonio txt-blue-major">OUR LATEST ARTICLES</span>
    </div>
  </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/the-perl-admbassador-curtis-poe/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/the-perl-ambassador-curtis-poe/curtis-poe.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>The Perl Ambassador: Curtis &#39;Ovid&#39; Poe</h6>
          <p style="line-height:1"><small>The person behind the news of Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/a-tour-with-net-ftp/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/a-tour-with-net-ftp/thumb_kidyes.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>A tour with Net::FTP</h6>
          <p style="line-height:1"><small>How to write an FTP client in Perl</small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/shortcode_test/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/author/brian-d-foy.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>shortcode_test</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/listen-to-larry-wall-s-state-of-the-onion-2000-on-youtube/thumb_larry-wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Listen to Larry Wall&#39;s State of the Onion 2000 on YouTube</h6>
          <p style="line-height:1"><small></small></p>
      </div>
        </a>
    </div>
  
    
    
    <div class="row">
        <a href="http://localhost:1313/article/announcing-perl-7/">
      <div class="col-sm-3">
        <div class="circle-avatar" style="background-image:url(/images/announcing-perl-7/thumb_seven_on_blue_wall.jpg)"></div>
      </div>
      <div class="col-sm-9">
          <h6>Announcing Perl 7</h6>
          <p style="line-height:1"><small>Perl 5 with modern defaults</small></p>
      </div>
        </a>
    </div>
  
</div>
<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
  <script async src="/widget/toplinks/toplinks.js" type="text/javascript"></script>
    <div id="toplinks"></div>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <a class="twitter-timeline" data-height="640" data-dnt="true" data-theme="dark" href="https://twitter.com/perlfoundation?ref_src=twsrc%5Etfw">Tweets by perlfoundation</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
</div>

<div class="row" style="margin-top:20px">
  <div class="col-sm-12 centering">
    <script src="https://www.reddit.com/r/perl/hot/.embed?limit=10&t=all" type="text/javascript"></script>
  </div>
</div>



          </div>
        </div>
      </div>
    </section>
  </section>
<script>
 
var tables, i;
tables = document.getElementsByTagName('table');
for (i=0;i<tables.length;i++) {
  tables[i].className = 'table table-striped';
}
</script>
<div class="push"></div>
<div class="footer">
  <div class="container">
    <div class="row">
      <div class="col-md-1">
        <h5>Site Map</h5>
        <ul>
        <li><a href="/">Home</a></li>
        <hr>
        <li><a href="/about">About</a></li>
        <hr>
        <li><a href="/authors">Authors</a></li>
        <hr>
        <li><a href="/categories">Categories</a></li>
        <hr>
        <li><a href="/tags">Tags</a></li>
        <hr>
        </ul>
      </div>
      <div class="col-md-3">
        <h5>Contact Us</h5>
        <p>To get in touch, send an email to: perl.com-editor@perl.org</p>
        <p><a href="https://perl.org">
              <img src="/images/site/perl-onion_20.png" alt="Perl Onion"></a>
          <a href="https://twitter.com/intent/follow?screen_name=perlfoundation">
              <img src="/images/site/twitter_20.png" alt="twitter"></a>
          <a href="/index.xml" /><img src="/images/site/rss_20.png" alt="rss"></a>
          <a href="https://github.com/tpf/perldotcom">
              <img src="/images/site/github_light_20.png" alt="GitHub logo"></a></p>
      </div>
      <div class="col-md-2">
          <h5>License</h5>
          <p>This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.</p>
          <p><a rel="license" href="https://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a></p>
      </div>
      <div class="col-md-5">
          <h5>Legal</h5>
          <p>Perl.com and the authors make no representations with respect to the accuracy or completeness of the contents of all work on this website and specifically disclaim all warranties, including without limitation warranties of fitness for a particular purpose. The information published on this website may not be suitable for every situation. All work on this website is provided with the understanding that Perl.com and the authors are not engaged in rendering professional services. Neither Perl.com nor the authors shall be liable for damages arising herefrom.</p>
      </div>
    </div>
  </div>
</div>
<script src="/javascript/jquery.min.js"></script>
<script src="/javascript/bootstrap.min.js"></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>
</html>

